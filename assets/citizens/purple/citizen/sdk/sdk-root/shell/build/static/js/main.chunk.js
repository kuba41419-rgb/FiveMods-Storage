(this["webpackJsonpsdk-root"]=this["webpackJsonpsdk-root"]||[]).push([[0],[,,,function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"i",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"h",(function(){return c})),a.d(t,"j",(function(){return d})),a.d(t,"e",(function(){return m})),a.d(t,"k",(function(){return u})),a.d(t,"f",(function(){return p})),a.d(t,"c",(function(){return h})),a.d(t,"l",(function(){return E}));var n=a(24);const o=Object(n.b)({checkCreateRequest:"project:checkCreateRequest",checkCreateResult:"project:checkCreateResult",checkOpenRequest:"project:checkOpenRequest",create:"project:create",open:"project:open",close:"project:close",update:"project:update",build:"project:build",buildError:"project:buildError",setServerUpdateChannel:"project:setServerUpdateChannel",setSystemResources:"project:setSystemResources",setVariable:"project:setVariable",getRecents:"project:getRecents",recents:"project:recents",removeRecent:"project:removeRecent",pathsStateUpdate:"project:pathsStateUpdate",setPathsStatePatch:"project:setPathsStatePatch",setAssetConfig:"project:setResourceConfig",fsUpdate:"project:fsUpdate",createFile:"project:createFile",createDirectory:"project:createDirectory",renameEntry:"project.renameEntry",moveEntry:"project:moveEntry",deleteEntry:"project:deleteEntry",copyEntry:"project:copyEntry",copyEntries:"project:copyEntries",freePendingFolderDeletion:"project:freePendingFolderDeletion",startServer:"project:startServer",stopServer:"project:stopServer"}),r=Object(n.b)({create:"asset:create",import:"asset:import",setConfig:"asset:setConfig",updates:"asset:updates"}),l=Object(n.b)({fetchReleases:"github:fetchReleases"}),i=Object(n.b)({ackState:"ackState",state:"state",serverDataState:"serverDataState",gameLaunched:"state:gameLaunched",setUserId:"state:setUserId"}),s=Object(n.b)({readDirRecursive:"explorer:readDirRecursive",readDir:"explorer:readDir",readRoots:"explorer:readRoots",readRoot:"explorer:readRoot",dir:"explorer:dir",dirRecursive:"explorer:dirRecursive",roots:"explorer:roots",root:"explorer:root"}),c=Object(n.b)({ackState:"server:ackState",state:"server:state",resourceDatas:"server:resourceDatas",bufferedOutput:"server:output",structuredOutputMessage:"server:outputStructured",clearOutput:"server:clearOutput",sendCommand:"server:sendCommand",ackResourcesState:"server:ackResourcesState",resourcesState:"server:resourcesState",restartResource:"server:restartResource",stopResource:"server:stopResource",startResource:"server:startResource",updateChannelsState:"server:updateChannelsState",ackUpdateChannelsState:"server:ackUpdateChannelsState",checkForUpdates:"server:checkForUpdates",installUpdate:"server:installUpdate"}),d=Object(n.b)({ack:"statuses:ack",update:"statuses:update",statuses:"statuses:statuses"}),m=Object(n.b)({ack:"notifications:ack",create:"notifications:create",delete:"notifications:delete"}),u=Object(n.b)({ackTasks:"taskReporter:ackTasks",tasks:"taskReporter:tasks",taskAdded:"taskReporter:taskAdded",taskChanged:"taskReporter:taskChanged",taskDeleted:"taskReporter:taskDeleted"}),p=Object(n.b)({output:"output:output",outputLabel:"output:outputLabel",flush:"output:flush"}),h=Object(n.b)({ack:"game:ack",gameState:"game:gameState",gameLaunched:"game:gameLaunched",gameProcessStateChanged:"game:gameStateChanged",connectionStateChanged:"game:connectionStateChanged",start:"game:start",stop:"game:stop",restart:"game:restart",refreshArchetypesCollection:"game:refreshArchetypesCollection"}),E=Object(n.b)({start:"we:start",stop:"we:stop",stopped:"we:stopped",mapLoaded:"we:mapLoaded",setCam:"we:setCam",createPatch:"we:createPatch",applyPatchChange:"we:applyPatchChange",deletePatch:"we:deletePatch",createAddition:"we:createAddition",additionPlaced:"we:additionPlaced",deleteAddition:"we:deleteAddition",setAddition:"we:setAddition",applyAdditionChange:"we:applyAdditionChange",setAdditionGroup:"we:setAdditionGroup",createAdditionGroup:"we:createAdditionGroup",deleteAdditionGroup:"we:deleteAdditionGroup",setAdditionGroupLabel:"we:setAdditionGroupName"})},,,function(e,t,a){"use strict";(function(e){a.d(t,"c",(function(){return _})),a.d(t,"e",(function(){return C})),a.d(t,"d",(function(){return v})),a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return O}));var n=a(194),o=a.n(n),r=a(115),l=a(37),i=a(42);const s=Object(l.c)("api:rx"),c=(Object(l.c)("api:tx"),Object(l.d)("host"));Object(l.a)("host");const d=Symbol("ANY_MESSAGE"),m={},u={};let p=[],h=!1;const E={},g=new o.a("ws://localhost:35419/api"),b={binary:!0,compress:!0};function f(t){g.send(e.from(t),b)}g.addEventListener("open",()=>{h=!0,p.length>0&&(p.forEach(e=>f(e)),p=[])}),g.addEventListener("close",()=>{h=!1}),g.addEventListener("message",async e=>{try{const[t,a]=JSON.parse(await e.data.text());if("@@log"===t){const[e,...t]=a;return c(e,...t)}if("@@cb"===t){const[e,t,n]=a,o=u[e];return o?(delete u[e],"error"===t?o(n,void 0):o(null,n)):void s("No callback for message",e)}const n=new Set(m[t]),o=new Set(m[d]);n&&n.forEach(e=>e(a,t)),0===(null===n||void 0===n?void 0:n.size)&&(E[t]||(E[t]=[]),E[t].push(a)),o&&o.forEach(e=>e(a,t))}catch(t){Object(l.b)(t)}});const _=(e,t)=>{const a=JSON.stringify([e,t]);h?f(a):p.push(a)},C=(e,t,a)=>{_(Object(r.a)(e,t),a)},v=(e,t,a)=>{const n=Object(i.a)();u[n]=a;const o=JSON.stringify(["@@cb",n,e,t]);return h?f(o):p.push(o),()=>delete u[n]},y=(e,t)=>{if((m[e]||(m[e]=new Set)).add(t),e!==d&&E[e]){for(const a of E[e])t(a,e);delete E[e]}return()=>N(e,t)},O=(e,t,a)=>y(Object(r.a)(e,t),a),N=(e,t)=>{const a=m[e];a&&a.delete(t)}}).call(this,a(237).Buffer)},,,,function(e,t,a){e.exports={root:"PropertiesTool_root__3rPsp",header:"PropertiesTool_header__ecWm4",icon:"PropertiesTool_icon__2TNNJ",name:"PropertiesTool_name__1sCZa",block:"PropertiesTool_block__3VlQW",label:"PropertiesTool_label__2J7uk","label-row":"PropertiesTool_label-row__26yPZ",controls:"PropertiesTool_controls__2RTiU",control:"PropertiesTool_control__3ctAm",inputs:"PropertiesTool_inputs__2aXj_",input:"PropertiesTool_input__2iGpM"}},function(e,t,a){"use strict";var n,o,r,l;a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return s})),function(e){e[e.booting=0]="booting",e[e.preparing=1]="preparing",e[e.ready=2]="ready"}(n||(n={})),function(e){e[e.down=0]="down",e[e.up=1]="up",e[e.booting=2]="booting"}(o||(o={})),function(e){e[e.checking=0]="checking",e[e.updating=1]="updating",e[e.ready=2]="ready"}(r||(r={})),function(e){e[e.ready=0]="ready",e[e.checking=1]="checking",e[e.updateRequired=2]="updateRequired",e[e.updating=3]="updating",e[e.missingArtifact=4]="missingArtifact"}(l||(l={}));const i={recommended:"recommended",optional:"optional",latest:"latest"};var s;!function(e){e[e.windowsDevModeEnabled=0]="windowsDevModeEnabled",e[e.dotnetAvailable=1]="dotnetAvailable",e[e.worldEditor=2]="worldEditor"}(s||(s={}))},,function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return s}));const n=new Set,o=Object.create(null),r=Object.create(null),l=(e,t)=>(o[e]||(o[e]=new Set),o[e].add(t),()=>o[e].delete(t)),i=e=>(n.add(e),()=>n.delete(e)),s=(e,t)=>(r[e]||(r[e]=new Set),r[e].add(t),()=>r[e].delete(t));window.addEventListener("message",e=>{for(const o of n)o(e.data);if("object"!==typeof e.data||null===e.data)return;if(e.data.eventName){const t=r[e.data.eventName];if(t)for(const a of t)a(e.data);return}const{type:t,data:a}=e.data;if(!t)return;const l=o[t];if(l&&0!==l.size)for(const n of l)n(a)})},function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n,o,r=a(48),l=a(8),i=a(3);!function(e){e[e.GP_STOPPED=0]="GP_STOPPED",e[e.GP_STARTING=1]="GP_STARTING",e[e.GP_RUNNING=2]="GP_RUNNING",e[e.GP_STOPPING=3]="GP_STOPPING"}(n||(n={})),function(e){e[e.CS_IDLE=0]="CS_IDLE",e[e.CS_INITING=1]="CS_INITING",e[e.CS_INITRECEIVED=2]="CS_INITRECEIVED",e[e.CS_DOWNLOADING=3]="CS_DOWNLOADING",e[e.CS_DOWNLOADCOMPLETE=4]="CS_DOWNLOADCOMPLETE",e[e.CS_FETCHING=5]="CS_FETCHING",e[e.CS_CONNECTING=6]="CS_CONNECTING",e[e.CS_CONNECTED=7]="CS_CONNECTED",e[e.CS_ACTIVE=8]="CS_ACTIVE"}(o||(o={}));var s=a(6),c=a(39),d=a(13),m=a(109),u=a(47),p=a(67);const h=new class{constructor(){this.state=r.a.NOT_RUNNING,this.launched=!1,this.processState=n.GP_STOPPED,this.connectionState=o.CS_IDLE,this.archetypesCollectionPending=!1,this.archetypesCollectionReady=!1,this.restart=()=>{Object(s.c)(i.c.restart)},this.archetypesCollectionReadyEvent=new c.a,Object(l.d)(this),Object(p.a)(i.c.ack,e=>{this.state=e.gameState,this.launched=e.gameLaunched,this.processState=e.gameProcessState,this.connectionState=e.connectionState,this.archetypesCollectionReady=e.archetypesCollectionReady}),Object(p.a)(i.c.gameState,e=>{this.state=e,this.state===r.a.LOADING&&m.a.resetLoadingProgress()}),Object(p.a)(i.c.gameLaunched,e=>{this.launched=e}),Object(p.a)(i.c.gameProcessStateChanged,({current:e})=>{this.processState=e}),Object(p.a)(i.c.connectionStateChanged,({current:e})=>{this.connectionState=e}),Object(d.b)("fxdk:loadingScreenWarning",()=>{const e=["Loading screen has not been shut down for 15 seconds",'This is the reason why you see the "Awaiting scripts" message in bottom right corner of the game-view',"",'Check if the "Spawn manager" system resource is enabled in Project settings,',"or if using custom spawn manager, check if you're shutting down loading screen properly"].join("\n");u.a.warning(e)}),Object(d.b)("fxdk:gameFatalError",e=>{u.a.error(e),this.restart()})}ack(){Object(s.c)(i.c.ack)}onArchetypeCollectionReady(e){this.archetypesCollectionReadyEvent.addListener(e)}refreshArchetypesCollection(){this.archetypesCollectionPending=!0,this.archetypesCollectionReady=!1,Object(s.d)(i.c.refreshArchetypesCollection,null,(e,t)=>Object(l.h)(()=>{this.archetypesCollectionPending=!1,this.archetypesCollectionReady=!0,!t&&e?u.a.error("Failed to obtain object list: "+e):this.archetypesCollectionReadyEvent.emit()}))}}},,,function(e,t,a){e.exports={inline:"WorldEditorIntro_inline__1Yo1l",gizmo:"WorldEditorIntro_gizmo__1XbtF",translation:"WorldEditorIntro_translation__Z1_bm",rotation:"WorldEditorIntro_rotation__fgdsF",scale:"WorldEditorIntro_scale__zsysA"}},,function(e,t,a){e.exports={toggle:"BaseTool_toggle__1dPmh",active:"BaseTool_active__2kI76",highlight:"BaseTool_highlight__1Mo0L",hoverable:"BaseTool_hoverable__9Ta1x",panel:"BaseTool_panel__3QIrB","panel-alike":"BaseTool_panel-alike__f5N3a",right:"BaseTool_right__3OU3c",appearance:"BaseTool_appearance__3edYh"}},,function(e,t,a){e.exports={"item-wrapper":"item_item-wrapper__2pW3R",dropping:"item_dropping__1BH4X",dragging:"item_dragging__2ZL-X",item:"item_item__2yOVY",active:"item_active__3Py5N",icon:"item_icon__3zAPY",status:"item_status___w3Cg",entry:"item_entry__2JxO9",state:"item_state__2_4fo",enabled:"item_enabled__lDOLN",running:"item_running__28KFK",title:"item_title__waFv1",children:"item_children__3Zhdd",creator:"item_creator__2KpUU"}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return l}));let n=0;function o(){return(n++).toString(16)}function r(e){return o()}function l(e){return Object.keys(e).reduce((e,t)=>(e[t]=o(),e),{})}},function(e,t,a){e.exports={root:"ModeSelector_root__BkUhu",modes:"ModeSelector_modes__3hDKC",mode:"ModeSelector_mode__3MWEE",active:"ModeSelector_active__1JknI",toggle:"ModeSelector_toggle__jQsnz",coords:"ModeSelector_coords__S2201",global:"ModeSelector_global__3vtUC",axis:"ModeSelector_axis__3KWK8",object:"ModeSelector_object__1Ux9w"}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(8),o=a(3),r=a(131),l=a(6);const i=Object.create(null),s={watchCommands:{}},c=new class{constructor(){this.statuses=Object.create(null),this.setStatuses=e=>{this.statuses=e},this.updateStatus=([e,t])=>{this.statuses[e]=t},Object(n.d)(this),Object(l.a)(o.j.statuses,this.setStatuses),Object(l.a)(o.j.update,this.updateStatus)}ack(){Object(l.c)(o.j.ack)}get(e,t){const a=this.statuses[e];return null===a||void 0===a?t:a}getResourceStatus(e){return this.get("resource-"+e,s)}getFeature(e){return this.get(r.a.state,i)[e]}}},,function(e,t,a){e.exports={root:"Importer_root__l3n7O",explorer:"Importer_explorer__3G0RZ",releases:"Importer_releases__1O0Kd",checkbox:"Importer_checkbox__XSPU9",examples:"Importer_examples__3JueC","example-resource":"Importer_example-resource__1cf2_",description:"Importer_description__3eTi-",active:"Importer_active__6i0hz"}},function(e,t,a){e.exports={root:"AdditionsTool_root__HcZf0",dropping:"AdditionsTool_dropping__NgRGX",placeholder:"AdditionsTool_placeholder__2jL_A",controls:"AdditionsTool_controls__Y_5jU",creator:"AdditionsTool_creator__3lQoi",item:"AdditionsTool_item__1P7wv",active:"AdditionsTool_active__14fdw",highlight:"AdditionsTool_highlight__3O3o6",dragging:"AdditionsTool_dragging__3s0Dt",editing:"AdditionsTool_editing__2lfCA"}},,,function(e,t,a){e.exports={root:"WorldEditorToolbar_root__21Ad4",hidden:"WorldEditorToolbar_hidden__2XlHq",hideable:"WorldEditorToolbar_hideable__3PVaB","top-left":"WorldEditorToolbar_top-left__1GWVu","top-center":"WorldEditorToolbar_top-center__3r-h7","top-right":"WorldEditorToolbar_top-right__3yle7","left-bottom":"WorldEditorToolbar_left-bottom__22LyL",bottom:"WorldEditorToolbar_bottom__2O-z9"}},,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return c}));var n=a(38),o=a.n(n);const r=o()("shell"),l=r.extend("error");r.log=console.log.bind(console);const i=e=>r.extend(e),s=e=>{const t=o()(e);return t.log=console.log.bind(console),t},c=e=>o.a.enable(e)},,function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));class n{constructor(){this.listeners=new Set}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}removeListener(e){this.listeners.delete(e)}emit(e){this.listeners.forEach(t=>t(e))}}},function(e,t,a){e.exports={root:"Toolbar_root__KHjEH",active:"Toolbar_active__oLK45",trigger:"Toolbar_trigger__y1mAu",resizing:"Toolbar_resizing__2OV3w","tools-bar":"Toolbar_tools-bar__1jkxP",controls:"Toolbar_controls__1KD93","project-name":"Toolbar_project-name__1EB4W",menu:"Toolbar_menu__1AbA_",pane:"Toolbar_pane__3cQri","status-bar":"Toolbar_status-bar__1kJ3v",item:"Toolbar_item__18Wo2"}},function(e,t,a){e.exports={root:"AdditionsGroup_root__2nisE",collapsed:"AdditionsGroup_collapsed__3I3zS",children:"AdditionsGroup_children__32IHm",dropping:"AdditionsGroup_dropping__3POmj",header:"AdditionsGroup_header__2lBnK",active:"AdditionsGroup_active__2Q4rs",icon:"AdditionsGroup_icon__31a1o",name:"AdditionsGroup_name__cQtp7",editing:"AdditionsGroup_editing__1jdPn",controls:"AdditionsGroup_controls__2xsDB"}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=()=>Math.abs(4294967295*Math.random()|0).toString(16)},,function(e,t,a){e.exports={item:"ProjectControls_item__3cGqu","item-stack":"ProjectControls_item-stack__3wKxo",stack:"ProjectControls_stack__3p2Lk"}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(8),o=a(3),r=a(58),l=a(6),i=a(42);class s{constructor(e,t,a,n,o){this.id=e,this.type=t,this.text=a,this.timer=n,this.animationDuration=o}}const c=new class{constructor(){this.items={},this.delete=e=>{if(this.items[e]){const t=this.items[e];t.timer&&clearTimeout(t.timer),delete this.items[e],Object(l.c)(o.e.delete,e)}},this.create=({id:e,type:t,text:a,expireAt:n})=>{const o=new s(e,t,a);if(n){const t=n-Date.now();if(t<0)return;o.animationDuration=t+"ms",o.timer=setTimeout(()=>this.delete(e),t)}this.items[e]=o},Object(n.d)(this),Object(l.a)(o.e.create,this.create)}get length(){return Object.keys(this.items).length}get values(){return Object.values(this.items)}get entries(){return Object.entries(this.items)}ack(){Object(l.c)(o.e.ack)}info(e,t){this.createLocal(r.a.info,e,t)}warning(e,t){this.createLocal(r.a.warning,e,t)}error(e,t){this.createLocal(r.a.error,e,t)}createLocal(e,t,a){this.create({id:Object(i.a)(),type:e,text:t,expireAt:a})}}},function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e[e.NOT_RUNNING=0]="NOT_RUNNING",e[e.READY=1]="READY",e[e.LOADING=2]="LOADING",e[e.CONNECTED=3]="CONNECTED",e[e.UNLOADING=4]="UNLOADING"}(n||(n={}))},function(e,t,a){e.exports={root:"Explorer_root__Bfy_D",dir:"Explorer_dir__1KbuI",name:"Explorer_name__3LUjw",selected:"Explorer_selected__1D4bj",children:"Explorer_children__kNXLC"}},function(e,t,a){e.exports={root:"Hotkeys_root__1ojW2",wrapper:"Hotkeys_wrapper__2zui3",editing:"Hotkeys_editing__2FOiy",item:"Hotkeys_item__3wxmF",controls:"Hotkeys_controls__3NOP7",cancel:"Hotkeys_cancel__epj1M",save:"Hotkeys_save__13A_Z",title:"Hotkeys_title__2h8Ua"}},function(e,t,a){e.exports={root:"NotificationItem_root__1-k5v",progress:"NotificationItem_progress__2hlJM",shrimp:"NotificationItem_shrimp__3H0Iz",actions:"NotificationItem_actions__2v_KM",button:"NotificationItem_button__tp1-g",content:"NotificationItem_content__3oJJO",icon:"NotificationItem_icon__33Ro7",text:"NotificationItem_text__Rk10D",info:"NotificationItem_info__3LxLZ",warning:"NotificationItem_warning__2feRy",error:"NotificationItem_error__druph"}},function(e,t,a){e.exports={root:"Updater_root__2ZhiX",shrimp:"Updater_shrimp__HgghC",content:"Updater_content__2YhWY",title:"Updater_title__1AMUP",actions:"Updater_actions__-GLcA",scroll:"Updater_scroll__2lEIU",progress:"Updater_progress__3nBB_",bar:"Updater_bar__Bqs0m","current-file-name":"Updater_current-file-name__2zINt",changelog:"Updater_changelog__1eFsC"}},,,,,,function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e[e.info=0]="info",e[e.warning=1]="warning",e[e.error=2]="error"}(n||(n={}))},,function(e,t,a){e.exports={root:"Changelog_root__29dX9",older:"Changelog_older__2IpZG",entry:"Changelog_entry__2pPla",title:"Changelog_title__25PYW",content:"Changelog_content__3A9iD",modal:"Changelog_modal__1hdRK",changelog:"Changelog_changelog__2we10"}},function(e,t,a){e.exports={wrapper:"ProjectSystemResources_wrapper__L9IUk",category:"ProjectSystemResources_category__1kYph",list:"ProjectSystemResources_list__2ZnYd",resource:"ProjectSystemResources_resource__3dqfy",row:"ProjectSystemResources_row__2FVm5",check:"ProjectSystemResources_check__1zLzO",name:"ProjectSystemResources_name__1SXLE",description:"ProjectSystemResources_description__RFpjq",active:"ProjectSystemResources_active__EG7FI"}},,,,,function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return d}));var n=a(8),o=a(14),r=a(155),l=a(154),i=a(347);function s(){return Object(r.a)(()=>Object(l.a)(new i.a(e)),3)}let c=s();const d=new class{constructor(){this.archetypes=[],this.reload=()=>{c.terminate(!0),c=s(),this.load()},Object(n.d)(this),o.a.onArchetypeCollectionReady(this.reload)}async search(e){return c.queue(t=>t.search(e))}async getArchetypeFileName(e){return c.queue(t=>t.getArchetypeFileName(e))}async getArchetypeLodDist(e){return c.queue(t=>t.getArchetypeLodDist(e))}async load(){c&&await c.queue(e=>e.getAll()).then(e=>Object(n.h)(()=>{this.archetypes=e}))}}}).call(this,a(252))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(8),o=a(6);function r(e,t){Object(o.a)(e,e=>Object(n.h)(()=>t(e)))}},function(e,t,a){e.exports={root:"ProjectBuilder_root__2ElCQ","folder-select":"ProjectBuilder_folder-select__YOtJO",button:"ProjectBuilder_button__14k67",input:"ProjectBuilder_input__JcWVq",error:"ProjectBuilder_error__3S5Qc","asset-build-error":"ProjectBuilder_asset-build-error__1f4Ek"}},function(e,t,a){e.exports={root:"PatchesTool_root__38myE",dropping:"PatchesTool_dropping__25Pzp",placeholder:"PatchesTool_placeholder__12x3A",item:"PatchesTool_item__2OG_o",active:"PatchesTool_active__3OLwI",highlight:"PatchesTool_highlight__3qjnt",dragging:"PatchesTool_dragging__6g4Vw",editing:"PatchesTool_editing__Ssm1p"}},,,,function(e,t,a){e.exports={root:"ResourceTemplate_root__2lWgq",checked:"ResourceTemplate_checked__2v9nq",disabled:"ResourceTemplate_disabled__Ys85k",icon:"ResourceTemplate_icon__2B2Np",content:"ResourceTemplate_content__29WLZ",title:"ResourceTemplate_title__3ZwtL",description:"ResourceTemplate_description__10Inm"}},function(e,t,a){e.exports={root:"RecentProjectItem_root__3LIyM",actions:"RecentProjectItem_actions__x_KbH",content:"RecentProjectItem_content__1O3NL",icon:"RecentProjectItem_icon__cUYml",info:"RecentProjectItem_info__3CEVo",name:"RecentProjectItem_name__1i0fe",path:"RecentProjectItem_path__1Ha4K"}},function(e,t,a){e.exports={root:"AddObjectTool_root__gsGUe",controls:"AddObjectTool_controls__1kigQ",filter:"AddObjectTool_filter__3xJRm",refresh:"AddObjectTool_refresh__3ds2j",loader:"AddObjectTool_loader__1-yPy",list:"AddObjectTool_list__2fGxa",item:"AddObjectTool_item__1v8WZ",active:"AddObjectTool_active__2ryGg"}},,,,,function(e,t,a){e.exports={root:"Button_root__Bf2xl",disabled:"Button_disabled__fr7ju",autofocus:"Button_autofocus__1ibp2",primary:"Button_primary__1jgBs",transparent:"Button_transparent__kPkkv"}},function(e,t,a){e.exports={backdrop:"ContextMenu_backdrop__3gRlr",menu:"ContextMenu_menu__2g57I",separator:"ContextMenu_separator__3RHL5",item:"ContextMenu_item__1Mwrp",disabled:"ContextMenu_disabled__10wYT",dummy:"ContextMenu_dummy__3kmbJ"}},function(e,t,a){e.exports={root:"ProjectExplorer_root__3p8Qu",dropping:"ProjectExplorer_dropping__13rDr",creator:"ProjectExplorer_creator__avH5m",empty:"ProjectExplorer_empty__zPuQQ",shakey:"ProjectExplorer_shakey__9RGjN","quick-access":"ProjectExplorer_quick-access__3AwLr"}},function(e,t,a){e.exports={root:"Switch_root__1X7V6",disabled:"Switch_disabled__31wJF",descripted:"Switch_descripted__29yfq",description:"Switch_description__1xX8H",option:"Switch_option__2CZIr",active:"Switch_active__wOen2"}},function(e,t,a){e.exports={root:"Stepper_root__YKEKI",step:"Stepper_step__XeME2",active:"Stepper_active__30vDl",passed:"Stepper_passed__1tJuL",icon:"Stepper_icon__3a6lD",label:"Stepper_label__JILuZ"}},function(e,t,a){e.exports={root:"TaskItem_root__2aHwp",progress:"TaskItem_progress__1KnN3",indeterminate:"TaskItem_indeterminate__1oopG",slidingStripe:"TaskItem_slidingStripe__36JWq",bar:"TaskItem_bar__1SHSu",title:"TaskItem_title__1adkO",text:"TaskItem_text__TNSZu"}},function(e,t,a){e.exports={root:"Intro_root__24OpK",focuser:"Intro_focuser__2JD4n",content:"Intro_content__1-e7S",appearance:"Intro_appearance__dCuNY",transitions:"Intro_transitions__3MhPR",wrapper:"Intro_wrapper__15Ar8",controls:"Intro_controls__1VVbr"}},function(e,t,a){e.exports={root:"EnvironmentTool_root__3BxJs",entry:"EnvironmentTool_entry__3cPKJ","clock-header":"EnvironmentTool_clock-header__6uQMD",clock:"EnvironmentTool_clock__1n-MQ","weather-buttons":"EnvironmentTool_weather-buttons__2tt3X"}},,,,,,,,function(e,t,a){e.exports={root:"Modal_root__2sdia","full-width":"Modal_full-width__3KhMI",content:"Modal_content__ODQBL","full-height":"Modal_full-height__F2fBM",backdrop:"Modal_backdrop__FpjnK",appearance:"Modal_appearance__1KRpV"}},,function(e,t,a){e.exports={wrapper:"Title_wrapper__1Lmp2",appearance:"Title_appearance__2eBJ5",animated:"Title_animated__3sW_C","fixed-on-top":"Title_fixed-on-top__3o-Hb","fixed-on-bottom":"Title_fixed-on-bottom__33eSb","fixed-on-bottom-left":"Title_fixed-on-bottom-left__12Vwv","fixed-on-left":"Title_fixed-on-left__GEJyl","fixed-on-right":"Title_fixed-on-right__18DJW",root:"Title_root__2vmck",shortcut:"Title_shortcut__npaVr"}},function(e,t,a){e.exports={root:"ProjectSettings_root__38d7x",left:"ProjectSettings_left__3MQsk",tabs:"ProjectSettings_tabs__17wrs",actions:"ProjectSettings_actions__2UhSW",right:"ProjectSettings_right__6KBLb"}},function(e,t,a){e.exports={root:"TabSelector_root__2aUTW",extender:"TabSelector_extender__3MQL0",item:"TabSelector_item__z6yRP",active:"TabSelector_active__Tg_wV",vertical:"TabSelector_vertical__2o147"}},function(e,t,a){e.exports={root:"Release_root__1YO1C",checked:"Release_checked__yMtbZ",content:"Release_content__3hWGR",title:"Release_title__LjhDR",description:"Release_description__fhCQg"}},function(e,t,a){e.exports={root:"ServerButton_root__1T2Dy",up:"ServerButton_up__1ImgG",down:"ServerButton_down__2La-0",error:"ServerButton_error__3VbJ2"}},function(e,t,a){e.exports={root:"StatusBar_root__tLe1R",icon:"StatusBar_icon__17Fx2","status-center":"StatusBar_status-center__I8EbJ","status-center-decorator":"StatusBar_status-center-decorator__7S1tR"}},function(e,t,a){e.exports={root:"Welcome_root__2TLmR",active:"Welcome_active__3OhHP",header:"Welcome_header__1_U6O","recent-projects":"Welcome_recent-projects__3naCC",controls:"Welcome_controls__2c30x"}},function(e,t,a){e.exports={root:"LoadScreen_root__2KaB0",text:"LoadScreen_text__FiuTz",progress:"LoadScreen_progress__hsm9O",indeterminate:"LoadScreen_indeterminate__1DJhh",slidingStripe:"LoadScreen_slidingStripe__2kndS",bar:"LoadScreen_bar__QDOVQ"}},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(8),o=a(13);var r;!function(e){e[e.INIT_UNKNOWN=0]="INIT_UNKNOWN",e[e.INIT_CORE=1]="INIT_CORE",e[e.INIT_BEFORE_MAP_LOADED=2]="INIT_BEFORE_MAP_LOADED",e[e.INIT_AFTER_MAP_LOADED=4]="INIT_AFTER_MAP_LOADED",e[e.INIT_SESSION=8]="INIT_SESSION"}(r||(r={}));const l=new class{constructor(){this.loadingProgress=0,Object(n.d)(this),Object(o.a)("loadProgress",({loadFraction:e})=>{Object(n.h)(()=>{this.loadingProgress=e})}),Object(o.a)("startInitFunction",({type:e})=>{}),Object(o.a)("startInitFunctionOrder",({type:e,order:t,count:a})=>{}),Object(o.a)("initFunctionInvoking",({type:e,name:t,idx:a})=>{}),Object(o.a)("initFunctionInvoked",({type:e,name:t})=>{}),Object(o.a)("endInitFunction",({type:e})=>{}),Object(o.a)("startDataFileEntries",({count:e})=>{}),Object(o.a)("performMapLoadFunction",({idx:e})=>{}),Object(o.a)("onDataFileEntry",({type:e,isNew:t,name:a})=>{}),Object(o.a)("onLogLine",({message:e})=>{})}resetLoadingProgress(){this.loadingProgress=0}}},,,,,function(e,t,a){e.exports={root:"Input_root__1EIMu",input:"Input_input__VKOur",loader:"Input_loader__2Ch6K",description:"Input_description__3DIGW"}},function(e,t,a){"use strict";function n(e,t){return`${t}(${e})`}a.d(t,"a",(function(){return n}))},function(e,t,a){e.exports={root:"ResourceCreator_root__qMBUB","name-input":"ResourceCreator_name-input__35xbb",label:"ResourceCreator_label__Lg1uq",templates:"ResourceCreator_templates__1GBKC",explorer:"ResourceCreator_explorer__3pban"}},,function(e,t,a){e.exports={root:"Checkbox_root__1oPRz",indicator:"Checkbox_indicator__1a4Kc","with-label":"Checkbox_with-label__1uYu-",disabled:"Checkbox_disabled__3Hlie"}},function(e,t,a){e.exports={root:"ProjectCreator_root__3Wva2","name-input":"ProjectCreator_name-input__1ipba",input:"ProjectCreator_input__1sJSl",checkbox:"ProjectCreator_checkbox__3zXHt","explorer-hint":"ProjectCreator_explorer-hint__1bcmn"}},function(e,t,a){e.exports={root:"ProjectOpener_root__3KiSI",label:"ProjectOpener_label__37-3q",recents:"ProjectOpener_recents__3I0RU"}},function(e,t,a){e.exports={root:"TheiaPersonality_root__3w4Zw",active:"TheiaPersonality_active__aq079",fullwidth:"TheiaPersonality_fullwidth__31xgu",cover:"TheiaPersonality_cover__2XefH"}},function(e,t,a){e.exports={root:"AdditionsNewGroup_root__2OGsC",accepting:"AdditionsNewGroup_accepting__3ybFT",ungroup:"AdditionsNewGroup_ungroup__3QNnZ",dropping:"AdditionsNewGroup_dropping__uP5ih"}},function(e,t,a){e.exports={root:"ActiveSelectionTool_root__1BEgy",appearance:"ActiveSelectionTool_appearance__23lw6",icon:"ActiveSelectionTool_icon__2_KG1",label:"ActiveSelectionTool_label__3L1jZ",clear:"ActiveSelectionTool_clear__iF6iP","panel-wrapper":"ActiveSelectionTool_panel-wrapper__3mXKT",panel:"ActiveSelectionTool_panel__3KUYQ"}},function(e,t,a){e.exports={root:"SettingsTool_root__27UhX",block:"SettingsTool_block__3R7-7",label:"SettingsTool_label__2IOmu",control:"SettingsTool_control__2zyju"}},,,,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o}));const n={state:"updater:state"},o={state:"features:state"}},,,,,,,,function(e,t,a){e.exports={root:"ResourceCommandsOutputModal_root__2Hpn4",select:"ResourceCommandsOutputModal_select__2id2r",output:"ResourceCommandsOutputModal_output__MrDPz"}},function(e,t,a){e.exports={root:"PathSelector_root__3JlHU",button:"PathSelector_button__lXt-5",input:"PathSelector_input__2h1wS"}},function(e,t,a){e.exports={root:"StatusCenter_root__1jRRu",placeholder:"StatusCenter_placeholder__3diCq"}},function(e,t,a){e.exports={root:"FlashingMessage_root__2zpk6",message:"FlashingMessage_message__3jt7-",active:"FlashingMessage_active__2jjxx"}},,,,,,,,,,,,,,,,function(e,t,a){e.exports={root:"DirectoryRenamer_root__2BUz8","name-input":"DirectoryRenamer_name-input__1ScQH"}},function(e,t,a){e.exports={root:"FileRenamer_root__2dif8","name-input":"FileRenamer_name-input__YWYeN"}},function(e,t,a){e.exports={root:"FXWorldRenamer_root__3axcl","name-input":"FXWorldRenamer_name-input__Tm9C7"}},function(e,t,a){e.exports={root:"ResourceRenamer_root__-_VZY","name-input":"ResourceRenamer_name-input__3LlU6"}},function(e,t,a){e.exports={root:"Select_root__2BKnW"}},function(e,t,a){e.exports={running:"Resource_running__mlmNP",conflicting:"Resource_conflicting__Al-nI"}},,function(e,t,a){e.exports={root:"NumberInput_root__1ZE4R",label:"NumberInput_label__q4ffc"}},function(e,t,a){e.exports={root:"PlayExitMessage_root__1BEF_",message:"PlayExitMessage_message__2S8YZ",disappear:"PlayExitMessage_disappear__2wzeK"}},function(e,t,a){e.exports={root:"WorldEditorPersonality_root__2Rg0L","game-view":"WorldEditorPersonality_game-view__2WpUV"}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={root:"Indicator_root__35Wb-",indicator:"Indicator_indicator__2nHX7"}},,function(e,t,a){e.exports={root:"FXWorldCreator_root__1XGj-"}},,,,,function(e,t,a){e.exports={root:"Keystroke_root__PQER7"}},,,function(e,t,a){e.exports={root:"ScrollContainer_root__3TmzW"}},function(e,t,a){e.exports={root:"Output_root__17Mqc"}},,,function(e,t,a){e.exports={root:"Project_root__1-1XB"}},,function(e,t,a){e.exports={root:"Shell_root__1__UQ"}},function(e,t,a){e.exports={root:"GameView_root__1M2IG"}},,,,function(e,t,a){e.exports={additions:"AdditionsGroupDeleter_additions__1flP9"}},,,,,,,,,,,function(e,t,a){a(226),e.exports=a(346)},,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(7);t.default={id:"empty",icon:n.createElement("div",{style:{padding:"4px"}},n.createElement(o.q,{style:{width:"100%",height:"100%"}})),title:"No template",description:"Empty resource"}},function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(43);t.default={id:"lua",icon:n.createElement(o.d,null),title:"Lua",description:"Easy start Lua resource template"}},function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(43);t.default={id:"js",icon:n.createElement(o.b,null),title:"JavaScript",description:"Easy start JS resource template"}},function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(43),r=a(11),l=a(27);t.default={id:"csharp",icon:n.createElement(o.a,null),title:"C#",description:"Easy start C# resource template",useIsEnabled:()=>l.a.getFeature(r.b.dotnetAvailable),disabledDescription:".NET is not installed on your system, please install it and restart FxDK to get this template available"}},function(e,t,a){e.exports=a.p+"static/js/0.chunk.worker.js"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);a(227),a(228),a(229),a(230),a(231),a(232);var n=a(1),o=a.n(n),r=a(56),l=a.n(r),i=a(358),s=a(26),c=a(219),d=a(4),m=a(11),u=a(5),p=a.n(u),h=a(7),E=a(35),g=a(65);const b=o.a.createElement(h.T,null),f=o.a.createElement(h.f,null),_=o.a.createElement(h.h,null),C=o.a.createElement(g.b,null),v=o.a.createElement(h.G,null),y=o.a.createElement(h.H,null),O=o.a.createElement(h.q,null),N=O,T=o.a.createElement(h.r,null),A=o.a.createElement(h.G,null),S=(o.a.createElement(h.P,null),o.a.createElement(h.y,null)),k=o.a.createElement(h.B,null),R=o.a.createElement(h.C,null),j=o.a.createElement(h.z,null),x=o.a.createElement(h.O,null),w=o.a.createElement(h.D,null),P=o.a.createElement(h.g,null),I=o.a.createElement(h.U,null),D=o.a.createElement(h.L,null),L=o.a.createElement(E.a,null),M=h.e,F=o.a.createElement(M,null),G=(o.a.createElement(M,{className:"rotating"}),o.a.createElement(h.S,null)),U=o.a.createElement(h.N,null),H=o.a.createElement(h.V,null),B=o.a.createElement(h.K,null),W=o.a.createElement(E.e,null),Y=o.a.createElement(h.n,null),K=o.a.createElement(h.Q,null);var V=a(80),z=a.n(V);const X=()=>{},J=o.a.memo((function(e){const{text:t=null,icon:a=null,title:n="",className:r="",theme:l="default",disabled:i=!1,onClick:s=X,autofocus:c=!1,tabIndex:d}=e,m=p()(z.a.root,z.a[l],r,{[z.a.disabled]:i,[z.a.icon]:!!a,[z.a.text]:!!t,[z.a.autofocus]:c||"undefined"!==typeof d});return o.a.createElement("button",{className:m,onClick:s,autoFocus:c,tabIndex:d,title:n},a,!!a&&"\xa0",t)}));var q=a(114),Z=a.n(q),$=a(193),Q=a.n($);const ee={animationDelay:"0ms"},te={animationDelay:"50ms"},ae={animationDelay:"100ms"},ne={animationDelay:"150ms"},oe=n.memo((function({className:e}){return n.createElement("div",{className:p()(Q.a.root,e)},n.createElement("div",{style:ee}),n.createElement("div",{style:te}),n.createElement("div",{style:ae}),n.createElement("div",{style:ne}))})),re=o.a.memo((function(e){const{label:t,value:a,onChange:n,onSubmit:r,onKeyDown:l=(()=>!1),pattern:i,tabIndex:s,showLoader:c=!1,noSpellCheck:d=!1,autofocus:m=!1,disabled:u=!1,className:h="",placeholder:E="",inputClassName:g="",description:b="",type:f="text",combi:_,min:C,max:v}=e,y=o.a.useCallback(e=>{const{value:t}=e.target;if(i&&t)i.test(t)&&n(t);else if("range"===f){if(/^[0-9]*$/.test(t)){const e=0|t;(""===t||e>=parseInt(C||"0",10)&&e<=parseInt(v||"0",10))&&n(t)}}else n(t)},[n,i]),O=o.a.useCallback(e=>{l(e)||"Enter"===e.key&&r&&r()},[r,l]),N=c?o.a.createElement("div",{className:Z.a.loader},o.a.createElement(oe,null)):null,T=_||"range"!==f?null:o.a.createElement("span",null,a),A=_&&"range"===f?o.a.createElement("input",{type:"text",className:g,value:a,disabled:u,onChange:y,onKeyDown:O,spellCheck:!1}):null,S=o.a.createElement("div",{className:Z.a.input},o.a.createElement("input",{type:f,tabIndex:s,autoFocus:m,className:g,value:a,placeholder:E,disabled:u,onChange:y,onKeyDown:O,spellCheck:!d,min:C,max:v}),T,A,N),k=b?o.a.createElement("div",{className:Z.a.description},b):null,R=t?o.a.createElement("label",null,t,S):S;return o.a.createElement("div",{className:p()(Z.a.root,h)},R,k)}));var le=a(3);const ie=[{id:"2021-09-01",title:"September 01, 2021",content:n.createElement(n.Fragment,null,n.createElement("h3",null,"How did all these project explorer bugs went unseen",n.createElement("img",{src:"https://openmoji.org/data/color/svg/1F972.svg",width:32,height:32,style:{verticalAlign:"middle"}})),n.createElement("ul",null,n.createElement("li",null,"You ",n.createElement("em",null,"should")," be able to drag'n'drop anything into anything now"),n.createElement("li",null,'That "next big thing", which is pretty much an open secret, is like 99.9% ready!')))},{id:"2021-07-20",title:"July 20, 2021",content:n.createElement(n.Fragment,null,n.createElement("h3",null,"We're almost ready for the next big thing in FxDK, stay tuned"),n.createElement("ul",null,n.createElement("li",null,"Better indication of resource (and something else) status")))},{id:"2021-05-14",title:"May 14, 2021",content:n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null,"\u26a0\ufe0f If you were using ",n.createElement("kbd",null,".fxdkignore")," files in your project they were treated wrong as it was ",n.createElement("kbd",null,".fxdkinclude"),", this has been fixed.",n.createElement("br",null),"These files actually must contain list of rules for files to actually ignore during build."),n.createElement("li",null,"\u26a0\ufe0f In-project ",n.createElement("kbd",null,"system-resources")," has been ",n.createElement("strong",null,"deprecated"),", we'll do our best to upgrade your project when it opens.",n.createElement("br",null),"Though, if you did modify that folder we will not remove it, but only rename, ",n.createElement("em",null,"shame on you"),"!"),n.createElement("li",null,"System resources needed for project can now be tweaked in ",n.createElement("strong",null,"Project Settings")),n.createElement("li",null,"You can now import some example resources from cfx-server-data")))},{id:"2021-05-08",title:"May 8, 2021",content:n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null,"Removed client resource monitor theia widget \ud83d\ude2d"),n.createElement("li",null,"Added combined (both client and server) resource monitor theia widget \ud83c\udf89",n.createElement("br",null),"Do note that server data will only be available if using latest server artifact \u26a0\ufe0f")))},{id:"2021-05-04",title:"May 4, 2021",content:n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null,"Added client resource monitor theia widget \ud83c\udf89",n.createElement("br",null),"This is pretty basic for now, but it's a solid base for a tighter integration")))},{id:"2021-03-24",title:"March 24, 2021",content:n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null,"Fixed game connecting to server too early, hopefully"),n.createElement("li",null,"Fixed project explorer not showing correct fs tree when importing stuff add over 9000 of files in a blink")))},{id:"2021-03-23",title:"March 23, 2021",content:n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null,"Fix most cases of EPERM while deleting/renaming folders, but not all of them:",n.createElement("ul",null,n.createElement("li",null,"tsserver of typescript-language-features ext of theia is still using node's broken file watcher so it will still EPERM if deleting/renaming folder containing tsconfig.json, rip"),n.createElement("li",null,"omnisharp of csharp-language-features ext of theia will also block deleting/renaming of folder with cs resource, rip")))))},{id:"2021-03-17",title:"March 17, 2021",content:n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null,"Fixed theia's terminal not working"),n.createElement("li",null,"Added directory rename (how did I forget about that \ud83e\uddd0)"),n.createElement("li",null,"Hopefully fixed rare deadlocks during opening/creating project")))},{id:"2021-03-16",title:"March 16, 2021",content:n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null,"Fixed some system resources not actually be enabled right after project creation"),n.createElement("li",null,"Added default project build path: for project ",n.createElement("kbd",null,"C")," in ",n.createElement("kbd",null,"/a/b/c")," default build path will be ",n.createElement("kbd",null,"/a/b/c-build")),n.createElement("li",null,"Added ability to resize FxDK's toolbar")))},{id:"2021-03-13",title:"March 13, 2021",content:n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null,"Issue with different game builds not connecting to server has been fixed")))},{id:"2021-03-12",title:"March 12, 2021",content:n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null,n.createElement("strong",null,"Ditched embedded filesystem viewer (as seen in project creator) in favor of system's folder select dialog"),n.createElement("br",null),"This is due to a big amount of unforeseen edge-cases that sometimes cause viewer to be completely broken.")))},{id:"initial",title:"FxDK Pre-release \ud83c\udf89",content:n.createElement(n.Fragment,null,n.createElement("p",null,n.createElement("strong",null,"23 february 2021")),n.createElement("ul",null,n.createElement("li",null,"FxDK now supports recycling deleted items, woo"),n.createElement("li",null,"Resource rename leading to shell crash got fixed, oops")),n.createElement("p",null,n.createElement("strong",null,"17 february 2021")),n.createElement("ul",null,n.createElement("li",null,'Project builder just got better, it is now capable of building "complete" server')),n.createElement("p",null,n.createElement("strong",null,"12 february 2021")),n.createElement("ul",null,n.createElement("li",null,"Right-click to copy selection while in client/server console")),n.createElement("p",null,n.createElement("strong",null,"10 february 2021")),n.createElement("ul",null,n.createElement("li",null,"You can now drag'n'drop files or folders from desktop to folders/resources in fxdk"),n.createElement("li",null,"Server is running with ",n.createElement("kbd",null,"sv_fxdkMode=1")," convar now, so you can use different logic for fetching players tokens/identifiers while in fxdk environment.",n.createElement("br",null),"Test it like so: ",n.createElement("kbd",null,"const isFxdk = GetConvarInt('sv_fxdkMode', 0) == 1"),".")),n.createElement("p",null,n.createElement("strong",null,"8 february 2021")),n.createElement("ul",null,n.createElement("li",null,"Basic project builder"),n.createElement("li",null,"Theia updated from 1.9.0 to 1.10.0"),n.createElement("li",null,'Game menu of theia is now "FxDK" with two more options')),n.createElement("p",null,n.createElement("strong",null,"3 february 2021")),n.createElement("ul",null,n.createElement("li",null,'"Open in Explorer" context menu item available in ProjectExplorer now')),n.createElement("p",null,n.createElement("strong",null,"1 february 2021")),n.createElement("ul",null,n.createElement("li",null,"Welcome client console as well",n.createElement("br",null),"(Game -> Toggle Client Console)")),n.createElement("p",null,n.createElement("strong",null,"29 january 2021")),n.createElement("ul",null,n.createElement("li",null,"Server console moved from server configuration modal to dedicated theia widget",n.createElement("br",null),"(Game -> Toggle Server Console)"),n.createElement("li",null,"Server console is now able to accept commands from you right in FxDK, woo")),n.createElement("p",null,n.createElement("strong",null,"20 january 2021")),n.createElement("ul",null,n.createElement("li",null,"If game crashes it will be restarted automatically, if it was connected to built-in server it will reconnect upon restart as well.")),n.createElement("p",null,n.createElement("strong",null,"18 january 2021")),n.createElement("ul",null,n.createElement("li",null,"Resource watch commands are now more visible"),n.createElement("li",null,"You can now see watch commands output (Right click on resource -> Watch commands output)")),n.createElement("p",null,n.createElement("strong",null,"14 january 2021")),n.createElement("ul",null,n.createElement("li",null,"Resource templates in resource creator"),n.createElement("li",null,"C# template enabled autobuild-on-change for .cs files in projects",n.createElement("br",null),"(you need .NET installed to create resource with C# template)"),n.createElement("li",null,"Specify ",n.createElement("kbd",null,"fxdk_watch_command")," in your ",n.createElement("kbd",null,"fxmanifest.lua"),",",n.createElement("br",null),"FxDK will run it if resource is enabled AND restart-on-change is on")),n.createElement("p",null,n.createElement("strong",null,"30 december 2020")),n.createElement("ul",null,n.createElement("li",null,"Full CSharp language support (w/o proper resource creation, yet)"),n.createElement("li",null,"Move theia plugins out of theia distribution package, as omnisharp extension downloads ",n.createElement("em",null,"a lot")," of files afterwards")),n.createElement("p",null,n.createElement("strong",null,"22 december 2020")),n.createElement("ul",null,n.createElement("li",null,"FxDK-flavored ayu theme by default"),n.createElement("li",null,"Check if 30120 port is available for built-in fxserver upon start")),n.createElement("p",null,n.createElement("strong",null,"21 december 2020")),n.createElement("ul",null,n.createElement("li",null,"Show toolbar immediately after project open/create process begins"),n.createElement("li",null,"Copy-paste functionality for folders and files")),n.createElement("p",null,n.createElement("strong",null,"18 december 2020")),n.createElement("ul",null,n.createElement("li",null,"Compact FxDK toolbar design, allowing more space for project explorer"),n.createElement("li",null,"Granular-ish resources state propagation to shell-client"),n.createElement("li",null,"Some tasks are now reporting their state including server installer bits")),n.createElement("p",null,n.createElement("strong",null,"16 december 2020")),n.createElement("ul",null,n.createElement("li",null,"Welcome changelog"),n.createElement("li",null,"Improved preparing screen"),n.createElement("li",null,"Lots of internal work as well")))}],se=()=>ie[0],ce=()=>{var e;e=se().id,localStorage["last-changelog-id"]=e},de=()=>localStorage["last-changelog-id"]!==se().id;var me,ue=a(8),pe=a(6);!function(e){e[e.THEIA=0]="THEIA",e[e.WORLD_EDITOR=1]="WORLD_EDITOR"}(me||(me={}));const he=new class{constructor(){this.personality=me.THEIA,this.appState=m.a.booting,this.setAppState=e=>this.appState=e,this.updaterOpen=de(),this.openUpdater=()=>this.updaterOpen=!0,this.closeUpdater=()=>this.updaterOpen=!1,this.changelogOpen=!1,this.openChangelog=()=>this.changelogOpen=!0,this.closeChangelog=()=>this.changelogOpen=!1,this.coverIframes=0,Object(ue.d)(this),Object(pe.a)(le.i.state,this.setAppState)}ack(){Object(pe.c)(le.i.ackState)}setPersonality(e){this.personality=e}get isTheia(){return this.personality===me.THEIA}get isWorldEditor(){return this.personality===me.WORLD_EDITOR}get isReady(){return this.appState===m.a.ready}get isIframeCovered(){return this.coverIframes>0}enableIframeCover(){this.coverIframes++}disableIframeCover(){this.coverIframes--}};var Ee=a(42),ge=a(13);const be=(e,t,a=[])=>{o.a.useEffect(()=>Object(pe.a)(e,t),a)},fe=(e=!1)=>{const[t,a]=o.a.useState(e),n=o.a.useCallback(()=>{a(!0)},[]),r=o.a.useCallback(()=>{a(!1)},[]),l=o.a.useCallback(()=>{a(!t)},[t]);return[t,n,r,l]},_e=(e,t,a=[])=>{const n=o.a.useRef(e),r=o.a.useRef();n.current=e;return o.a.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]),o.a.useCallback((...e)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{r.current=void 0,n.current(...e)},t)},[])},Ce=(e,t)=>{const{startPath:a,dialogTitle:n,notOnlyFolders:r=!1}=e,l=o.a.useRef(t);return l.current=t,o.a.useEffect(()=>()=>{l.current=null},[]),o.a.useCallback(()=>{r?fxdkOpenSelectFileDialog(a,n,e=>{var t;return null===(t=l.current)||void 0===t?void 0:t.call(l,e)}):fxdkOpenSelectFolderDialog(a,n,e=>{var t;return null===(t=l.current)||void 0===t?void 0:t.call(l,e)})},[a,n,r])},ve=(e,t)=>{const a=o.a.useRef(null),n=o.a.useRef(t);return n.current=t,o.a.useEffect(()=>()=>{var e;null===(e=a.current)||void 0===e||e.call(a),n.current=null},[]),o.a.useCallback(async t=>{a.current||(a.current=Object(pe.d)(e,t,(e,t)=>{a.current=null;const o=n.current;o&&(e?o(e):o(null,t))}))},[e])},ye=(...e)=>t=>e.every(e=>e(t)),Oe=e=>!e.isFile,Ne=e=>!e.meta.assetMeta,Te=e=>!e.name.startsWith("."),Ae=()=>!0,Se=(e,t)=>t.replace(e,"").replace("\\","").replace("/",""),ke=(e,t=!1)=>t?Object(pe.c)(le.b.readDirRecursive,e):Object(pe.c)(le.b.readDir,e);var Re=a(49),je=a.n(Re);const xe=()=>!0,we=()=>{},Pe=n.memo((function e(t){const{childs:a,childsCache:o,dir:r,selectedPath:l,onSelectPath:i=we,loadDir:s,selectableFilter:c=xe,visibilityFilter:d=Ae}=t,[m,u]=n.useState(t.open||(l||"").startsWith(r.path)),h=n.useCallback(()=>{u(!m),a||s(r.path)},[r,m,a,s]),E=n.useCallback(()=>{c(r)&&i(r.path,r)},[r,i,c]);if(r.isFile&&t.hideFiles)return null;if(!d(r))return null;const g=a?a.map(a=>n.createElement(e,{key:a.path,...t,open:!1,dir:a,childs:o[a.path]})):null,b=p()(je.a.name,{[je.a.selected]:l===r.path}),f=((e,t)=>e.meta.isFxdkProject?A:e.meta.isResource?O:e.isDirectory?t?k:R:S)(r,m);return n.createElement("div",{className:je.a.dir},n.createElement("div",{className:b,onClick:E,onDoubleClick:h},f," ",t.dir.name),g&&m&&n.createElement("div",{className:je.a.children},g))})),Ie=o.a.memo((function(e){const{baseEntry:t,loadAllRecursively:a=!1,pathsMap:n={}}=e,r=o.a.useRef(n),[l,i]=o.a.useState({}),[s,c]=o.a.useState();o.a.useEffect(()=>{n||ke(t.path,a)},[a,t,n]),be(le.b.root,e=>{c(e)}),be(le.b.dirRecursive,e=>{r.current=e,i({})}),be(le.b.dir,({dir:e,children:t})=>{r.current[e]=t,i({})});const d=o.a.useCallback(e=>{i({}),ke(e)},[]),m=p()(je.a.root,e.className||"",{[je.a.loading]:!s});return o.a.createElement("div",{className:m},o.a.createElement(Pe,{...e,childs:r.current[t.path],childsCache:r.current,open:!0,dir:t,loadDir:d,updateBeacon:l}))}));o.a.memo((function(e){const t=o.a.useRef({}),[a,n]=o.a.useState({}),[r,l]=o.a.useState([]),[i,s]=o.a.useState(!1);o.a.useEffect(()=>{Object(pe.c)(le.b.readRoots)},[]),be(le.b.roots,e=>{e.forEach(e=>{t.current[e.path]=e.children||[]}),s(!0),l(e)}),be(le.b.dir,({dir:e,children:a})=>{t.current[e]=a,n({})});const c=o.a.useCallback(e=>{n({}),ke(e)},[]),d=r.map((n,r)=>o.a.createElement(Pe,{key:n.path,...e,childs:t.current[n.path],childsCache:t.current,open:0===r,dir:n,loadDir:c,updateBeacon:a})),m=p()(je.a.root,e.className||"",{[je.a.loading]:!i});return o.a.createElement("div",{className:m},d)}));function De(e){const t=document.getElementById(e);if(!t)throw new Error("No such dom node with id: "+e);return({children:e})=>l.a.createPortal(e,t)}var Le=a(95),Me=a.n(Le);const Fe=De("modal-outlet"),Ge=()=>{},Ue=o.a.memo((function(e){const{children:t,onClose:a=Ge,fullWidth:n=!1,fullHeight:r=!1}=e;o.a.useEffect(()=>{const e=e=>{"Escape"===e.key&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a]);const l=p()(Me.a.root,{[Me.a["full-width"]]:n,[Me.a["full-height"]]:r});return o.a.createElement(Fe,null,o.a.createElement("div",{className:l},o.a.createElement("div",{className:Me.a.backdrop,onClick:a}),o.a.createElement("div",{className:Me.a.content},t)))})),He=/^[a-zA-Z0-9_-]+$/,Be=/^[a-zA-Z0-9_-]+$/,We=/^([a-zA-Z0-9_-]|\[|\])+$/,Ye=/^([a-zA-Z0-9_-]|\.|\[|\])+$/;var Ke=a(73),Ve=a.n(Ke);const ze=n.memo((function(e){const t=!e.descriptor.useIsEnabled||e.descriptor.useIsEnabled(),a=p()(Ve.a.root,{[Ve.a.checked]:e.checked,[Ve.a.disabled]:!t}),o="string"===typeof e.descriptor.icon?n.createElement("img",{src:e.descriptor.icon,alt:e.descriptor.title}):e.descriptor.icon,r=!t&&e.descriptor.disabledDescription?e.descriptor.disabledDescription:e.descriptor.description;return n.createElement("div",{className:a,onClick:e.onClick},n.createElement("div",{className:Ve.a.icon},o),n.createElement("div",{className:Ve.a.content},n.createElement("div",{className:Ve.a.title},e.descriptor.title),!!r&&n.createElement("div",{className:Ve.a.description},r)))})),Xe=[a(248).default,a(249).default,a(250).default,a(251).default],Je="resource",qe="fxworld",Ze="git",$e="release",Qe="fs",et="example";class tt{constructor(){this.container=[]}add(...e){this.container.push(...e)}async dispose(){await Promise.all(this.container.map(e=>{var t;return"function"===typeof e?e():null===(t=e.dispose)||void 0===t?void 0:t.call(e)}))}empty(){return 0===this.container.length}}var at;function nt(e,t){return`${(null===e||void 0===e?void 0:e.path)||"__noproject"}:${t}`}function ot(e,t,a){const n=nt(e,t);return window.localStorage[n]?JSON.parse(window.localStorage[n]):a}function rt(e,t,a){const o=Object(n.useMemo)(()=>ot(e,t,a),[null===e||void 0===e?void 0:e.path,t]),[r,l]=Object(n.useState)(o),i=Object(n.useMemo)(()=>nt(e,t),[null===e||void 0===e?void 0:e.path,t]);return[r,Object(n.useCallback)(e=>{window.localStorage[i]=JSON.stringify(e),l(e)},[l,i])]}!function(e){let t;!function(e){e[e.Ok=0]="Ok",e[e.FailedToRecycle=1]="FailedToRecycle"}(t=e.DeleteEntryResponse||(e.DeleteEntryResponse={}))}(at||(at={}));const lt=e=>rt(e,"buildPath",function(e){const{path:t}=e||{};return Object(n.useMemo)(()=>{if(!t)return"";const[e,...a]=t.split(/[\\/]/).reverse();return a.reverse().join("\\")+"\\"+e+"-build"},[t])}(e)),it=e=>rt(e,"useVersioning",!0),st=e=>rt(e,"deployArtifact",!0),ct=e=>rt(e,"steamWebApiKey",""),dt=e=>ot(e,"tebexSecret",""),mt=e=>rt(e,"tebexSecret","");var ut=a(14),pt=a(48);const ht=o.a.createRef(),Et=new class{constructor(){this.isReady=!1,this.setIsReady=e=>{this.isReady=e,e&&(this.setIsActive(he.personality===me.THEIA),this.setGameState(ut.a.state))},Object(ue.d)(this),Object(pe.a)(le.h.bufferedOutput,e=>{this.sendMessage({type:"fxdk:serverOutput",data:e})}),Object(pe.a)(le.h.structuredOutputMessage,e=>{this.sendMessage({type:"fxdk:serverOutputStructured",data:e})}),Object(pe.a)(le.h.clearOutput,()=>{this.sendMessage({type:"fxdk:clearServerOutput"})}),Object(pe.a)(le.h.resourceDatas,e=>{this.sendMessage({type:"fxdk:serverResourcesData",data:e})}),Object(ge.b)("theia:ready",()=>this.setIsReady(!0)),Object(ge.b)("theia:notReady",()=>this.setIsReady(!1)),Object(ge.b)("game:consoleMessage",e=>{e.message.trim()&&this.sendMessage({type:"fxdk:gameStructuredMessage",data:e})}),Object(ue.g)(()=>ut.a.launched,e=>{e||this.sendMessage({type:"fxdk:clearGameOutput"})}),Object(ue.g)(()=>he.personality,e=>{this.isReady&&this.setIsActive(e===me.THEIA)}),Object(ue.g)(()=>ut.a.state,e=>{this.setGameState(e),e===pt.a.LOADING&&this.openGameView()}),Object(ge.c)(e=>this.sendMessage(e))}get ref(){return ht}get container(){return ht.current}openProject(e){this.sendMessage({type:"fxdk:setProject",data:e})}openFile(e){this.sendMessage({type:"fxdk:openFile",data:e})}openGameView(){this.sendMessage({type:"fxdk:openGameView"})}forceReload(){this.sendMessage({type:"fxdk:forceReload"})}setIsActive(e){this.sendMessage({type:"fxdk:setIsActive",data:e})}setGameState(e){this.sendMessage({type:"fxdk:setGameState",data:e})}sendMessage(e){var t;const{container:a}=this;a&&(null===(t=a.contentWindow)||void 0===t||t.postMessage(e,"*"))}};class gt{constructor(e=!1){this.state=e,this.open=()=>{this.state=!0},this.close=()=>{this.state=!1},this.toggle=()=>{this.state=!this.state},Object(ue.d)(this)}get isOpen(){return this.state}}const bt=new class{constructor(){this.state=null,this.request=null,this.confirm=()=>{this.request&&(this.request.onConfirm(this.state),this.request=null,this.state=null)},this.setState=e=>{this.state=e},this.close=()=>{this.state=null,this.request=null},Object(ue.d)(this)}requestConfirm(e){this.request=e}};class ft{constructor(e,t){this.pathsState=t,this.assetTypes={},this.setPathState=(e,t)=>{this.pathsState[e]=t,Object(pe.c)(le.g.setPathsStatePatch,{[e]:t})},this.deleteEntryConfirmFirst=(e,t,a)=>{bt.requestConfirm({title:t,buttonIcon:I,buttonText:"Delete",onConfirm:()=>this.deleteEntry(e),children:a})},this.deleteEntry=e=>{Object(pe.d)(le.g.deleteEntry,{entryPath:e},(t,a)=>{t||a===at.DeleteEntryResponse.FailedToRecycle&&bt.requestConfirm({title:"Failed to recycle, delete permanently?",buttonIcon:I,buttonText:"Delete permanently",onConfirm(){const t={entryPath:e,hardDelete:!0};Object(pe.d)(le.g.deleteEntry,t,e=>{e&&console.error(e)})}})})},this.update=e=>{e.fs&&(this.fs=e.fs),e.manifest&&(this.manifest=e.manifest)},this.updateFs=e=>{e.replace&&Object.entries(e.replace).forEach(([e,t])=>{this.fs[e]=t}),e.delete&&e.delete.forEach(e=>{delete this.fs[e]})},this.handleAssetUpdates=e=>{for(const[t,{type:a,def:n}]of Object.entries(e))this.assetTypes[t]=a,this.assetDefs[t]=n},this.setAssetConfig=([e,t])=>{this.assets[e]=t},this.updatePathsState=e=>{this.pathsState=e},this.fs=e.fs,this.path=e.path,this.assets=e.assets,this.manifest=e.manifest,this.assetTypes=e.assetTypes,this.assetDefs=e.assetDefs,Object(ue.d)(this),this.disposableContainer=new tt,this.disposableContainer.add(Object(pe.a)(le.g.update,this.update),Object(pe.a)(le.g.fsUpdate,this.updateFs),Object(pe.a)(le.g.pathsStateUpdate,this.updatePathsState),Object(pe.a)(le.a.setConfig,this.setAssetConfig),Object(pe.a)(le.a.updates,this.handleAssetUpdates))}get entry(){return{path:this.path,name:this.path.substr(Math.max(Math.max(this.path.lastIndexOf("/"),this.path.lastIndexOf("\\"))+1,0)),isDirectory:!0,isFile:!1,isSymbolicLink:!1,meta:{isFxdkProject:!0,isResource:!1,assetMeta:null}}}dispose(){this.disposableContainer.dispose()}getAssetConfig(e,t){return{...t,...this.assets[e]}}toggleSystemResource(e){const t=this.manifest.systemResources.indexOf(e);-1!==t?this.manifest.systemResources.splice(t,1):this.manifest.systemResources.push(e),Object(pe.c)(le.g.setSystemResources,this.manifest.systemResources)}}const _t=new class{constructor(){this.creatorUI=new gt,this.openerUI=new gt,this.settingsUI=new gt,this.builderUI=new gt,this.importerUI=new gt,this.directoryCreatorUI=new gt,this.mapCreatorUI=new gt,this.resourceCreatorDir="",this.resourceCreatorUI=new gt,this.recentProjects=[],this.pendingFolderDeletions=new Set,this.projectAlreadyOpening=!1,this.projectObject=null,this.setRecentProjects=e=>{this.recentProjects=e;const t=localStorage.getItem("last-project-path");if(!this.hasProject){const[a]=e;a&&a.path===t&&this.openProject(a.path)}},this.openResourceCreator=e=>{e&&(this.resourceCreatorDir=e),this.resourceCreatorUI.open()},this.setOpenProject=({project:e,pathsState:t})=>{this.closeProject(),this.resourceCreatorDir=e.path,this.projectAlreadyOpening=!1,this.projectObject=new ft(e,t),localStorage.setItem("last-project-path",this.project.path)},this.closeProject=()=>{this.projectObject&&(this.projectObject.dispose(),this.projectObject=null)},this.buildProject=e=>{const t=this.projectObject;if(!t)return;const a=(e=>ot(e,"buildPath",""))(t),n=(e=>ot(e,"useVersioning",!0))(t),o=(e=>ot(e,"deployArtifact",!0))(t),r=(e=>ot(e,"steamWebApiKey",""))(t),l=dt(t);if(!a)return this.builderUI.open();Object(pe.c)(le.g.build,{buildPath:a,useVersioning:n,deployArtifact:o,steamWebApiKey:r,tebexSecret:l,...e})},this.freePendingFolderDeletion=e=>{this.pendingFolderDeletions.delete(e)},Object(ue.d)(this),Object(ue.g)(()=>he.isReady,e=>{e&&Object(pe.c)(le.g.getRecents)}),Object(pe.a)(le.g.recents,this.setRecentProjects),Object(pe.a)(le.g.open,this.setOpenProject),Object(pe.a)(le.g.close,this.closeProject),Object(pe.a)(le.g.freePendingFolderDeletion,this.freePendingFolderDeletion),Object(ge.b)("fxdk:buildProject",()=>{this.buildProject()})}get project(){if(null===this.projectObject)throw new Error("Project is not open");return this.projectObject}get projectName(){return this.projectObject?this.projectObject.manifest.name:"No project open"}get hasProject(){return null!==this.projectObject}openProject(e){this.projectAlreadyOpening||(this.closeProject(),this.openerUI.close(),this.projectAlreadyOpening=!0,Object(pe.c)(le.g.open,e))}openFile(e){this.hasProject&&Et.openFile(e.path)}addPendingFolderDeletion(e){this.pendingFolderDeletions.add(e)}};var Ct=a(116),vt=a.n(Ct);const yt=e=>e.isDirectory&&!e.meta.isResource,Ot=ye(Ne,Oe,Te),Nt=Object(d.a)((function(){const e=_t.project,[t,a]=o.a.useState(""),[n,r]=o.a.useState(_t.resourceCreatorDir),[l,i]=o.a.useState(Xe[0].id);o.a.useEffect(()=>{r(_t.resourceCreatorDir)},[_t.resourceCreatorDir,r]);const s=o.a.useCallback(()=>{if(t&&e){const e={assetType:Je,assetName:t,assetPath:n,data:{resourceTemplateId:l}};Object(pe.c)(le.a.create,e),_t.resourceCreatorUI.close()}},[t,e,n,l]),c=Se(e.path,n),d=n===e.path?"Location: project root":"Location: "+c;return o.a.createElement(Ue,{fullWidth:!0,onClose:_t.resourceCreatorUI.close},o.a.createElement("div",{className:vt.a.root},o.a.createElement("div",{className:"modal-header"},"Create Resource"),o.a.createElement(re,{autofocus:!0,label:"Name",placeholder:"kiwigrape-matchmaking",value:t,pattern:He,className:vt.a["name-input"],onChange:a,onSubmit:s}),o.a.createElement("div",{className:"modal-label"},"Template"),o.a.createElement("div",{className:vt.a.templates},Xe.map(e=>o.a.createElement(ze,{key:e.id,descriptor:e,onClick:()=>i(e.id),checked:l===e.id}))),o.a.createElement("div",{className:"modal-label"},d),o.a.createElement(Ie,{className:vt.a.explorer,baseEntry:e.entry,pathsMap:e.fs,selectedPath:n,onSelectPath:r,selectableFilter:yt,visibilityFilter:Ot}),o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{text:"Create",theme:"primary",onClick:s,disabled:!t}),o.a.createElement(J,{text:"Cancel",onClick:_t.resourceCreatorUI.close}))))}));var Tt=a(195),At=a.n(Tt);const St=Object(d.a)((function(){const[e,t]=o.a.useState(""),a=o.a.useCallback(()=>{if(!e)return;const t={assetName:e,assetPath:_t.project.path,assetType:qe};Object(pe.c)(le.a.create,t),_t.mapCreatorUI.close()},[e]);return o.a.createElement(Ue,{onClose:_t.mapCreatorUI.close},o.a.createElement("div",{className:At.a.root},o.a.createElement("div",{className:"modal-header"},"Map creator"),o.a.createElement("div",{className:"modal-block"},o.a.createElement(re,{autofocus:!0,label:"Map name",value:e,onChange:t,pattern:He,placeholder:"Map name",onSubmit:a})),o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{theme:"primary",text:"Create map",disabled:!e,onClick:a}),o.a.createElement(J,{text:"Cancel",onClick:_t.mapCreatorUI.close}))))}));var kt=a(46),Rt=a(81),jt=a.n(Rt);const xt=()=>{},wt=Symbol("context-menu-separator"),Pt=o.a.forwardRef((function(e,t){const{children:a,items:n,title:r="",className:i="",activeClassName:s="",onClick:c=xt,onDoubleClick:d=xt,elementProps:m=null,getCoords:u,onMouseOver:E=xt,onMouseOut:g=xt}=e,[b,f]=o.a.useState(null),[_,C]=o.a.useState(null),v=o.a.useRef(null),y=o.a.useRef(null);o.a.useLayoutEffect(()=>{C(document.getElementById("context-menu-outlet"))},[]),o.a.useLayoutEffect(()=>{if(b&&v.current){const e=v.current.getBoundingClientRect(),t=window.visualViewport.height-e.bottom;t<0&&f({top:b.top+t,left:b.left})}},[b,f,v]);const O=o.a.useCallback(e=>{let t;return e.preventDefault(),e.stopPropagation(),t=u?u(e.target):{top:e.pageY,left:e.pageX},f(t),!1},[u]),N=o.a.useCallback(e=>{y.current===e.target&&f(null)},[]),T=o.a.useCallback(e=>{b||c(()=>O(e))},[c,b,O]);let A=null;if(b&&_){const e=n.map((e,t)=>{if(e===wt)return o.a.createElement("div",{key:t,className:jt.a.separator});{const t=()=>{e.onClick(),f(null)};return o.a.createElement("div",{key:e.id,className:p()(jt.a.item,{[jt.a.disabled]:e.disabled}),onMouseUp:t},e.icon||o.a.createElement(h.a,{className:jt.a.dummy}),e.text)}});A=l.a.createPortal(o.a.createElement("div",{ref:y,className:jt.a.backdrop,onMouseDown:N},o.a.createElement("div",{ref:v,className:jt.a.menu,style:{top:b.top+"px",left:b.left+"px"}},e)),_)}return o.a.createElement("div",{...m,ref:t,title:r,className:p()(i,{[s]:!!b}),onContextMenu:O,onClick:T,onDoubleClick:d,onMouseOver:E,onMouseOut:g},a,A)})),It={disableDirectoryCreate:!1,disableDirectoryDelete:!1,disableDirectoryRename:!1,disableFileOpen:!1,disableFileCreate:!1,disableFileDelete:!1,disableFileRename:!1,disableEntryMove:!1,disableAssetCreate:!1,disableAssetRename:!1,disableAssetDelete:!1,visibilityFilter:ye(e=>!e.name.endsWith(".fxmeta"))},Dt=o.a.createContext(It),Lt=o.a.memo((function({options:e,children:t}){const a={...o.a.useContext(Dt),...e};return o.a.createElement(Dt.Provider,{value:a},t)}));var Mt=a(359),Ft=a(360);const Gt=o.a.memo((function({onCreate:e,className:t}){const[a,n]=o.a.useState(""),r=o.a.useCallback(e=>{const{value:t}=e.target;!We.test(t)&&t||n(t)},[n]),l=o.a.useCallback(()=>{e(a)},[a,e]),i=o.a.useCallback(t=>"Enter"===t.key?(t.stopPropagation(),e(a)):"Escape"===t.key?(t.stopPropagation(),e("")):void 0,[a,e]);return o.a.createElement("div",{className:t},w,o.a.createElement("input",{autoFocus:!0,type:"text",value:a,placeholder:"Directory name",onChange:r,onBlur:l,onKeyDown:i}))})),Ut=o.a.memo((function({onCreate:e,className:t}){const[a,n]=o.a.useState(""),r=o.a.useCallback(e=>{const{value:t}=e.target;!Ye.test(t)&&t||n(t)},[n]),l=o.a.useCallback(()=>{e(a)},[a,e]),i=o.a.useCallback(t=>"Enter"===t.key?(t.stopPropagation(),e(a)):"Escape"===t.key?(t.stopPropagation(),e("")):void 0,[a,e]);return o.a.createElement("div",{className:t},j,o.a.createElement("input",{autoFocus:!0,type:"text",value:a,placeholder:"File name",onChange:r,onBlur:l,onKeyDown:i}))}));var Ht;!function(e){e[e.Copy=0]="Copy",e[e.Move=1]="Move"}(Ht||(Ht={}));const Bt={relocateSourceEntry:void 0,relocateOperation:void 0,setRelocationContext:()=>{},resetRelocationContext:()=>{},applyRelocation:()=>{}},Wt=n.createContext(Bt),Yt=Object(d.a)((function({children:e}){const[t,a]=n.useState(void 0),[o,r]=n.useState(void 0),l=n.useCallback((e,t)=>{a(e),r(t)},[a,r]),i=n.useCallback(()=>{a(void 0),r(void 0)},[a,r]),s=n.useCallback(e=>{if(a(void 0),r(void 0),t)switch(o){case Ht.Move:{const a={sourcePath:t.path,targetPath:e.path};return Object(pe.c)(le.g.moveEntry,a)}case Ht.Copy:{const a={sourcePath:t.path,targetPath:e.path};return Object(pe.c)(le.g.copyEntry,a)}}},[a,r,t,o]),c={relocateSourceEntry:t,relocateOperation:o,setRelocationContext:l,resetRelocationContext:i,applyRelocation:s};return n.createElement(Wt.Provider,{value:c},e)})),Kt=e=>"file:///"+e.path.replace("\\","/"),Vt=e=>{const t=e.indexOf(".fxmeta");return-1!==t&&t+".fxmeta".length===e.length};const zt=new Intl.Collator(void 0,{usage:"sort"}),Xt=(e,t)=>e.isDirectory&&!t.isDirectory?-1:!e.isDirectory&&t.isDirectory?1:zt.compare(e.name,t.name),Jt=e=>invokeNative("openFolderAndSelectFile",e),qt=(e,t=!0)=>{const a=e in _t.project.pathsState?_t.project.pathsState[e]:t,o=n.useCallback(()=>{_t.project.setPathState(e,!a)},[e,a]),r=n.useCallback(()=>{_t.project.setPathState(e,!0)},[e]),l=n.useCallback(()=>{_t.project.setPathState(e,!1)},[e]);return{expanded:a,toggleExpanded:o,forceExpanded:r,forceCollapsed:l}},Zt=(e,t={})=>{const a={...n.useContext(Dt),...t},[o,r,l]=fe(!1),i=n.useCallback(t=>{l(),t&&Object(pe.c)(le.g.createDirectory,{directoryPath:e.entry.path,directoryName:t})},[e,l]),[s,c,d]=fe(!1),m=n.useCallback(t=>{d(),t&&Object(pe.c)(le.g.createFile,{filePath:e.entry.path,fileName:t})},[e,d]);return{renderItemControls:n.useCallback((function(){return n.createElement(n.Fragment,null,o&&n.createElement(Gt,{className:e.creatorClassName,onCreate:i}),s&&n.createElement(Ut,{className:e.creatorClassName,onCreate:m}))}),[e,o,s,i,m]),renderItemChildren:n.useCallback((function(t){return((e,t,a)=>{let n=t.pathsMap[e.path]||[];return a&&(n=n.filter(e=>!Vt(e.name)&&a(e))),n.sort(Xt),n.map(e=>{return t.itemRenderer({...(a=t,{entry:a.entry,project:a.project,pathsMap:a.pathsMap,itemRenderer:a.itemRenderer,creatorClassName:a.creatorClassName,childrenCollapsed:a.childrenCollapsed}),entry:e});var a})})(e.entry,e,ye(t||a.visibilityFilter,e=>".git"!==e.name))}),[e,a.visibilityFilter]),contextMenuItems:n.useMemo(()=>[{id:"new-directory",text:"New directory",icon:w,disabled:a.disableDirectoryCreate,onClick:()=>{_t.project.setPathState(e.entry.path,!0),r()}},{id:"new-file",text:"New file",icon:j,disabled:a.disableFileCreate,onClick:()=>{_t.project.setPathState(e.entry.path,!0),c()}}],[e,c,a]),requiredContextMenuItems:n.useMemo(()=>[{id:"open-in-explorer",icon:_,text:"Open in Explorer",onClick:()=>{return e.entry.isDirectory?(t=e.entry.path,invokeNative("openUrl",t)):Jt(e.entry.path);var t}}],[e]),options:a}},$t=(e,t)=>{const a=n.useContext(Dt),[{isDragging:o},r]=Object(Mt.a)({item:{entry:e,type:t},canDrag:()=>!a.disableEntryMove,collect:e=>({isDragging:e.isDragging()})});return{isDragging:o,dragRef:r}},Qt=(e,t)=>{const a=n.useContext(Dt),[{isDropping:o},r]=Object(Ft.a)({accept:t,drop:(t,a)=>{var n;if(a.didDrop())return;const o=t;if(Array.isArray(null===o||void 0===o?void 0:o.files)){const t=e.path,a=o.files.map(e=>e.path).filter(e=>e!==t);if(a.length&&t){const e={sourcePaths:a,targetPath:t};return Object(pe.c)(le.g.copyEntries,e)}return}const r=null===(n=null===o||void 0===o?void 0:o.entry)||void 0===n?void 0:n.path,l=e.path;if(r&&l&&r!==l){const e={sourcePath:r,targetPath:l};Object(pe.c)(le.g.moveEntry,e)}},canDrop:()=>!a.disableEntryMove,collect:e=>({isDropping:e.isOver({shallow:!0})&&e.canDrop()})});return{isDropping:o,dropRef:r}},ea=(e,t,a)=>{const{isDragging:n,dragRef:o}=$t(e,t),{isDropping:r,dropRef:l}=Qt(e,a);return{isDragging:n,isDropping:r,dragRef:o,dropRef:l}},ta=e=>{const{setRelocationContext:t}=n.useContext(Wt),{disableEntryMove:a}=n.useContext(Dt);return n.useMemo(()=>[{id:"relocate-copy",text:"Copy",disabled:a,onClick:()=>t(e,Ht.Copy)},{id:"relocate-move",text:"Cut",disabled:a,onClick:()=>t(e,Ht.Move)}],[e,t,a])},aa=e=>{const{applyRelocation:t,relocateSourceEntry:a}=n.useContext(Wt),{disableEntryMove:o}=n.useContext(Dt);return n.useMemo(()=>[{id:"relocate-paste",text:a?`Paste "${a.name}"`:"Paste",disabled:o||!a,onClick:()=>t(e)}],[e,t,a,o])},na="projectExplorer:file",oa="projectExplorer:folder",ra="projectExplorer:asset";var la=a(21),ia=a.n(la);const sa={wrapper:ia.a["item-wrapper"],item:ia.a.item,itemLabelled:ia.a.labelled,itemActive:ia.a.active,itemIcon:ia.a.icon,itemTitle:ia.a.title,itemStatus:ia.a.status,itemStatusEntry:ia.a.entry,creator:ia.a.creator,children:ia.a.children,dropping:ia.a.dropping,dragging:ia.a.dragging};var ca=a(158),da=a.n(ca);const ma=n.memo((function(e){const{entry:t,onClose:a}=e,[o,r]=n.useState(t.name),l=n.useCallback(()=>{a(),Object(pe.c)(le.g.renameEntry,{entryPath:t.path,newName:o})},[t,o,a]);return n.createElement(Ue,{onClose:a},n.createElement("div",{className:da.a.root},n.createElement("div",{className:"modal-header"},'Rename "',t.name,'" directory'),n.createElement(re,{autofocus:!0,value:o,placeholder:t.name,onChange:r,pattern:Ye,className:da.a["name-input"],onSubmit:l}),n.createElement("div",{className:"modal-actions"},n.createElement(J,{theme:"primary",text:"Rename directory",onClick:l}),n.createElement(J,{text:"Cancel",onClick:a}))))})),ua=Object(d.a)((function(e){var t,a;const{entry:n,pathsMap:r}=e,{icon:l}=e,{expanded:i,toggleExpanded:s}=qt(n.path,!e.childrenCollapsed),c=r[n.path]||[],d=null===(a=null===(t=n.meta)||void 0===t?void 0:t.assetMeta)||void 0===a?void 0:a.flags,m=o.a.useMemo(()=>{if(!d)return{};const e={};return d.readOnly&&(e.disableAssetCreate=!0,e.disableAssetDelete=!0,e.disableAssetRename=!0,e.disableDirectoryCreate=!0,e.disableDirectoryDelete=!0,e.disableDirectoryRename=!0,e.disableEntryMove=!0,e.disableFileCreate=!0,e.disableFileDelete=!0,e.disableFileOpen=!0,e.disableFileRename=!0),e},[d]),{directoryContextMenuItems:u,closeDirectoryRename:E,directoryRenameOpen:g}=((e,t,a={})=>{const{disableDirectoryDelete:n,disableDirectoryRename:r,disableAssetCreate:l}={...o.a.useContext(Dt),...a},[i,s,c]=fe(!1),d=o.a.useCallback(()=>{if(t>0){const t=Se(_t.project.path||"",e.path);return _t.project.deleteEntryConfirmFirst(e.path,`Delete directory "${t}"?`,()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"modal-label"},"Directory structure:"),o.a.createElement(Ie,{baseEntry:e,pathsMap:_t.project.fs})))}return _t.project.deleteEntry(e.path)},[e,t]),m=o.a.useCallback(()=>{_t.openResourceCreator(e.path)},[e.path]);return{directoryContextMenuItems:o.a.useMemo(()=>[{id:"delete-directory",text:"Delete directory",icon:I,disabled:n,onClick:d},{id:"rename-directory",text:"Rename directory",icon:D,disabled:r,onClick:s},wt,{id:"new-resource",text:"New resource",icon:x,disabled:l,onClick:m}],[d,m,s,n,l,r]),directoryRenameOpen:i,closeDirectoryRename:c}})(n,c.length,m),{contextMenuItems:b,requiredContextMenuItems:f,renderItemControls:_,renderItemChildren:C}=Zt(e,m),v=ta(n),y=aa(n),O=o.a.useMemo(()=>[...v,...y,wt,...u,...b,wt,...f],[n,v,y,u,b,f]),N=C(),T=l||((e,t)=>e.meta.assetMeta?o.a.createElement(h.P,null):t?o.a.createElement(h.B,null):o.a.createElement(h.C,null))(n,i),{isDragging:A,isDropping:S,dragRef:k,dropRef:R}=ea(n,oa,[na,oa,ra,kt.b.FILE]),j=p()(sa.wrapper,{[sa.dropping]:S}),w=p()(sa.item,{[sa.dragging]:A});return o.a.createElement("div",{className:j,ref:R},o.a.createElement(Pt,{className:w,items:O,onClick:s,activeClassName:sa.itemActive,ref:k},o.a.createElement("div",{className:sa.itemIcon},T),o.a.createElement("div",{className:sa.itemTitle},n.name),(null===d||void 0===d?void 0:d.readOnly)&&o.a.createElement("div",{className:sa.itemStatus},o.a.createElement("div",{className:sa.itemStatusEntry},"readonly"))),i&&o.a.createElement("div",{className:sa.children},_(),o.a.createElement(Lt,{options:m},N)),g&&o.a.createElement(ma,{entry:n,onClose:E}))}));var pa=a(43);var ha=a(159),Ea=a.n(ha);const ga=n.memo((function(e){const{entry:t,onClose:a}=e,[o,r]=n.useState(t.name),l=n.useCallback(()=>{a(),Object(pe.c)(le.g.renameEntry,{entryPath:t.path,newName:o})},[t,o,a]);return n.createElement(Ue,{onClose:a},n.createElement("div",{className:Ea.a.root},n.createElement("div",{className:"modal-header"},'Rename "',t.name,'" file'),n.createElement(re,{autofocus:!0,value:o,placeholder:t.name,onChange:r,pattern:Ye,className:Ea.a["name-input"],onSubmit:l}),n.createElement("div",{className:"modal-actions"},n.createElement(J,{theme:"primary",text:"Rename file",onClick:l}),n.createElement(J,{text:"Cancel",onClick:a}))))})),ba=Object(d.a)((function(e){const{entry:t}=e,a=n.useContext(Dt),o=ta(t),[r,l,i]=fe(!1),s=n.useCallback(()=>{a.disableFileOpen||_t.openFile(t)},[t,a]),c=n.useMemo(()=>[...o,wt,{id:"delete-file",icon:I,text:"Delete file",disabled:a.disableFileDelete,onClick:()=>_t.project.deleteEntry(t.path)},{id:"rename-file",icon:D,text:"Rename file",disabled:a.disableFileRename,onClick:l},wt,{id:"open-in-explorer",icon:n.createElement(h.h,null),text:"Open in Explorer",onClick:()=>invokeNative("openFolderAndSelectFile",t.path)}],[t,a,l,o]),d=(e=>{if("__resource.lua"===e.name||"fxmanifest.lua"===e.name)return n.createElement(h.j,null);const t=e.name.lastIndexOf(".");let a="generic";switch(t&&(a=e.name.substr(t+1)),a){case"js":return n.createElement(pa.b,null);case"lua":return n.createElement(pa.d,null);case"json":return n.createElement(pa.c,null);case"ts":return n.createElement(pa.e,null);case"fxworld":return n.createElement(E.e,null);case"generic":default:return n.createElement(E.b,null)}})(t),{isDragging:m,dragRef:u}=$t(t,na),g=p()(sa.wrapper,{[sa.dragging]:m});return n.createElement("div",{className:g},n.createElement(Pt,{ref:u,items:c,className:sa.item,activeClassName:sa.itemActive,onClick:s},n.createElement("div",{className:sa.itemIcon},d),n.createElement("div",{className:sa.itemTitle},t.name)),r&&n.createElement(ga,{entry:t,onClose:i}))})),fa=!1,_a=Object.freeze({Ready:"we:ready",Map:"we:map",Accept:"we:accept",SetCam:le.l.setCam,SetCamBaseMultiplier:"we:setCamBaseMultiplier",FocusInView:"we:focusInView",ObjectPreview:"we:objectPreview",SelectAtCursor:"we:selectAtCursor",Selection:"we:selection",EnterPlaytestMode:"we:enterPlaytestMode",ExitPlaytestMode:"we:exitPlaytestMode",EnvironmentSet:"we:setEnvironment",EnvironmentAck:"we:ackEnvironment",EnvironmentRequest:"we:reqeustEnvironment",SettingsSet:"we:settings",AdditionCreate:le.l.createAddition,AdditionPlaced:le.l.additionPlaced,AdditionSet:le.l.setAddition,AdditionApplyChange:le.l.applyAdditionChange,AdditionSetOnGround:"we:setAdditionOnGround",AdditionDelete:le.l.deleteAddition,AdditionDeleteBatch:"we:deleteAdditions",PatchCreate:le.l.createPatch,PatchApplyChange:le.l.applyPatchChange,PatchDelete:le.l.deletePatch});var Ca,va,ya,Oa;!function(e){e[e.RX=0]="RX",e[e.RY=1]="RY",e[e.RZ=2]="RZ",e[e.RW=3]="RW",e[e.FX=4]="FX",e[e.FY=5]="FY",e[e.FZ=6]="FZ",e[e.FW=7]="FW",e[e.UX=8]="UX",e[e.UY=9]="UY",e[e.UZ=10]="UZ",e[e.UW=11]="UW",e[e.AX=12]="AX",e[e.AY=13]="AY",e[e.AZ=14]="AZ",e[e.AW=15]="AW"}(Ca||(Ca={})),function(e){e[e.TIME=0]="TIME",e[e.FREEZE_TIME=1]="FREEZE_TIME",e[e.PERSISTENT_WEATHER=2]="PERSISTENT_WEATHER",e[e.RANDOM_WEATHER=3]="RANDOM_WEATHER"}(va||(va={})),function(e){e[e.NONE=0]="NONE",e[e.PATCH=1]="PATCH",e[e.ADDITION=2]="ADDITION"}(ya||(ya={})),function(e){e[e.V1=1]="V1",e[e.V2=2]="V2",e[e.V3=3]="V3"}(Oa||(Oa={}));const Na=180/Math.PI,Ta=Math.PI/180;function Aa(e){let t=0,a=0,n=0;const o=e[Ca.RX],r=e[Ca.FX],l=(e[Ca.UX],e[Ca.RY]),i=e[Ca.FY],s=(e[Ca.UY],e[Ca.RZ]),c=e[Ca.FZ],d=e[Ca.UZ];return t=Math.asin(Math.max(-1,Math.min(1,c))),Math.abs(c)<.99999?(a=Math.atan2(-s,d),n=Math.atan2(-r,i)):(a=0,n=Math.atan2(l,o)),[t*Na,a*Na,n*Na]}const Sa=new ArrayBuffer(4),ka=new Float32Array(Sa),Ra=new Uint32Array(Sa);function ja(e){return[wa([e[0],e[1],e[2],e[3]]),wa([e[4],e[5],e[6],e[7]]),wa([e[8],e[9],e[10],e[11]])]}function xa(e,t,a){const n=a||ja(e),[o,r,l]=[t[0]/n[0],t[1]/n[1],t[2]/n[2]];e[0]*=o,e[1]*=o,e[2]*=o,e[3]*=o,e[4]*=r,e[5]*=r,e[6]*=r,e[7]*=r,e[8]*=l,e[9]*=l,e[10]*=l,e[11]*=l}function wa([e,t,a=0,n=0]){return 1/function(e){let t,a;const n=.5*e;return a=e,ka[0]=e,t=Ra[0],t=1597463007-(t>>1),Ra[0]=t,a=ka[0],a*=1.5-n*a*a,a*=1.5-n*a*a,a}(e**2+t**2+a**2+n**2)}const Pa=[1,1,1];function Ia(e,t){const a=ja(e),n=Array.from(e);xa(n,Pa,a),function(e,t){const a=e[0]*Ta,n=e[1]*Ta,o=e[2]*Ta,r=t||Array(16).fill(0),l=Math.cos(a),i=Math.sin(a),s=Math.cos(n),c=Math.sin(n),d=Math.cos(o),m=Math.sin(o),u=s*d,p=s*m,h=c*d,E=c*m;r[Ca.RX]=u-E*i,r[Ca.FX]=-l*m,r[Ca.UX]=h+p*i,r[Ca.RY]=p+h*i,r[Ca.FY]=l*d,r[Ca.UY]=E-u*i,r[Ca.RZ]=-l*c,r[Ca.FZ]=i,r[Ca.UZ]=l*s}(t,n),xa(n,a,Pa),e[Ca.RX]=n[Ca.RX],e[Ca.RY]=n[Ca.RY],e[Ca.RZ]=n[Ca.RZ],e[Ca.FX]=n[Ca.FX],e[Ca.FY]=n[Ca.FY],e[Ca.FZ]=n[Ca.FZ],e[Ca.UX]=n[Ca.UX],e[Ca.UY]=n[Ca.UY],e[Ca.UZ]=n[Ca.UZ]}function Da(e){return e<0?0:e>1?1:e}function La(e,t,a){return Math.min(a,Math.max(t,e))}const Ma=new class{constructor(){this.map=null,Object(ue.d)(this),this.load()}get(e){var t;return(null===(t=this.map)||void 0===t?void 0:t.get(e))||e}async load(){this.map=await navigator.keyboard.getLayoutMap()}},Fa={Escape:"ESC",ShiftLeft:"Shift",ShiftRight:"Shift",AltLeft:"Alt",AltRight:"Alt",ControlLeft:"Ctrl",ControlRight:"Ctrl",ArrowUp:"\u2191",ArrowDown:"\u2193",ArrowLeft:"\u2190",ArrowRight:"\u2192"},Ga=Symbol("SCOPE_GLOBAL");class Ua{constructor(e,t=[],a=Ga){this.onTriggered=e,this.bindings=t,this.scope=a,this.codeMap={},this.codeState={},this.modifierState={alt:!1,ctrl:!1,shift:!1},this.applyBindings()}setBingins(e){this.bindings=e,this.applyBindings()}setScope(e){this.scope=e}getScope(){return this.scope}resetState(){this.codeState={},this.modifierState={alt:!1,ctrl:!1,shift:!1}}processEvent(e,t){let a=!1;this.applyModifiers(e);const n=this.getCode(e);if(!t)return this.codeState[n]=!1,a;if(this.codeState[n])return a;this.codeState[n]=!0;const o=this.codeMap[n];if(!o)return a;for(const r of o)this.bindingMatchesScope(r)&&this.bindingMatchesModifiers(r)&&(a=!0,this.onTriggered(r));return a}getCode(e){return Wa(Fa[e.code]||e.code||e.key)}bindingMatchesScope(e){return this.scope===Ga||("undefined"===typeof e.scope||e.scope===this.scope)}bindingMatchesModifiers(e){return!!e.alt===this.modifierState.alt&&(!!e.ctrl===this.modifierState.ctrl&&!!e.shift===this.modifierState.shift)}applyModifiers({altKey:e,ctrlKey:t,shiftKey:a}){this.modifierState.alt=e,this.modifierState.ctrl=t,this.modifierState.shift=a}applyBindings(){this.codeMap={};for(const e of this.bindings){const t=Wa(Fa[e.code]||e.code);this.codeMap[t]||(this.codeMap[t]=[]),this.codeMap[t].push(e)}}}function Ha(e){const t=[];var a,n;return e.alt&&t.push("Alt"),e.ctrl&&t.push("Ctrl"),e.shift&&t.push("Shift"),t.push((n=e.code,a=Ma.get(n)||Fa[e.code]||e.code,Ya[a]||(Ya[a]=a[0].toUpperCase()+a.slice(1)))),t.join("+")}const Ba={};function Wa(e){return Ba[e]||(Ba[e]=e.toLowerCase())}const Ya={};const Ka={},Va={},za={},Xa=new Set;function Ja(e,t){qa({...e,extra:{interrupting:!0}},t)}function qa(e,t){Ka[e.command]=e,za[e.command]=t,Va[e.command]||(Va[e.command]=t),Xa.forEach(t=>t(en(e.command)))}function Za(e,t){Va[e]=t,Ka[e]&&Xa.forEach(t=>t(en(e)))}function $a(e){return Va[e]}function Qa(){return Object.keys(Ka).map(en)}function en(e){const t=Ka[e],a=Va[e];return{...t.extra,command:t.command,scope:t.scope,...a}}let tn=null,an=null;const nn=new class{constructor(){this.message="",this.active=!1,this.setInactive=()=>{tn=null,this.active=!1,an=setTimeout(()=>{an=null,this.message=""},200)},Object(ue.d)(this)}setMessage(e){this.message!==e&&(this.active=!0,null!==tn&&clearTimeout(tn),null!==an&&clearTimeout(an),tn=setTimeout(this.setInactive,2e3)),this.message=e}};var on;!function(e){e[e.EDITOR=0]="EDITOR",e[e.PLAYTEST=1]="PLAYTEST",e[e.CONFIGURATOR=2]="CONFIGURATOR",e[e.INTRO=3]="INTRO"}(on||(on={}));const rn=Object.freeze({TOOL_PATCHES_TOGGLE:"tool.patches.toggle",TOOL_ADDITIONS_TOGGLE:"tool.additions.toggle",TOOL_ADD_OBJECT_TOGGLE:"tool.addObject.toggle",TOOL_ENVIRONMENT_TOGGLE:"tool.environment.toggle",TOOL_SETTINGS_TOGGLE:"tool.settings.toggle",CONTROL_COORD_SYSTEM_TOGGLE:"control.coordSystem.toggle",CONTROL_MODE_TRANSLATE_TOGGLE:"control.mode.translate.toggle",CONTROL_MODE_ROTATE_TOGGLE:"control.mode.rotate.toggle",CONTROL_MODE_SCALE_TOGGLE:"control.mode.scale.toggle",CONTROL_ESCAPE:"control.escape",ACTION_DUPLICATE_SELECTION:"action.duplicateSelection",ACTION_DELETE_SELECTION:"action.deleteSelection",ACTION_SET_ADDITION_ON_GROUND:"action.setAdditionOnGround",ACTION_ENTER_PLAYTEST_MODE:"action.enterPlaytestMode",ACTION_FOCUS_SELECTION_IN_VIEW:"action.focusSelectionInView"});function ln(e,t){Object(ge.b)(e,t)}function sn(e,t){sendGameClientEvent(e,JSON.stringify(t)||"")}var cn=a(39);const dn=new class{constructor(){this.inputDragStart=new cn.a,this.inputDragEnd=new cn.a,this.gizmoSelectChanged=new cn.a,this.selectionChanged=new cn.a,this.selectionChangeRequest=new cn.a,this.additionCreated=new cn.a,this.additionChanged=new cn.a,this.additionDeleted=new cn.a,this.patchDeleted=new cn.a}emitAdittionChanged(e,t){this.additionChanged.emit({id:e,addition:t})}emitAdditionDeleted(e,t){this.additionDeleted.emit({id:e,addition:t})}emitPatchDeleted(e,t,a){this.patchDeleted.emit({mapdata:e,entity:t,patch:a})}};var mn,un,pn,hn;!function(e){e[e.ALT=18]="ALT",e[e.ALT_LEFT=164]="ALT_LEFT",e[e.ALT_RIGHT=165]="ALT_RIGHT",e[e.CTRL=17]="CTRL",e[e.CTRL_LEFT=162]="CTRL_LEFT",e[e.CTRL_RIGHT=163]="CTRL_RIGHT",e[e.SHIFT=16]="SHIFT",e[e.SHIFT_LEFT=160]="SHIFT_LEFT",e[e.SHIFT_RIGHT=161]="SHIFT_RIGHT"}(mn||(mn={})),function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"}(un||(un={})),function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=2]="MIDDLE",e[e.RIGHT=1]="RIGHT"}(pn||(pn={})),function(e){e[e.IDLE=0]="IDLE",e[e.CLICKING=1]="CLICKING",e[e.DRAGGING=2]="DRAGGING",e[e.CAMERA_CONTROL=3]="CAMERA_CONTROL",e[e.FULL_CONTROL=4]="FULL_CONTROL"}(hn||(hn={}));class En{constructor(e,t,a){var n;this.container=e,this.onGizmoControlActive=t,this.onClick=a,this.state=hn.IDLE,this.keyState={},this.mouseButtonState=[!1,!1,!1],this.cameraMovementBaseMultiplier=1,this.mousePos={x:0,y:0},this.escapeFullControlCallback=e=>{},this.handleContainerMouseMove=e=>{if(this.isFullControl||this.isCameraControl)return;let t,a;if(this.isClicking&&(this.state=hn.DRAGGING,dn.inputDragStart.emit()),this.isDragging){const n=this.getScaledMovement(e),o=this.gizmoPrecisionMode?.1:1;t=this.mousePos.x=Da(this.mousePos.x+n.x*o),a=this.mousePos.y=Da(this.mousePos.y+n.y*o)}else({x:t,y:a}=this.getEventRelativePos(e));setWorldEditorMouse(t,a)},this.handleWheel=e=>{if(this.isFullControl)return sendMouseWheel(-e.deltaY),gn(e);this.isCameraControl&&(this.cameraMovementBaseMultiplier+=.001*-e.deltaY,this.cameraMovementBaseMultiplier<.01&&(this.cameraMovementBaseMultiplier=.01),.11===this.cameraMovementBaseMultiplier&&(this.cameraMovementBaseMultiplier=.1),sn(_a.SetCamBaseMultiplier,this.cameraMovementBaseMultiplier),nn.setMessage(`Camera speed: ${100*this.cameraMovementBaseMultiplier|0}%`))},this.lockingPointer=!1,this.handlePointerLockChanged=()=>{this.lockingPointer&&!document.pointerLockElement&&(this.lockingPointer=!1,setRawMouseCapture(!1))},this.handleWindowBlur=()=>{this.lockingPointer&&this.unlockPointer(),this.hotkeys.resetState(),this.resetKeysState(),this.resetMouseButtonStates()},this.containerHandlers={mousemove:this.handleContainerMouseMove,mousedown:e=>this.handleMouseButtonState(e,!0),mouseup:e=>this.handleMouseButtonState(e,!1),wheel:this.handleWheel},this.documentHandlers={pointerlockchange:this.handlePointerLockChanged,keydown:e=>this.handleKeyState(e,!0),keyup:e=>this.handleKeyState(e,!1)},this.windowHandlers={blur:this.handleWindowBlur},this.hotkeys=new Ua(e=>{e.interrupting&&this.exitCameraControl(),function(e){var t;const a=null===(t=Ka[e])||void 0===t?void 0:t.execute;a&&a()}(e.command)},Qa(),on.EDITOR),this.removeRegisterCommandBindingListener=(n=()=>{this.hotkeys.setBingins(Qa())},Xa.add(n),()=>Xa.delete(n));for(const[o,r]of Object.entries(this.containerHandlers))this.container.current.addEventListener(o,r);for(const[o,r]of Object.entries(this.documentHandlers))document.addEventListener(o,r);for(const[o,r]of Object.entries(this.windowHandlers))window.addEventListener(o,r)}get gizmoPrecisionMode(){return!!this.keyState[mn.ALT_LEFT]||!!this.keyState[mn.ALT_RIGHT]}get isFullControl(){return this.state===hn.FULL_CONTROL}get isCameraControl(){return this.state===hn.CAMERA_CONTROL}get isClicking(){return this.state===hn.CLICKING}get isDragging(){return this.state===hn.DRAGGING}destroy(){this.removeRegisterCommandBindingListener();for(const[e,t]of Object.entries(this.containerHandlers))this.container.current.removeEventListener(e,t);for(const[e,t]of Object.entries(this.documentHandlers))document.removeEventListener(e,t);for(const[e,t]of Object.entries(this.windowHandlers))window.removeEventListener(e,t)}setScope(e){this.hotkeys.setScope(e)}enterFullControl(){this.state=hn.FULL_CONTROL,this.setScope(on.PLAYTEST),this.lockingPointer||this.lockPointer(),this.resetMouseButtonStates(),this.resetKeysState()}exitFullControl(){this.state=hn.IDLE,this.setScope(on.EDITOR),this.unlockPointer(),this.resetMouseButtonStates(),this.resetKeysState()}onEscapeFullControl(e){this.escapeFullControlCallback=e}exitCameraControl(){this.isCameraControl&&(this.state=hn.IDLE,this.unlockPointer(),setWorldEditorMouse(this.mousePos.x,this.mousePos.y))}resetKeysState(){this.hotkeys.resetState();for(const[e,t]of Object.entries(this.keyState))t&&(this.keyState[e]=!1,setKeyState(parseInt(e,10),!1))}handleKeyState(e,t){if(this.isFullControl)return"Escape"===e.code?this.escapeFullControlCallback(e.shiftKey):this.applyKeyState(e,t),gn(e);const{tagName:a}=e.target;"INPUT"!==a&&"TEXTAREA"!==a&&"SELECT"!==a&&(this.hotkeys.processEvent(e,t)?gn(e):this.applyGameInput(e,t))}applyKeyState(e,t){const a=function({which:e,location:t}){return e===mn.ALT?1===t?mn.ALT_LEFT:mn.ALT_RIGHT:e===mn.CTRL?1===t?mn.CTRL_LEFT:mn.CTRL_RIGHT:e===mn.SHIFT?1===t?mn.SHIFT_LEFT:mn.SHIFT_RIGHT:e}(e);this.keyState[a]!==t&&(this.keyState[a]=t,setKeyState(a,t))}applyGameInput(e,t){switch(e.code){case"KeyW":case"KeyA":case"KeyS":case"KeyD":case"ShiftLeft":case"ShiftRight":case"AltLeft":case"AltRight":gn(e),this.applyKeyState(e,t)}}resetMouseButtonStates(){this.mouseButtonState.forEach((e,t)=>{e&&(this.mouseButtonState[t]=!1,setMouseButtonState(t,!1))})}handleMouseButtonState(e,t){const a=e.button===un.LEFT;const n=function(e){return e.button===un.RIGHT}(e),o=function(e){return 2===e?1:1==e?2:e}(e.button),r=this.mouseButtonState[o]!==t;switch(this.mouseButtonState[o]=t,t&&document.activeElement.blur(),this.state){case hn.IDLE:if(!t)break;a&&(this.state=hn.CLICKING,this.mousePos=this.getEventRelativePos(e),this.onGizmoControlActive(!0)),n&&(this.state=hn.CAMERA_CONTROL,this.mousePos=this.getEventRelativePos(e),setWorldEditorMouse(0,0),this.lockPointer());break;case hn.FULL_CONTROL:this.lockingPointer?r&&setMouseButtonState(o,t):this.lockPointer();break;case hn.CAMERA_CONTROL:n&&!t&&this.exitCameraControl();break;case hn.CLICKING:a&&!t&&(this.state=hn.IDLE,this.onGizmoControlActive(!1),this.onClick());case hn.DRAGGING:a&&!t&&(this.state=hn.IDLE,dn.inputDragEnd.emit(),this.onGizmoControlActive(!1))}gn(e)}getEventRelativePos(e){const{width:t,height:a,x:n,y:o}=this.container.current.getBoundingClientRect();return{x:(e.x-n)/t,y:(e.y-o)/a}}getScaledMovement(e){const{width:t,height:a}=this.container.current.getBoundingClientRect();return{x:e.movementX/t,y:e.movementY/a}}lockPointer(){this.lockingPointer=!0,setRawMouseCapture(!0),this.container.current.requestPointerLock()}unlockPointer(){this.lockingPointer=!1,setRawMouseCapture(!1),document.exitPointerLock()}}function gn(e){e.stopPropagation(),e.preventDefault()}Oa.V3;function bn(e){return"string"===typeof e?parseInt(e,10):e}function fn(e,t){const a={...e};return delete a[t],a}function _n(e,...t){return t.reduce((t,a)=>(t[a]=e[a],t),{})}class Cn{constructor(e=50){this.maxLength=e,this.ptr=0,this.start=0,this.end=0,this.items=new Map,this.rIC=null}get length(){return this.end-this.start}push(e){this.length>this.maxLength&&this.start++,this.items.set(this.ptr,e),this.ptr++,this.end=this.ptr,this.gc()}undo(){return this.length&&this.ptr!==this.start?(this.ptr--,this.items.get(this.ptr)||null):null}redo(){if(!this.length||this.ptr===this.end)return null;const e=this.items.get(this.ptr);return this.ptr++,e||null}gc(){null!==this.rIC&&cancelIdleCallback(this.rIC),this.rIC=requestIdleCallback(()=>{this.rIC=null,this.items.forEach((e,t)=>{(t<this.start||t>=this.end)&&this.items.delete(t)})})}}var vn;!function(e){e[e.PATCH_CREATED=0]="PATCH_CREATED",e[e.PATCH_CHANGED=1]="PATCH_CHANGED",e[e.PATCH_DELETED=2]="PATCH_DELETED",e[e.ADDITION_CREATED=3]="ADDITION_CREATED",e[e.ADDITION_CHANGED=4]="ADDITION_CHANGED",e[e.ADDITION_DELETED=5]="ADDITION_DELETED",e[e.ADDITION_GROUP_CHANGED=6]="ADDITION_GROUP_CHANGED",e[e.ADDITIONS_GROUP_CHANGED=7]="ADDITIONS_GROUP_CHANGED",e[e.ADDITIONS_GROUP_DELETED=8]="ADDITIONS_GROUP_DELETED"}(vn||(vn={}));const yn=new class{constructor(){this.patchChangeRecordingTimer=null,this.patchChangeRecording=null,this.commitPatchChangeRecording=()=>{null!==this.patchChangeRecordingTimer&&(clearTimeout(this.patchChangeRecordingTimer),this.patchChangeRecordingTimer=null),this.patchChangeRecording=null},this.additionChangeRecordingTimer=null,this.additionChangeRecording=null,this.commitAdditionChangeRecording=()=>{null!==this.additionChangeRecordingTimer&&(clearTimeout(this.additionChangeRecordingTimer),this.additionChangeRecordingTimer=null),this.additionChangeRecording=null},this.commitAllRecordings=()=>{this.commitAdditionChangeRecording(),this.commitPatchChangeRecording()},this.resetUndoRedo(),this.bindCommands()}bindCommands(){qa({command:"undo",execute:()=>this.undo(),scope:on.EDITOR},{code:"KeyZ",ctrl:!0}),qa({command:"redo",execute:()=>this.redo(),scope:on.EDITOR},{code:"KeyZ",ctrl:!0,shift:!0})}reset(){this.commitAllRecordings(),this.resetUndoRedo()}undo(){this.commitAllRecordings();const e=this.undoredo.undo();e?this.processItem(e,!1):nn.setMessage("Nothing to undo")}redo(){this.commitAllRecordings();const e=this.undoredo.redo();e?this.processItem(e,!0):nn.setMessage("Nothing to redo")}processItem(e,t){switch(e.op){case vn.ADDITION_CREATED:t?Dn.map.setAddition(e.id,JSON.parse(e.addition)):Dn.map.deleteAddition(e.id,!1);break;case vn.ADDITION_DELETED:t?Dn.map.deleteAddition(e.id,!1):(Dn.map.setAddition(e.id,JSON.parse(e.addition)),e.wasSelected&&Dn.setEditorSelection({type:ya.ADDITION,id:e.id}));break;case vn.ADDITION_CHANGED:if(t){if(!e.next)return;Dn.map.setAddition(e.id,JSON.parse(e.next))}else Dn.map.setAddition(e.id,JSON.parse(e.prev));break;case vn.ADDITION_GROUP_CHANGED:t?Dn.map.setAdditionGroup(e.id,e.next,!1):Dn.map.setAdditionGroup(e.id,e.prev,!1);break;case vn.ADDITIONS_GROUP_DELETED:t?Dn.map.deleteAdditionGroup(e.grp,!!e.additions,!1):Dn.map.restoreAdditionsGroup(e.grp,e.grpDefinition,e.additions?JSON.parse(e.additions):{});break;case vn.ADDITIONS_GROUP_CHANGED:t?Dn.map.setAdditionsGroupDefinition(e.grp,JSON.parse(e.next)):Dn.map.setAdditionsGroupDefinition(e.grp,JSON.parse(e.prev));break;case vn.PATCH_CREATED:{const{mapdata:a,entity:n}=this.parsePatchId(e.id);t?Dn.map.setPatch(a,n,JSON.parse(e.patch)):Dn.map.deletePatch(a,n,!1);break}case vn.PATCH_CHANGED:{const{mapdata:a,entity:n}=this.parsePatchId(e.id);t?Dn.map.setPatch(a,n,JSON.parse(e.next)):Dn.map.setPatch(a,n,JSON.parse(e.prev));break}case vn.PATCH_DELETED:{const{mapdata:a,entity:n}=this.parsePatchId(e.id);if(t)Dn.map.deletePatch(a,n,!1);else{const t=JSON.parse(e.patch);Dn.map.setPatch(a,n,t),e.wasSelected&&Dn.setEditorSelection({type:ya.PATCH,mapdata:a,entity:n,label:t.label})}break}}}patchCreated(e,t,a){this.commitAllRecordings(),this.undoredo.push({op:vn.PATCH_CREATED,id:this.getPatchId(e,t),patch:JSON.stringify(a)})}beginPatchChange(e,t,a){var n;const o=this.getPatchId(e,t);(null===(n=this.patchChangeRecording)||void 0===n?void 0:n.id)!==o&&(this.commitPatchChangeRecording(),this.restartPatchChangeRecordingTimer(),this.patchChangeRecording={op:vn.PATCH_CHANGED,id:o,prev:JSON.stringify(a),next:""},this.undoredo.push(this.patchChangeRecording))}finishPatchChange(e){this.patchChangeRecording&&(this.restartPatchChangeRecordingTimer(),this.patchChangeRecording.next=JSON.stringify(e))}restartPatchChangeRecordingTimer(){null!==this.patchChangeRecordingTimer&&clearTimeout(this.patchChangeRecordingTimer),this.patchChangeRecordingTimer=setTimeout(this.commitPatchChangeRecording,500)}patchDeleted(e,t,a){this.commitAllRecordings(),this.undoredo.push({op:vn.PATCH_DELETED,id:this.getPatchId(e,t),patch:JSON.stringify(a),wasSelected:Dn.isPatchSelected(e,t)})}additionCreated(e,t){this.commitAllRecordings(),this.undoredo.push({op:vn.ADDITION_CREATED,id:e,addition:JSON.stringify(t)})}additionGroupChanged(e,t,a){this.commitAllRecordings(),this.undoredo.push({op:vn.ADDITION_GROUP_CHANGED,id:e,prev:t,next:a})}additionsGroupDeleted(e,t,a){this.commitAllRecordings(),this.undoredo.push({op:vn.ADDITIONS_GROUP_DELETED,grp:e,grpDefinition:t,additions:a?JSON.stringify(a):""})}additionDeleted(e,t){this.commitAllRecordings(),this.undoredo.push({op:vn.ADDITION_DELETED,id:e,addition:JSON.stringify(t),wasSelected:Dn.isAdditionSelected(e)})}additionsGroupChanged(e,t,a){this.undoredo.push({op:vn.ADDITIONS_GROUP_CHANGED,grp:e,prev:JSON.stringify(t),next:JSON.stringify(a)})}beginAdditionChange(e,t){var a;(null===(a=this.additionChangeRecording)||void 0===a?void 0:a.id)!==e&&(this.commitAdditionChangeRecording(),this.restartAdditionChangeRecordingTimer(),this.additionChangeRecording={op:vn.ADDITION_CHANGED,id:e,prev:JSON.stringify(t),next:""},this.undoredo.push(this.additionChangeRecording))}finishAdditionChange(e){this.additionChangeRecording&&(this.restartAdditionChangeRecordingTimer(),this.additionChangeRecording.next=JSON.stringify(e))}restartAdditionChangeRecordingTimer(){null!==this.additionChangeRecordingTimer&&clearTimeout(this.additionChangeRecordingTimer),this.additionChangeRecordingTimer=setTimeout(this.commitAdditionChangeRecording,500)}getPatchId(e,t){return JSON.stringify({mapdata:e,entity:t})}parsePatchId(e){return JSON.parse(e)}resetUndoRedo(){this.undoredo=new Cn(200)}};var On,Nn,Tn=a(66);class An{constructor(e){this.map=e,this.ungroupedAdditions={},this.groupedAdditions={},this.handleAdditionPlaced=({id:e,cam:t,mat:a})=>{const n=this.map.additions[e];n&&(n.cam=t,n.mat=a,this.updateAdditionInGroups(e),yn.additionCreated(e,n))},this.setPatchLabel=this.patchChangeWrap(["label"],(e,t)=>{e.label=t}),this.setPatchPosition=this.patchChangeWrap(["mat"],(e,t,a,n)=>{e.mat[Ca.AX]=t,e.mat[Ca.AY]=a,e.mat[Ca.AZ]=n}),this.setPatchRotation=this.patchChangeWrap(["mat"],(e,t,a,n)=>{Ia(e.mat,[n,t,a])}),this.setPatchScale=this.patchChangeWrap(["mat"],(e,t,a,n)=>{xa(e.mat,[t,a,n])}),this.setAdditionPosition=this.additionChangeWrap(["mat"],(e,t,a,n)=>{e.mat[Ca.AX]=t,e.mat[Ca.AY]=a,e.mat[Ca.AZ]=n}),this.setAdditionRotation=this.additionChangeWrap(["mat"],(e,t,a,n)=>{Ia(e.mat,[n,t,a])}),this.setAdditionScale=this.additionChangeWrap(["mat"],(e,t,a,n)=>{xa(e.mat,[t,a,n])}),this.setAdditionLabel=this.additionChangeWrap(["label"],(e,t)=>{e.label=t}),Object(ue.d)(this);for(const[t,a]of Object.entries(e.additions))-1===a.grp?this.ungroupedAdditions[t]=a:(this.groupedAdditions[a.grp]||(this.groupedAdditions[a.grp]={}),this.groupedAdditions[a.grp][t]=a)}get cam(){return this.map.meta.cam}get additions(){return this.map.additions}get additionGroups(){return this.map.additionGroups}get additionsByGroups(){return this.groupedAdditions}get additionsUngrouped(){return this.ungroupedAdditions}get patches(){return this.map.patches}handleCreatePatchRequest({mapDataHash:e,entityHash:t,patch:a}){yn.patchCreated(e,t,a),this.map.patches[e]||(this.map.patches[e]={}),this.map.patches[e][t]=a}handleApplyPatchChangeRequest(e){const t=this.getPatch(e.mapdata,e.entity);t&&(yn.beginPatchChange(e.mapdata,e.entity,t),e.mat&&(t.mat=e.mat),e.label&&(t.label=e.label),e.cam&&(t.cam=e.cam),yn.finishPatchChange(t))}handleApplyAdditionChangeRequest(e){const t=this.map.additions[e.id];if(t){yn.beginAdditionChange(e.id,t);const a={...t,...fn(e,"id")};yn.finishAdditionChange(a),this.map.additions[e.id]=a,this.updateAdditionInGroups(e.id)}}setPatch(e,t,a){this.map.patches[e]||(this.map.patches[e]={}),this.map.patches[e][t]=a;const n={mapDataHash:e,entityHash:t,patch:a};sn(_a.PatchCreate,n),Object(pe.c)(le.l.createPatch,n)}getPatch(e,t){var a;return null===(a=this.map.patches[e])||void 0===a?void 0:a[t]}getGroupAdditions(e){return this.groupedAdditions[e]||{}}setAddition(e,t){this.additions[e]=t,this.updateAdditionInGroups(e);const a={id:e,addition:t};sn(_a.AdditionSet,a),Object(pe.c)(le.l.setAddition,a)}async createAddition(e,t){const a=Object(Ee.a)(),n={vd:await Tn.a.getArchetypeLodDist(e),mdl:e,grp:t,cam:[0,0,100,0,0,-45],label:e,mat:[1,0,0,1,0,1,0,1,0,0,1,1,0,0,0,1]};Object(ue.h)(()=>{this.map.additions[a]=n,this.updateAdditionInGroups(a)});const o={id:a,addition:n};sn(_a.AdditionCreate,o),Object(pe.c)(le.l.createAddition,o)}duplicateAddition(e){const t=this.map.additions[e];if(t){const e=Object(Ee.a)(),a={...t,mat:Array.from(t.mat)};this.setAddition(e,a),yn.additionCreated(e,a),dn.selectionChangeRequest.emit({type:ya.ADDITION,id:e})}}setAdditionOnGround(e){sn(_a.AdditionSetOnGround,e)}deletePatch(e,t,a=!0){const n=this.getPatch(e,t);if(!n)return;a&&yn.patchDeleted(bn(e),bn(t),n),delete this.map.patches[e][t],0===Object.keys(this.map.patches[e]).length&&delete this.map.patches[e];const o={mapDataHash:bn(e),entityHash:bn(t)};dn.emitPatchDeleted(o.mapDataHash,o.entityHash,n),sn(_a.PatchDelete,o),Object(pe.c)(le.l.deletePatch,o)}deleteAddition(e,t=!0){const a=this.map.additions[e];a&&(-1!==a.grp&&this.groupedAdditions[a.grp]?delete this.groupedAdditions[a.grp][e]:delete this.ungroupedAdditions[e],delete this.map.additions[e],t&&yn.additionDeleted(e,a),dn.emitAdditionDeleted(e,a),sn(_a.AdditionDelete,e),Object(pe.c)(le.l.deleteAddition,{id:e}))}setAdditionGroup(e,t,a=!0){const n=this.map.additions[e];if(n){if(n.grp===t)return;-1===n.grp?delete this.ungroupedAdditions[e]:delete this.groupedAdditions[n.grp][e],a&&yn.additionGroupChanged(e,n.grp,t),n.grp=t,this.updateAdditionInGroups(e),this.broadcastAdditionChange(e,{grp:t})}}setAdditionsGroup(e,t){this.map.additionGroups[e]=t,this.groupedAdditions[e]={},Object(pe.c)(le.l.createAdditionGroup,{grp:e,label:t.label})}createAdditionGroup(e){const t=Object(Ee.a)();return this.setAdditionsGroup(t,{label:e}),t}restoreAdditionsGroup(e,t,a){if(this.setAdditionsGroup(e,t),Object.keys(a).length>0)for(const[n,o]of Object.entries(a))this.setAddition(n,o)}deleteAdditionGroup(e,t,a=!0){const n=Object.keys(this.groupedAdditions[e]||{});if(a&&(t?yn.additionsGroupDeleted(e,this.map.additionGroups[e],this.groupedAdditions[e]):yn.additionsGroupDeleted(e,this.map.additionGroups[e])),delete this.map.additionGroups[e],delete this.groupedAdditions[e],t){for(const e of n)delete this.map.additions[e];sn(_a.AdditionDeleteBatch,n)}else for(const o of n){const e=this.map.additions[o];e.grp=-1,this.ungroupedAdditions[o]=e}Object(pe.c)(le.l.deleteAdditionGroup,{grp:e,deleteAdditions:t})}setAdditionsGroupDefinition(e,t){this.map.additionGroups[e]=t,Object(pe.c)(le.l.setAdditionGroupLabel,{grp:e,label:t.label})}setAdditionGroupLabel(e,t){if(!t)return;const a=this.map.additionGroups[e],n={...a,label:t};this.map.additionGroups[e]=n,yn.additionsGroupChanged(e,a,n),Object(pe.c)(le.l.setAdditionGroupLabel,{grp:e,label:t})}additionChangeWrap(e,t){return(a,...n)=>{const o=this.additions[a];o&&(yn.beginAdditionChange(a,o),t(o,...n),yn.finishAdditionChange(o),this.broadcastAdditionChange(a,_n(o,...e)))}}patchChangeWrap(e,t){return(a,n,...o)=>{let r=this.getPatch(a,n);if(!r){const e=this.createPatchFromSelection();if(!e)return;return t(e.patch,...o),yn.patchCreated(e.mapdata,e.entity,e.patch),void this.setPatch(e.mapdata,e.entity,e.patch)}const l=bn(a),i=bn(n);yn.beginPatchChange(l,i,r),t(r,...o),yn.finishPatchChange(r),this.broadcastPatchChange(l,i,_n(r,...e))}}createPatchFromSelection(){if(Dn.selection.type!==ya.PATCH)return null;if(!Dn.selection.mat||!Dn.selection.cam)return null;return{patch:{mat:Dn.selection.mat,cam:Dn.selection.cam,label:Dn.selection.label},mapdata:Dn.selection.mapdata,entity:Dn.selection.entity}}broadcastAdditionChange(e,t){const a={id:e,...t};sn(_a.AdditionApplyChange,a),Object(pe.c)(le.l.applyAdditionChange,a)}broadcastPatchChange(e,t,a){const n={mapdata:e,entity:t,...a};sn(_a.PatchApplyChange,n),Object(pe.c)(le.l.applyPatchChange,n)}updateAdditionInGroups(e){const t=this.map.additions[e];t&&(-1===t.grp?this.ungroupedAdditions[e]=t:(this.groupedAdditions[t.grp]||(this.groupedAdditions[t.grp]={}),this.groupedAdditions[t.grp][e]=t))}}class Sn{constructor(e){this.key=e.key,this._value=function(e,t){if(void 0===localStorage[e])return t;try{return JSON.parse(localStorage[e])}catch(a){return t}}(this.key,e.defaultValue),e.readTransform&&(this._value=e.readTransform(this._value)),Object(ue.d)(this)}set(e){this._value=e,localStorage[this.key]=JSON.stringify(e)}get(){return this._value}}!function(e){e[e.Patches=0]="Patches",e[e.Additions=1]="Additions",e[e.AddObject=2]="AddObject",e[e.StatusCenter=3]="StatusCenter",e[e.Environment=4]="Environment",e[e.Properties=5]="Properties",e[e.Settings=6]="Settings"}(On||(On={})),function(e){e.LEFT_TOP="left_top",e.LEFT_BOTTOM="left_bottom",e.RIGHT="right"}(Nn||(Nn={}));const kn={[On.Patches]:{side:Nn.LEFT_TOP,command:rn.TOOL_PATCHES_TOGGLE},[On.Additions]:{side:Nn.LEFT_TOP,command:rn.TOOL_ADDITIONS_TOGGLE},[On.AddObject]:{side:Nn.LEFT_TOP,command:rn.TOOL_ADD_OBJECT_TOGGLE},[On.Properties]:{side:Nn.LEFT_BOTTOM},[On.Settings]:{side:Nn.RIGHT,command:rn.TOOL_SETTINGS_TOGGLE},[On.Environment]:{side:Nn.RIGHT,command:rn.TOOL_ENVIRONMENT_TOGGLE},[On.StatusCenter]:{side:Nn.RIGHT}};function Rn(e){return kn[e].side}function jn(e){return kn[e].command}const xn=new class{constructor(){this.showingFakeProperties=!1,this.activeTool={[Nn.LEFT_TOP]:null,[Nn.LEFT_BOTTOM]:null,[Nn.RIGHT]:null},this.showFakeProperties=()=>{this.showingFakeProperties=!0},this.hideFakeProperties=()=>{this.showingFakeProperties=!1},Object(ue.d)(this),this.bindCommands()}bindCommands(){Ja({command:rn.TOOL_PATCHES_TOGGLE,label:"Toggle map patches panel",configurable:!0,scope:on.EDITOR,execute:()=>this.toggleTool(On.Patches)},{code:"F1"}),Ja({command:rn.TOOL_ADDITIONS_TOGGLE,label:"Toggle map additions panel",configurable:!0,scope:on.EDITOR,execute:()=>this.toggleTool(On.Additions)},{code:"F2"}),Ja({command:rn.TOOL_ADD_OBJECT_TOGGLE,label:"Open object adder",configurable:!0,scope:on.EDITOR,execute:()=>this.toggleTool(On.AddObject)},{code:"KeyA",ctrl:!0}),Ja({command:rn.TOOL_ENVIRONMENT_TOGGLE,label:"Toggle environment settings panel",configurable:!0,scope:on.EDITOR,execute:()=>this.toggleTool(On.Environment)},{code:"F11"}),Ja({command:rn.TOOL_SETTINGS_TOGGLE,label:"Toggle settings panel",configurable:!0,scope:on.EDITOR,execute:()=>this.toggleTool(On.Settings)},{code:"F12"})}isSideActive(e){return null!==this.activeTool[e]}isToolOpen(e){return this.activeTool[Rn(e)]===e}openTool(e){this.activeTool[Rn(e)]=e}closeTool(e){this.activeTool[Rn(e)]=null}toggleTool(e){this.isToolOpen(e)?this.closeTool(e):this.openTool(e)}closeAllTools(){for(const e of Object.keys(this.activeTool))this.activeTool[e]=null}};var wn,Pn,In=a(67);!function(e){e[e.EDITOR=0]="EDITOR",e[e.PLAYTEST=1]="PLAYTEST"}(wn||(wn={})),function(e){e[e.TRANSLATE=0]="TRANSLATE",e[e.ROTATE=1]="ROTATE",e[e.SCALE=2]="SCALE"}(Pn||(Pn={}));const Dn=new class{constructor(){this.ready=!1,this.mode=wn.EDITOR,this.editorSelect=!1,this.editorMode=Pn.TRANSLATE,this.editorLocal=!1,this.selection={type:ya.NONE},this.map=null,this.mapEntry=null,this.introSeen=new Sn({key:"we:introSeen",defaultValue:!1}),this.forceShowIntro=!1,this.handleGameReady=()=>{this.ready=!0,ut.a.archetypesCollectionReady||ut.a.refreshArchetypesCollection()},this.deleteSelection=()=>{var e,t;switch(this.selection.type){case ya.NONE:return;case ya.PATCH:return null===(e=this.map)||void 0===e?void 0:e.deletePatch(this.selection.mapdata,this.selection.entity);case ya.ADDITION:return null===(t=this.map)||void 0===t?void 0:t.deleteAddition(this.selection.id)}},this.duplicateSelection=()=>{var e;this.selection.type===ya.ADDITION&&(null===(e=this.map)||void 0===e||e.duplicateAddition(this.selection.id))},this.openIntro=()=>{this.forceShowIntro=!0},this.closeIntro=()=>{this.introSeen.get()||this.introSeen.set(!0),this.forceShowIntro=!1},this.enterPlaytestMode=()=>{this.mode!==wn.PLAYTEST&&(sn(_a.EnterPlaytestMode,void 0),this.mode=wn.PLAYTEST,this.inputController.enterFullControl())},this.enterEditorMode=(e=!1)=>{this.mode!==wn.EDITOR&&(sn(_a.ExitPlaytestMode,e),this.mode=wn.EDITOR,this.inputController.exitFullControl())},this.enterHotkeyConfigurationMode=()=>{this.inputController.setScope(on.CONFIGURATOR)},this.exitHotkeyConfigurationMode=()=>{this.inputController.setScope(on.EDITOR)},this.focusSelectionInView=()=>{var e,t,a;let n,o;switch(this.selection.type){case ya.ADDITION:{const t=null===(e=this.map)||void 0===e?void 0:e.additions[this.selection.id];n=null===t||void 0===t?void 0:t.mat,o=null===t||void 0===t?void 0:t.cam;break}case ya.PATCH:{const e=null===(a=null===(t=this.map)||void 0===t?void 0:t.patches[this.selection.mapdata])||void 0===a?void 0:a[this.selection.entity];e?(n=e.mat,o=e.cam):this.selection.mat&&this.selection.cam&&(n=this.selection.mat,o=this.selection.cam);break}}o&&n&&this.focusInView(o,[n[Ca.AX],n[Ca.AY],n[Ca.AZ]])},this.openMap=e=>{this.map=null,this.mapEntry=e,yn.reset(),Object(pe.c)(le.l.start,{mapPath:e.path}),he.setPersonality(me.WORLD_EDITOR)},this.closeMap=()=>{!1===fa&&(this.ready=!1),this.map=null,this.mapEntry=null,Object(pe.c)(le.l.stop),he.setPersonality(me.THEIA)},this.enableTranslation=()=>{this.editorMode=Pn.TRANSLATE,this.updateEditorControls()},this.enableRotation=()=>{this.editorMode=Pn.ROTATE,this.updateEditorControls()},this.enableScaling=()=>{this.editorMode=Pn.SCALE,this.updateEditorControls()},this.toggleEditorLocal=()=>{this.editorLocal=!this.editorLocal,this.updateEditorControls()},this.setGizmoControlActive=e=>{this.editorSelect=e,dn.gizmoSelectChanged.emit(e),this.updateEditorControls()},this.setEditorSelection=e=>{this.updateSelection(e),sn(_a.Selection,e)},this.handleEscape=()=>{if(this.selection.type===ya.NONE)return xn.closeAllTools();this.clearEditorSelection()},this.clearEditorSelection=()=>{this.setEditorSelection({type:ya.NONE})},this.selectEntityAtCursor=()=>sn(_a.SelectAtCursor,void 0),this.updateSelection=e=>{this.selection=e,dn.selectionChanged.emit(e)},Object(ue.d)(this),fa&&(this.ready=!0),this.bindCommands(),this.bindEvents()}get mapName(){return this.mapEntry?this.mapEntry.name.replace(".fxworld",""):""}get introFirstTime(){return!this.introSeen.get()}get showIntro(){return!!this.ready&&(!!this.map&&(!this.introSeen.get()||this.forceShowIntro))}bindEvents(){ln(_a.Selection,this.updateSelection),ln(_a.Ready,this.handleGameReady),ln(_a.PatchCreate,e=>{var t;return null===(t=this.map)||void 0===t?void 0:t.handleCreatePatchRequest(e)}),ln(_a.PatchApplyChange,e=>{var t;return null===(t=this.map)||void 0===t?void 0:t.handleApplyPatchChangeRequest(e)}),ln(_a.AdditionPlaced,e=>{var t;return null===(t=this.map)||void 0===t?void 0:t.handleAdditionPlaced(e)}),ln(_a.AdditionApplyChange,e=>{var t;return null===(t=this.map)||void 0===t?void 0:t.handleApplyAdditionChangeRequest(e)}),Object(In.a)(le.l.mapLoaded,e=>{this.map=new An(e)}),dn.additionDeleted.addListener(({id:e})=>{this.selection.type===ya.ADDITION&&this.selection.id===e&&this.clearEditorSelection()}),dn.patchDeleted.addListener(({mapdata:e,entity:t})=>{this.selection.type===ya.PATCH&&this.selection.mapdata===e&&this.selection.entity===t&&this.clearEditorSelection()}),dn.selectionChangeRequest.addListener(e=>{this.setEditorSelection(e)})}bindCommands(){qa({command:rn.CONTROL_COORD_SYSTEM_TOGGLE,scope:on.EDITOR,execute:this.toggleEditorLocal},{code:"Backquote"}),qa({command:rn.CONTROL_MODE_TRANSLATE_TOGGLE,scope:on.EDITOR,execute:this.enableTranslation},{code:"Digit1"}),qa({command:rn.CONTROL_MODE_ROTATE_TOGGLE,scope:on.EDITOR,execute:this.enableRotation},{code:"Digit2"}),qa({command:rn.CONTROL_MODE_SCALE_TOGGLE,scope:on.EDITOR,execute:this.enableScaling},{code:"Digit3"}),qa({command:rn.CONTROL_ESCAPE,scope:on.EDITOR,execute:this.handleEscape},{code:"Esc"}),qa({command:rn.ACTION_DELETE_SELECTION,scope:on.EDITOR,execute:this.deleteSelection},{code:"Delete"}),qa({command:rn.ACTION_DUPLICATE_SELECTION,label:"Duplicate selected addition",configurable:!0,scope:on.EDITOR,execute:this.duplicateSelection},{code:"KeyD",ctrl:!0}),qa({command:rn.ACTION_SET_ADDITION_ON_GROUND,label:"Set selected addition on ground",configurable:!0,scope:on.EDITOR,execute:()=>{this.map&&this.selection.type===ya.ADDITION&&this.map.setAdditionOnGround(this.selection.id)}},{code:"KeyS",ctrl:!0}),qa({command:rn.ACTION_ENTER_PLAYTEST_MODE,label:"Enter play mode",configurable:!0,scope:on.EDITOR,execute:this.enterPlaytestMode},{code:"F5"}),qa({command:rn.ACTION_FOCUS_SELECTION_IN_VIEW,label:"Focus selection in view",configurable:!0,scope:on.EDITOR,execute:this.focusSelectionInView},{code:"KeyF",ctrl:!0,shift:!0})}enterIntroScope(){this.inputController.setScope(on.INTRO)}exitIntroScope(){this.inputController.setScope(on.EDITOR)}setCam(e){sn(_a.SetCam,e)}focusInView(e,t){sn(_a.FocusInView,{cam:e,lookAt:t})}isAdditionSelected(e){return this.selection.type===ya.ADDITION&&this.selection.id===e}isPatchSelected(e,t){return this.selection.type===ya.PATCH&&(this.selection.mapdata===bn(e)&&this.selection.entity===bn(t))}createInputController(e){this.inputController=new En(e,this.setGizmoControlActive,this.selectEntityAtCursor),this.inputController.onEscapeFullControl(this.enterEditorMode)}destroyInputController(){this.updateSelection({type:ya.NONE}),this.inputController&&this.inputController.destroy()}updateEditorControls(){setWorldEditorControls(this.editorSelect,this.editorMode,this.editorLocal)}};var Ln=a(160),Mn=a.n(Ln);const Fn=o.a.memo((function({name:e,path:t,onClose:a}){const[n,r]=o.a.useState(e),l=o.a.useCallback(()=>{const e={entryPath:t,newName:n+".fxworld"};Object(pe.c)(le.g.renameEntry,e),a()},[t,n,a]);return o.a.createElement(Ue,{onClose:a},o.a.createElement("div",{className:Mn.a.root},o.a.createElement("div",{className:"modal-header"},'Rename "',e,'" Map'),o.a.createElement(re,{autofocus:!0,pattern:He,onChange:r,onSubmit:l,value:n,className:Mn.a["name-input"]}),o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{theme:"primary",text:"Rename map",onClick:l,disabled:!n}),o.a.createElement(J,{text:"Cancel",onClick:a}))))}));function Gn(e){const{enabled:t,running:a=!1}=e,n=p()(ia.a.state,{[ia.a.enabled]:t,[ia.a.running]:a});return o.a.createElement("div",{className:n})}const Un=(e,t="")=>{const a=Array.isArray(e)?e.reduce((e,t)=>({...e,...t}),{}):e;return e=>{const n=(e=>p()(a[t],Object.keys(e).reduce((t,n)=>("props"===n||"children"===n||(t[a[n]]=e[n]),t),{})))(e),r={...e.props||{},className:n};return o.a.createElement("div",{...r},e.children)}};var Hn=a(97),Bn=a.n(Hn),Wn=a(200),Yn=a.n(Wn);function Kn(e){const t="string"===typeof e.combination?e.combination:Ha(e.combination),a=p()(Yn.a.root,e.className);return o.a.createElement("div",{className:a},t)}const Vn=Un(Bn.a,"root"),zn=De("title-outlet");function Xn(e,t,[a,n]){const o=e?a:a+16;return{top:(e?n:n-20)+"px",left:o+"px",maxWidth:`calc(100vw - ${o}px - 10px)`,animationDelay:t+"ms"}}const Jn=Object(d.a)((function(e){const{title:t,children:a,shortcut:n,animated:r=!0,fixedOn:l,delay:i=250}=e,s=o.a.useRef(l);s.current=l;const c=o.a.useRef(null),[d,m]=o.a.useState(!1),[u,h]=o.a.useState([0,0]),E=o.a.useRef(d);E.current=d;const g=o.a.useRef(null),b=o.a.useRef(null);o.a.useEffect(()=>{const e=e=>{E.current&&!s.current&&h([e.clientX,e.clientY])},t=e=>{if(!c.current)return;if(c.current===e.target||c.current.contains(e.target)){if(null!==b.current&&(clearTimeout(b.current),b.current=null),null!==g.current)return;g.current=setTimeout(()=>{s.current&&c.current&&h(function(e,t){const{x:a,y:n,width:o,height:r}=e.getBoundingClientRect();let l,i;switch(t){case"top":l=a+o/2,i=n-10;break;case"bottom":l=a+o/2,i=n+r+10;break;case"bottom-left":l=a,i=n+r+10;break;case"left":l=a-10,i=n+r/2;break;case"right":l=a+o+10,i=n+r/2}return[l,i]}(c.current,s.current)),m(!0),E.current=!0,g.current=null},0)}},a=e=>{if(!c.current)return;if(c.current===e.target||c.current.contains(e.target)){if(null!==g.current&&(clearTimeout(g.current),g.current=null),null!==b.current)return;b.current=setTimeout(()=>{m(!1),E.current=!1,b.current=null},0)}};return document.body.addEventListener("mousemove",e),document.body.addEventListener("mouseover",t),document.body.addEventListener("mouseout",a),()=>{null!==g.current&&clearTimeout(g.current),null!==b.current&&clearTimeout(b.current),document.body.removeEventListener("mousemove",e),document.body.removeEventListener("mouseover",t),document.body.removeEventListener("mouseout",a)}},[]);let f=null;if(d){const e=p()(Bn.a.wrapper,Bn.a["fixed-on-"+l],{[Bn.a.animated]:r});f=o.a.createElement(zn,null,o.a.createElement("div",{className:e,style:Xn(!!l,i,u)},o.a.createElement(Vn,null,t),!!n&&o.a.createElement(Kn,{combination:n,className:Bn.a.shortcut})))}return o.a.createElement(o.a.Fragment,null,a(c),f)}));function qn(...e){return t=>{e.forEach(e=>{"function"===typeof e?e(t):null!=e&&(e.current=t)})}}var Zn=a(24);const $n=Object(Zn.a)("fxworld:recompile"),Qn={enabled:!1},eo=Object(d.a)((function(e){const{entry:t}=e,a=t.path,n=t.name,r=n.replace(".fxworld",""),l=_t.project.getAssetConfig(t.path,Qn),[i,s,c]=fe(!1),d=o.a.useContext(Dt),m=!!(null===l||void 0===l?void 0:l.enabled),u=o.a.useCallback(()=>{Dn.openMap(e.entry)},[a]),h=o.a.useCallback(()=>{const e={assetPath:a,config:{enabled:!m}};Object(pe.c)(le.g.setAssetConfig,e)},[a,m]),E=o.a.useCallback(()=>{_t.project.deleteEntryConfirmFirst(t.path,`Delete "${r}" map?`,()=>null)},[t,r]),g=o.a.useCallback(()=>{Object(pe.e)($n,n)},[n]),{requiredContextMenuItems:b}=Zt(e),f=o.a.useMemo(()=>[{id:"open",icon:W,text:"Open map",onClick:u},wt,{id:"toggle-enabled",icon:m?Y:K,text:m?"Disable map":"Enable map",onClick:h},{id:"recompile",text:"Recompile map",onClick:g},wt,{id:"delete",icon:I,text:"Delete map",disabled:d.disableAssetDelete,onClick:E},{id:"rename",icon:D,text:"Rename map",disabled:d.disableAssetRename,onClick:s},wt,...b],[d,m,b,h,u,E,s,g]),{isDragging:_,dragRef:C}=$t(t,ra),v=p()(sa.wrapper,{[sa.dragging]:_}),y=`${r} \u2022 ${l.enabled?"Enabled":"Disabled"}`;return o.a.createElement("div",{className:v},o.a.createElement(Jn,{title:y},e=>o.a.createElement(Pt,{ref:qn(e,C),className:p()(sa.item),activeClassName:sa.itemActive,onClick:u,items:f},o.a.createElement(Gn,{enabled:l.enabled}),o.a.createElement("div",{className:sa.itemIcon},W),o.a.createElement("div",{className:sa.itemTitle},r))),i&&o.a.createElement(Fn,{name:r,path:t.path,onClose:c}))}));var to=a(161),ao=a.n(to);const no=o.a.memo((function({name:e,path:t,onClose:a}){const[n,r]=o.a.useState(e),l=o.a.useCallback(()=>{const e={entryPath:t,newName:n};Object(pe.c)(le.g.renameEntry,e),a()},[t,n,a]);return o.a.createElement(Ue,{onClose:a},o.a.createElement("div",{className:ao.a.root},o.a.createElement("div",{className:"modal-header"},'Rename "',e,'" Resource'),o.a.createElement(re,{autofocus:!0,pattern:He,onChange:r,onSubmit:l,value:n,className:ao.a["name-input"]}),o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{theme:"primary",text:"Rename resource",onClick:l,disabled:!n}),o.a.createElement(J,{text:"Cancel",onClick:a}))))}));var oo=a(27);const ro=new class{constructor(){this.state=null,this.updateChannelsState=Object.create(null),this.clientConnected=!1,this.resourcesState=Object.create(null),this.setState=e=>{e===m.c.up?Object(pe.c)(le.h.ackResourcesState):e===m.c.down&&(this.resourcesState=Object.create(null)),this.state=e},this.setUpdateChannelsState=e=>{this.updateChannelsState=e},this.setResourcesState=e=>{this.resourcesState=e},Object(ue.d)(this),Object(pe.a)(le.h.state,this.setState),Object(pe.a)(le.h.updateChannelsState,this.setUpdateChannelsState),Object(pe.a)(le.h.resourcesState,this.setResourcesState),Object(ge.b)("server:sendCommand",e=>{this.sendCommand(e)}),Object(ge.b)("fxdk:startServer",()=>{this.startServer()})}ack(){var e;Object(pe.c)(le.h.ackState),Object(pe.c)(le.h.ackUpdateChannelsState),e="sdk:ackConnected",window.invokeNative("sendCommand",e)}isResourceRunning(e){return!!this.resourcesState[e]}get isUp(){return this.state===m.c.up}get isDown(){return this.state===m.c.down}get isBooting(){return this.state===m.c.booting}getUpdateChannelState(e){return null===e?null:this.updateChannelsState[e]}setClientConnected(e){this.clientConnected=e}startServer(){if(_t.hasProject){const e=_t.project,t="",a=dt(e);Object(pe.c)(le.g.startServer,{steamWebApiKey:t,tebexSecret:a})}}stopServer(){Object(pe.c)(le.g.stopServer)}toggleServer(){this.isUp&&this.stopServer(),this.isDown&&this.startServer()}sendCommand(e){Object(pe.c)(le.h.sendCommand,e)}checkForUpdates(e){Object(pe.c)(le.h.checkForUpdates,e)}installUpdate(e){Object(pe.c)(le.h.checkForUpdates,e)}};var lo=a(201),io=a.n(lo),so=a(202),co=a.n(so),mo=(a(264),a(203)),uo=a.n(mo);const po=n.memo((function(e){const{className:t,children:a,...o}=e,r=p()(uo.a.root,t);return n.createElement(co.a,{className:r,...o},a)})),ho=new class{constructor(){this.channelOutput=Object.create(null),this.channelLabels=Object.create(null),this.appendChannelOutput=({channelId:e,data:t})=>{this.channelOutput[e]=this.getOutput(e)+t},this.setChannelLabel=({channelId:e,label:t})=>{this.channelLabels[e]=t},this.flushChannel=({channelId:e})=>{delete this.channelOutput[e],delete this.channelLabels[e]},Object(ue.d)(this),Object(pe.a)(le.f.output,this.appendChannelOutput),Object(pe.a)(le.f.outputLabel,this.setChannelLabel),Object(pe.a)(le.f.flush,this.flushChannel)}getOutput(e){return this.channelOutput[e]||""}getLabel(e){return this.channelLabels[e]}};var Eo=a(204),go=a.n(Eo);const bo=new io.a({newline:!0,colors:{0:"#5F5F5F",1:"#D96468",2:"#A2D964",3:"#D9C964",4:"#64A2D9",5:"#9A64D9",6:"#64D9D5",7:"#989898",8:"#828282",9:"#D98F93",10:"#B8D98F",11:"#D9CF8F",12:"#8F99D9",13:"#B08FD9",14:"#8FD9D5",15:"#C5C5C5"}}),fo=Object(d.a)((function({channelId:e,className:t}){const a=ho.getOutput(e),[o,r,l]=fe(!1),i=n.useRef();n.useLayoutEffect(()=>{const e=i.current;e&&!o&&(e.scrollTop=e.scrollHeight-e.clientHeight)},[a,o]);const s=n.useMemo(()=>bo.toHtml(a),[a]);return n.createElement(po,{onScrollUp:r,onYReachEnd:l,containerRef:e=>i.current=e,className:p()(go.a.root,t),dangerouslySetInnerHTML:{__html:s}})}));var _o=a(162),Co=a.n(_o);const vo=function(e){const{value:t,options:a,onChange:o,disabled:r=!1,className:l}=e,i=n.useCallback(({target:e})=>o(e.value),[o]),s=p()(Co.a.root,l,{[Co.a.disabled]:r});return n.createElement("select",{className:s,value:t,onChange:i},a.map(e=>n.createElement("option",{key:e.value,value:e.value},e.title)))};var yo=a(139),Oo=a.n(yo);const No=Object(d.a)((function(e){const{onClose:t,resourceName:a,resourceStatus:o}=e,{watchCommands:r}=o,l=n.useMemo(()=>Object.values(r).map(({outputChannelId:e})=>e),[r]),[i,s]=n.useState(l[0]||""),c=n.useMemo(()=>l.map(e=>({value:e,title:ho.getLabel(e)||e})),[l]);return n.createElement(Ue,{fullWidth:!0,onClose:t},n.createElement("div",{className:Oo.a.root},n.createElement("div",{className:"modal-header"},"Resource ",a," commands outputs"),n.createElement("div",{className:"modal-label"},"Command"),n.createElement(vo,{value:i,onChange:s,options:c,className:Oo.a.select}),n.createElement(fo,{channelId:i,className:Oo.a.output}),n.createElement("div",{className:"modal-actions"},n.createElement(J,{text:"Close",onClick:t}))))}));var To,Ao=a(163),So=a.n(Ao);!function(e){e.MAP_HIPSTER="map-hipster",e.MAP_SKATER="map-skater",e.BASIC_GAMEMODE="basic-gamemode",e.MONEY="money",e.MONEY_FOUNTAIN="money-fountain",e.MONEY_FOUNTAIN_EXAMPLE_MAP="money-fountain-example-map",e.PED_MONEY_DROPS="ped-money-drops",e.EXAMPLE_LOADSCREEN="example-loadscreen",e.CHAT="chat",e.CHAT_THEME_GTAO="chat-theme-gtao",e.PLAYER_DATA="player-data",e.PLAYER_NAMES="playernames",e.MAP_MANAGER="mapmanager",e.SPAWN_MANAGER="spawnmanager",e.WEBPACK="webpack",e.YARN="yarn",e.BASE_EVENTS="baseevents",e.HARD_CAP="hardcap",e.RCON_LOG="rconlog",e.RUNCODE="runcode",e.SESSION_MANAGER="sessionmanager"}(To||(To={}));Object.freeze({[To.MAP_HIPSTER]:"[gamemodes]/[maps]/fivem-map-hipster",[To.MAP_SKATER]:"[gamemodes]/[maps]/fivem-map-skater",[To.BASIC_GAMEMODE]:"[gamemodes]/basic-gamemode",[To.MONEY]:"[gameplay]/[examples]/money",[To.MONEY_FOUNTAIN]:"[gameplay]/[examples]/money-fountain",[To.MONEY_FOUNTAIN_EXAMPLE_MAP]:"[gameplay]/[examples]/money-fountain-example-map",[To.PED_MONEY_DROPS]:"[gameplay]/[examples]/ped-money-drops",[To.EXAMPLE_LOADSCREEN]:"[test]/example-loadscreen",[To.CHAT]:"[gameplay]/chat",[To.CHAT_THEME_GTAO]:"[gameplay]/chat-theme-gtao",[To.PLAYER_DATA]:"[gameplay]/player-data",[To.PLAYER_NAMES]:"[gameplay]/playernames",[To.MAP_MANAGER]:"[managers]/mapmanager",[To.SPAWN_MANAGER]:"[managers]/spawnmanager",[To.WEBPACK]:"[system]/[builders]/webpack",[To.YARN]:"[system]/[builders]/yarn",[To.BASE_EVENTS]:"[system]/baseevents",[To.HARD_CAP]:"[system]/hardcap",[To.RCON_LOG]:"[system]/rconlog",[To.RUNCODE]:"[system]/runcode",[To.SESSION_MANAGER]:"[system]/sessionmanager"}),Object.freeze({[To.CHAT]:[To.YARN,To.WEBPACK],[To.CHAT_THEME_GTAO]:[To.CHAT],[To.MONEY_FOUNTAIN]:[To.MAP_MANAGER,To.MONEY],[To.MONEY_FOUNTAIN_EXAMPLE_MAP]:[To.MONEY_FOUNTAIN]});const ko=Object.freeze({[To.MAP_HIPSTER]:"Map hipster",[To.MAP_SKATER]:"Map skater",[To.BASIC_GAMEMODE]:"Basic gamemode",[To.CHAT]:"Chat",[To.CHAT_THEME_GTAO]:"GTA:O chat theme",[To.PLAYER_DATA]:"Player data",[To.PLAYER_NAMES]:"Player names",[To.MAP_MANAGER]:"Map manager",[To.SPAWN_MANAGER]:"Spawn manager",[To.WEBPACK]:"Webpack builder",[To.YARN]:"Yarn builder",[To.BASE_EVENTS]:"Base events",[To.HARD_CAP]:"Hard cap",[To.RCON_LOG]:"RCON log",[To.RUNCODE]:"Runcode",[To.SESSION_MANAGER]:"Session manager"}),Ro={disableAssetCreate:!0},jo={enabled:!1,restartOnChange:!1},xo=Object(d.a)((function(e){const{entry:t,project:a}=e,n=_t.project.getAssetConfig(t.path,jo),r=oo.a.getResourceStatus(t.path),l=a.manifest.systemResources.includes(t.name),i=o.a.useContext(Dt),{renderItemControls:s,contextMenuItems:c,requiredContextMenuItems:d,renderItemChildren:m}=Zt({...e,childrenCollapsed:!0}),{expanded:u,toggleExpanded:E}=qt(t.path),[g,b,f]=fe(!1),_=o.a.useCallback(()=>{_t.project.deleteEntryConfirmFirst(t.path,`Delete resource "${t.name}"?`,()=>null)},[t]),{resourceIsRunning:C,resourceIsEnabled:v,lifecycleContextMenuItems:y,commandsOutputOpen:O,closeCommandsOutput:A}=function(e,t,a,n){const r=e.name,l=e.path,[i,s,c]=fe(!1),d=!ro.isUp,m=ro.isResourceRunning(r),u=!!(null===t||void 0===t?void 0:t.enabled),p=!!(null===t||void 0===t?void 0:t.restartOnChange),E=o.a.useCallback(()=>{const e={assetPath:l,config:{enabled:!u}};Object(pe.c)(le.g.setAssetConfig,e)},[l,u]),g=o.a.useCallback(()=>{const e={assetPath:l,config:{restartOnChange:!p}};Object(pe.c)(le.g.setAssetConfig,e)},[l,p]),b=o.a.useCallback(()=>{Object(pe.c)(le.h.restartResource,r)},[r]),f=o.a.useCallback(()=>{Object(pe.c)(le.h.stopResource,r)},[r]),_=o.a.useCallback(()=>{Object(pe.c)(le.h.startResource,r)},[r]),C=o.a.useMemo(()=>{const e=[];m?e.push({id:"stop",icon:G,text:"Stop",disabled:d||n,onClick:f},{id:"restart",icon:F,text:"Restart",disabled:d||n,onClick:b}):e.push({id:"Start",icon:U,text:"Start",disabled:d||n,onClick:_});const t=[];return Object.values(a.watchCommands).length&&t.push(wt,{id:"open-watch-commands-output",icon:o.a.createElement(h.A,null),text:"Watch commands output",onClick:s}),[...e,wt,{id:"toggle-enabled",icon:u?T:N,text:u?"Disable resource":"Enable resource",disabled:n,onClick:E},{id:"toggle-autorestart-enabled",icon:p?Y:K,text:p?"Disable restart on change":"Enable restart on change",disabled:n,onClick:g},...t]},[d,r,a,m,u,p,f,b,_,s,n]);return{resourceIsEnabled:u,resourceIsRunning:m,lifecycleContextMenuItems:C,commandsOutputOpen:i,closeCommandsOutput:c}}(t,n,r,l),S=aa(t),k=o.a.useMemo(()=>[...y,wt,...S,wt,{id:"delete",icon:I,text:"Delete resource",disabled:i.disableAssetDelete,onClick:_},{id:"rename",icon:D,text:"Rename resource",disabled:i.disableAssetRename,onClick:b},wt,...c,wt,...d],[y,c,i,_,b,S,d]),R=m(),{isDragging:j,isDropping:x,dragRef:w,dropRef:P}=ea(t,ra,[na,oa,kt.b.FILE]),L=p()(sa.wrapper,{[sa.dropping]:x,[sa.dragging]:j}),M=l?`"${ko[t.name]}" is enabled, this resource will be ignored. Either rename this resource or disable "${ko[t.name]}" in Project Settings`:`${t.name} \u2022 ${v?"Enabled":"Disabled"}${C?" \u2022 Running":""}`;return o.a.createElement("div",{className:L,ref:P},o.a.createElement(Jn,{title:M},e=>o.a.createElement(Pt,{ref:qn(w,e),className:p()(sa.item),activeClassName:sa.itemActive,items:k,onClick:E},o.a.createElement(Gn,{enabled:v,running:C}),o.a.createElement(Po,{enabled:v,running:C,conflictingWithSystemResource:l}),o.a.createElement("div",{className:sa.itemTitle},t.name),o.a.createElement(wo,{resourceStatus:r}))),u&&o.a.createElement("div",{className:sa.children},s(),o.a.createElement(Lt,{options:Ro},R)),g&&o.a.createElement(no,{path:t.path,name:t.name,onClose:f}),O&&o.a.createElement(No,{onClose:A,resourceName:t.name,resourceStatus:r}))})),wo=o.a.memo((function({resourceStatus:e}){const t=Object.values(e.watchCommands),a=t.length?o.a.createElement("div",{className:sa.itemStatusEntry,title:"Watch commands: running / declared"},o.a.createElement(h.A,null)," ",t.filter(e=>e.running).length,"/",t.length):null;return o.a.createElement("div",{className:sa.itemStatus},a)})),Po=o.a.memo((function({enabled:e,running:t,conflictingWithSystemResource:a}){if(a)return o.a.createElement("span",{className:p()(sa.itemIcon,So.a.conflicting)},o.a.createElement(h.t,null));const n=e?T:O,r=p()(sa.itemIcon,{[So.a.running]:t});return o.a.createElement("span",{className:r},n)}));const Io={[Je]:xo,[qe]:eo};var Do=a(205),Lo=a(82),Mo=a.n(Lo);const Fo=e=>{const{entry:t}=e,a=oo.a.getFeature(m.b.worldEditor),n=_t.project.assetTypes[t.path];if(n&&(n!==qe||a)){const a=Io[n];if(a)return o.a.createElement(a,{key:t.path,...e})}return t.isFile?o.a.createElement(ba,{key:t.path,...e}):t.isDirectory?o.a.createElement(ua,{key:t.path,...e}):void 0},Go=e=>".fxserver"!==e.name&&(".fxdk"!==e.name&&("fxproject.json"!==e.name&&!Vt(e.name))),Uo=Object(d.a)((function(){const e=_t.project,t=o.a.useCallback(t=>{_t.directoryCreatorUI.close(),t&&Object(pe.c)(le.g.createDirectory,{directoryPath:e.path,directoryName:t})},[e.path]),a=o.a.useCallback(()=>{_t.openResourceCreator(e.path)},[e.path]),n=e.fs[e.path].filter(Go).sort(Xt).map(t=>Fo({entry:t,project:e,pathsMap:e.fs,itemRenderer:Fo,creatorClassName:Mo.a.creator})),r=o.a.useMemo(()=>[{id:"new-resource",icon:x,text:"New resource",onClick:a},{id:"new-directory",icon:w,text:"New directory",onClick:_t.directoryCreatorUI.open}],[a]),{isDropping:l,dropRef:i}=Qt(_t.project.entry,[ra,na,oa,kt.b.FILE]),s=p()(Mo.a.root,{[Mo.a.dropping]:l});return o.a.createElement(Yt,null,o.a.createElement(Pt,{className:s,items:r,ref:i},_t.directoryCreatorUI.isOpen&&o.a.createElement(Gt,{className:Mo.a.creator,onCreate:t}),n,!n.length&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Mo.a.empty},o.a.createElement(Do.a,null),o.a.createElement("div",null,"Looks pretty empty here :(",o.a.createElement("br",null),"Start by creating something new",o.a.createElement("br",null),"or import existing stuff!")),o.a.createElement("div",{className:Mo.a["quick-access"]},o.a.createElement("button",{onClick:()=>_t.openResourceCreator()},x,"New resource"),o.a.createElement("button",{onClick:_t.importerUI.open},P,"Import asset")))))}));var Ho=a(83),Bo=a.n(Ho);const Wo=(e,t)=>{var a;return(null===(a=t.find(t=>t.value===e))||void 0===a?void 0:a.description)||""},Yo=n.memo((function(e){const{value:t,options:a,onChange:o,className:r="",disabled:l=!1}=e,[i,s]=n.useState(Wo(t,a)),c=n.useMemo(()=>a.map((e,r)=>{const l=p()(Bo.a.option,{[Bo.a.active]:e.value===t});return n.createElement("div",{key:e.value,className:l,tabIndex:r,onClick:()=>{o(e.value)},onMouseEnter:()=>{s(e.description||"")},onMouseLeave:()=>{s(Wo(t,a))}},e.icon||null,e.label)}),[t,a,o,s]),d=p()(Bo.a.root,r,{[Bo.a.disabled]:l,[Bo.a.descripted]:i});return n.createElement("div",{className:d},c,i&&n.createElement("div",{className:Bo.a.description},i))}));var Ko=a(98),Vo=a.n(Ko);const zo={Maps:{[To.MAP_HIPSTER]:{name:"Map hipster",description:'Example spawn points for FiveM with a "hipster" model'},[To.MAP_SKATER]:{name:"Map skater",description:'Example spawn points for FiveM with a "skater" model'}},Builders:{[To.WEBPACK]:{name:"Webpack builder",description:o.a.createElement(o.a.Fragment,null,"Builds resources with webpack. To learn more: ",o.a.createElement("a",{href:"https://webpack.js.org"},"https://webpack.js.org"))},[To.YARN]:{name:"Yarn builder",description:o.a.createElement(o.a.Fragment,null,"Builds resources with yarn. To learn more: ",o.a.createElement("a",{href:"https://classic.yarnpkg.com"},"https://classic.yarnpkg.com"))}},Chat:{[To.CHAT]:{name:"Chat",description:"Provides baseline chat functionality using a NUI-based interface"},[To.CHAT_THEME_GTAO]:{name:"GTA:O chat theme",description:"A GTA Online-styled theme for the chat resource"}},"System managers":{[To.MAP_MANAGER]:{name:"Map manager",description:"A flexible handler for game type/map association"},[To.SPAWN_MANAGER]:{name:"Spawn manager",description:"Handles spawning a player in a unified fashion to prevent resources from having to implement custom spawn logic"},[To.SESSION_MANAGER]:{name:"Session manager",description:'Handles the "host lock" for non-OneSync servers'}},Basics:{[To.BASIC_GAMEMODE]:{name:"Basic gamemode",description:"A basic freeroam gametype that uses the default spawn logic from spawnmanager"},[To.BASE_EVENTS]:{name:"Base events",description:"Adds basic events for developers to use in their scripts. Some third party resources may depend on this resource"},[To.PLAYER_DATA]:{name:"Player data",description:"A basic resource for storing player identifiers"},[To.PLAYER_NAMES]:{name:"Player names",description:"A basic resource for displaying player names"}},Others:{[To.RCON_LOG]:{name:"RCON log",description:"Handles old-style server player management commands"},[To.RUNCODE]:{name:"Runcode",description:o.a.createElement(o.a.Fragment,null,"Allows server owners to execute arbitrary server-side or client-side JavaScript/Lua code.",o.a.createElement("br",null),o.a.createElement("strong",null,"Consider only using this on development servers"))},[To.HARD_CAP]:{name:"Hard cap",description:"Limits the number of players to the amount set by sv_maxclients in your server.cfg"}}};var Xo=a(61),Jo=a.n(Xo);const qo=Object(d.a)((function(){const e=Object.entries(zo).map(([e,t])=>{const a=Object.entries(t).map(([e,t])=>o.a.createElement("div",{key:e,onClick:()=>_t.project.toggleSystemResource(e),className:p()(Jo.a.resource,{[Jo.a.active]:_t.project.manifest.systemResources.includes(e)})},o.a.createElement("div",{className:Jo.a.row},o.a.createElement("div",{className:Jo.a.name},ko[e])),o.a.createElement("div",{className:Jo.a.description},t.description)));return o.a.createElement("div",{key:e,className:Jo.a.category},o.a.createElement("div",{className:"modal-label"},e,":"),o.a.createElement("div",{className:"modal-block"},o.a.createElement("div",{className:Jo.a.list},a)))});return o.a.createElement("div",{className:Jo.a.wrapper},e)}));var Zo=a(99),$o=a.n(Zo);const Qo=n.memo((function(e){const{value:t,items:a,onChange:o,className:r="",vertical:l=!1}=e,i=p()($o.a.root,r,{[$o.a.vertical]:l}),s=a.map(e=>{const a=p()($o.a.item,{[$o.a.active]:e.value===t});return n.createElement("div",{key:e.value,className:a,onClick:()=>o(e.value)},e.icon,e.label)});return n.createElement("div",{className:i},s,n.createElement("div",{className:$o.a.extender}))}));var er=a(118),tr=a.n(er);const ar=o.a.memo((function(e){const{value:t,onChange:a,label:n,disabled:r=!1,className:l}=e,i=o.a.useCallback(()=>{a(!t)},[t,a]),s=p()(tr.a.root,l,{[tr.a.disabled]:r,[tr.a["with-label"]]:!!n});return o.a.createElement("label",{className:s},o.a.createElement("input",{type:"checkbox",checked:t,onChange:i}),o.a.createElement("div",{className:tr.a.indicator}),n)})),nr=Object(d.a)((function({setting:e}){var t,a;const n=_t.project,[r,l,i,s,...c]=e,d=null!==(a=null===(t=n.manifest.variables)||void 0===t?void 0:t[l])&&void 0!==a?a:s,m=o.a.useCallback(e=>{Object(pe.c)(le.g.setVariable,{key:l,value:e+""})},[l]);if("CV_BOOL"===i){const e=e=>{m(e?"true":"false")};return o.a.createElement("div",{className:"modal-block"},o.a.createElement(ar,{value:"1"===d||"true"===d||!0===d,onChange:e,label:r}))}return"CV_STRING"===i?o.a.createElement("div",{className:"modal-block"},o.a.createElement(re,{value:d,onChange:m,label:r})):"CV_INT"===i?o.a.createElement("div",{className:"modal-block"},o.a.createElement(re,{value:d,onChange:m,label:r,pattern:/^[0-9]+$/})):"CV_PASSWORD"===i?o.a.createElement("div",{className:"modal-block"},o.a.createElement(re,{value:d,onChange:m,label:r,type:"password"})):"CV_MULTI"===i?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"modal-label"},r),o.a.createElement("div",{className:"modal-block"},o.a.createElement(Yo,{value:d,options:s.map(e=>({label:e[0],value:e[1]})),onChange:m}))):"CV_SLIDER"===i||"CV_COMBI"===i?o.a.createElement("div",{className:"modal-block"},o.a.createElement(re,{type:"range",value:d,combi:"CV_COMBI"===i,min:c[0],max:c[1],onChange:m,label:r})):o.a.createElement("span",null,"Unsupported type: ",i)})),or=Object(d.a)((function(){const e=_t.project.assetDefs,t=Object.entries(e).map(([e,t])=>t.convarCategories),a={};for(const n of t)if(n)for(const[e,t]of n){const[n,o]=t;a[e]?a[e].entries.push(...o):a[e]={subtitle:n,entries:o}}return o.a.createElement(o.a.Fragment,null,Object.entries(a).sort((e,t)=>e[0].localeCompare(t[0])).map(([e,t])=>o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"modal-category"},o.a.createElement("h1",null,e),t.subtitle&&o.a.createElement("h2",null,t.subtitle)),(e=>o.a.createElement(o.a.Fragment,null,e.map(e=>o.a.createElement(nr,{setting:e}))))(t.entries))))})),rr=[{value:m.e.latest,label:"Latest",description:"Use latest available server artifact version, for those who feel edgy"},{value:m.e.recommended,label:"Recommended",description:"Use server artifact of recommended version"},{value:m.e.optional,label:"Optional",description:"Use optional server artifact version"}],lr="resources",ir="variables",sr="buildOptions",cr=[{label:"Variables",value:ir,icon:n.createElement(g.c,null)},{label:"Resources",value:lr,icon:T},{label:"Build Options",value:sr,icon:f}],dr=Object(d.a)((function(){const e=_t.project,t=e.manifest.serverUpdateChannel,a=n.useCallback(e=>{Object(pe.c)(le.g.setServerUpdateChannel,e)},[]),[o,r]=ct(e),[l,i]=mt(e),[s,c]=it(e),[d,u]=st(e),[p,h]=(e=>rt(e,"useTxAdmin",!0))(e),[E,g]=n.useState(ir);let b;switch(E){case ir:b=n.createElement("div",null,n.createElement("div",{className:"modal-label"},"Server update channel:"),n.createElement("div",{className:"modal-block"},n.createElement(Yo,{value:t,options:rr,onChange:a})),n.createElement("div",{className:"modal-block modal-combine"},n.createElement(re,{type:"password",label:"Steam API key:",value:o,onChange:r,description:n.createElement(n.Fragment,null,"Used only for build. If you want to use Steam authentication \u2014 ",n.createElement("a",{href:"https://steamcommunity.com/dev/apikey"},"get a key"))}),n.createElement(re,{type:"password",label:"Tebex secret:",value:l,onChange:i,description:n.createElement("a",{href:"https://server.tebex.io/settings/servers"},"Get Tebex secret")})),n.createElement(or,null));break;case lr:b=n.createElement("div",null,n.createElement(qo,null));break;case sr:b=n.createElement("div",null,n.createElement("div",{className:"modal-label"},"Deploy options:"),n.createElement("div",{className:"modal-block"},n.createElement(ar,{value:s,onChange:c,label:"If possible, save previous build allowing build rollback"})),n.createElement("div",{className:"modal-block"},n.createElement(ar,{value:d,onChange:u,label:`Include ${m.e[e.manifest.serverUpdateChannel]} server artifact`})))}return n.createElement(Ue,{fullWidth:!0,fullHeight:!0,onClose:_t.settingsUI.close},n.createElement("div",{className:Vo.a.root},n.createElement("div",{className:Vo.a.left},n.createElement("div",{className:"modal-header"},"Project settings"),n.createElement(Qo,{className:Vo.a.tabs,value:E,items:cr,onChange:g,vertical:!0}),n.createElement("div",{className:Vo.a.actions},n.createElement(J,{text:"Close",onClick:_t.settingsUI.close}))),n.createElement("div",{className:Vo.a.right},b)))}));var mr;!function(e){e[e.VerifyingBuildSite=0]="VerifyingBuildSite",e[e.RunningBuildCommands=1]="RunningBuildCommands",e[e.PreparingBuildSite=2]="PreparingBuildSite",e[e.DeployingToBuildSite=3]="DeployingToBuildSite",e[e.Done=4]="Done"}(mr||(mr={}));var ur=a(84),pr=a.n(ur);const hr=n.memo((function(e){const{step:t,steps:a,className:o}=e,r=p()(pr.a.root,o),l=Object.entries(a).map(([e,a])=>{const o=parseInt(e,10),r=t===o,l=t>o,i=((e,t)=>e?n.createElement(oe,null):t?n.createElement(h.m,null):n.createElement(h.s,null))(r,l),s=p()(pr.a.step,{[pr.a.active]:r,[pr.a.passed]:l});return n.createElement("div",{key:`${e}-${a}`,className:s},n.createElement("div",{className:pr.a.icon},i),n.createElement("div",{className:pr.a.label},a))});return n.createElement("div",{className:r},l)}));var Er=a(37);const gr=Object(Er.c)("TaskState"),br=new class{constructor(){this.tasks={},this.setTasks=e=>{this.tasks=e.reduce((e,t)=>(e[t.id]=t,e),{})},this.addTask=e=>{if(this.tasks[e.id])return gr("Attempt to add task that already exist",e,this.tasks);this.tasks[e.id]=e},this.updateTask=e=>{this.tasks[e.id]?this.tasks[e.id]=e:gr("Can not update task as its index is unknown",e.id)},this.deleteTask=e=>{this.tasks[e]?delete this.tasks[e]:gr("Can not delete task as its index is unknown",e)},Object(ue.d)(this),Object(pe.a)(le.k.tasks,this.setTasks),Object(pe.a)(le.k.taskAdded,this.addTask),Object(pe.a)(le.k.taskChanged,this.updateTask),Object(pe.a)(le.k.taskDeleted,this.deleteTask)}get values(){return Object.values(this.tasks)}ack(){Object(pe.c)(le.k.ackTasks)}get(e){return this.tasks[e]||null}getAll(){return this.values}};var fr=a(68),_r=a.n(fr);const Cr=Object(d.a)((function(e){const{error:t}=e;return"generic"===t.type?n.createElement(n.Fragment,null,t.data):"assetBuildError"===t.type?n.createElement("div",{className:_r.a["asset-build-error"]},n.createElement("div",null,"Build command of ",t.data.assetName," asset has failed.",n.createElement("br",null),"Output of ",n.createElement("kbd",null,ho.getLabel(t.data.outputChannelId)||t.data.outputChannelId),":"),n.createElement(fo,{channelId:t.data.outputChannelId})):null})),vr={[mr.VerifyingBuildSite]:"Verifying build site",[mr.RunningBuildCommands]:"Running builds commands",[mr.PreparingBuildSite]:"Preparing build site",[mr.DeployingToBuildSite]:"Deploying to build site",[mr.Done]:"Done"},yr=Object(d.a)((function(){const e=_t.project,t=br.get("project:building"),a=!!t,[o,r]=n.useState(null);be(le.g.buildError,e=>{r(e)},[r]);const[l,i]=n.useState(!1),s=t?t.stage:l?9999:-1;n.useEffect(()=>{t&&!l&&i(!0)},[t,l,i]);const c=n.useCallback(()=>{t||_t.builderUI.close()},[t]),[d,u]=it(e),[p,E]=st(e),[g,b]=ct(e),[C,v]=mt(e),[y,O]=lt(e);n.useEffect(()=>{O(y)},[]);const N=n.useMemo(()=>({startPath:e.path,dialogTitle:"Select Project Build Folder..."}),[e.path]),T=Ce(N,e=>{e&&O(e)}),A=n.useCallback(()=>{Jt(y+"\\resources")},[y]),S=y?n.createElement(n.Fragment,null,y,"\\resources directory will be created containing project resources. \xa0",n.createElement("a",{onClick:A},"Open Build Path ",_)):"Select build folder",k=n.useCallback(()=>{i(!1),r(null),_t.buildProject({useVersioning:d,deployArtifact:p,steamWebApiKey:g,tebexSecret:C})},[i,r,d,p,g,C]),R=!a&&!!y;return n.createElement(Ue,{fullWidth:!0,onClose:c},n.createElement("div",{className:_r.a.root},n.createElement("div",{className:"modal-header"},"Project Builder"),n.createElement("div",{className:"modal-label"},"Build directory:"),n.createElement("div",{className:"modal-block"},n.createElement("div",{className:_r.a["folder-select"]},n.createElement(re,{noSpellCheck:!0,className:_r.a.input,value:y,onChange:O,placeholder:"Select build directory",disabled:a,description:S}),n.createElement(J,{className:_r.a.button,text:"Select",icon:n.createElement(h.h,null),disabled:a,onClick:T}))),n.createElement("div",{className:"modal-label"},"Deploy options:"),n.createElement("div",{className:"modal-block modal-combine"},n.createElement(ar,{value:d,onChange:u,label:"If possible, save previous build allowing build rollback"}),n.createElement(ar,{value:p,onChange:E,label:`Include ${m.e[e.manifest.serverUpdateChannel]} server artifact`})),n.createElement("div",{className:"modal-block"},n.createElement("div",{className:"panel panel-info"},n.createElement(h.t,null),"\xa0 Tip: limit what gets deployed for each resource with ",n.createElement("kbd",null,".fxdkignore")," file in resource root that follows ",n.createElement("kbd",null,".gitignore")," file syntax.")),!o&&n.createElement(n.Fragment,null,n.createElement("div",{className:"modal-label"},"Building steps:"),n.createElement("div",{className:"modal-block"},n.createElement(hr,{step:s,steps:vr}))),!!o&&n.createElement("div",{className:_r.a.error},n.createElement("div",{className:"modal-label"},"Building error:"),n.createElement("div",{className:"modal-block"},n.createElement(Cr,{error:o}))),n.createElement("div",{className:"modal-actions"},n.createElement(J,{theme:"primary",text:"Build",icon:f,disabled:!R,onClick:k}),n.createElement(J,{text:"Close",disabled:a,onClick:c}))))})),Or=e=>{const[t]=e.split("\\").map(e=>e.split("/")).flat().reverse();return t.replace(".git","")};var Nr=a(206),Tr=a.n(Nr),Ar=a(100),Sr=a.n(Ar);const kr=n.memo((function(e){const{info:t,checked:a,onClick:o}=e;if(!t.name)return null;const r=p()(Sr.a.root,{[Sr.a.checked]:a});return n.createElement("div",{className:r,onClick:o},n.createElement("div",{className:Sr.a.content},n.createElement("div",{className:Sr.a.title},t.name),!!t.body&&n.createElement("div",{className:Sr.a.description},n.createElement(Tr.a,{children:t.body}))))}));var Rr=a(29),jr=a.n(Rr);const xr=e=>e.isDirectory&&!e.meta.isResource,wr=ye(Ne,Oe,Te),Pr=Object(d.a)((function({onClose:e}){const t=_t.project,[a,o]=n.useState(""),[r,l]=n.useState(""),[i,s]=n.useState(t.path),c=n.useRef(""),[d,m]=n.useState(null),[u,h]=n.useState(!1),[E,g]=n.useState([]),[b,f]=n.useState(!1),_=n.useCallback(()=>{if(!a)return;const t=d&&E.find(e=>e.name===d);if(t){const e={importerType:$e,assetName:r,assetBasePath:i,data:{releaseUrl:t.downloadUrl}};Object(pe.c)(le.a.import,e)}else{const e={importerType:Ze,assetName:r,assetBasePath:i,data:{repoUrl:a}};Object(pe.c)(le.a.import,e)}e()},[a,r,i,e,E,d]),C=ve(le.d.fetchReleases,(e,t)=>{f(!1),m(null),t.success?g(t.releases):g([])}),v=n.useCallback(e=>{if(o(e),e){if(c.current===r){const t=e?Or(e):"";c.current=t,l(t)}const t={repoUrl:e};f(!0),C(t)}else m(null),g([])},[o,l,r,C]),y=n.useCallback(e=>{m(e),h(!1)},[m,h]),O=(n.useCallback(e=>{m(null),h(e)},[h,m]),i===t.path?"Location: project root":"Location: "+Se(t.path,i)),N=a&&r&&i&&(!(null===E||void 0===E?void 0:E.length)||d),T=E.map((e,t)=>n.createElement(kr,{key:e.name+t,info:e,onClick:()=>y(e.name),checked:d===e.name})),A=!!E.length;return n.createElement(n.Fragment,null,n.createElement("div",{className:"modal-label"},"Repository URL:"),n.createElement("div",{className:"modal-block"},n.createElement(re,{noSpellCheck:!0,showLoader:b,value:a,onChange:v})),n.createElement("div",{className:"modal-block"},n.createElement(re,{value:r,onChange:l,label:"Asset name:"})),A&&n.createElement(n.Fragment,null,n.createElement("div",{className:"modal-label"},"Select release:"),n.createElement("div",{className:"modal-block"},n.createElement(ar,{value:null===d,label:"Import repository as is",onChange:()=>m(null)})),n.createElement(po,{className:jr.a.releases},T)),n.createElement("div",{className:"modal-label"},O),n.createElement(Ie,{className:p()(jr.a.explorer,"modal-block"),baseEntry:t.entry,pathsMap:t.fs,selectedPath:i,onSelectPath:s,selectableFilter:xr,visibilityFilter:wr}),n.createElement("div",{className:"modal-actions"},n.createElement(J,{theme:"primary",text:"Import",onClick:_,disabled:!N}),n.createElement(J,{text:"Close",onClick:e})))}));var Ir=a(140),Dr=a.n(Ir);const Lr=n.memo((function(e){const{className:t,value:a,onChange:o,startPath:r="",dialogTitle:l="Select Folder...",buttonText:i="Select",buttonIcon:s=null,placeholder:c="",description:d="",disabled:m=!1,notOnlyFolders:u=!1,showLoader:h=!1}=e,E=n.useMemo(()=>({startPath:r,dialogTitle:l,notOnlyFolders:u}),[r,l,u]),g=Ce(E,e=>{e&&o(e)}),b=p()(Dr.a.root,t);return n.createElement("div",{className:b},n.createElement(re,{noSpellCheck:!0,className:Dr.a.input,value:a,onChange:o,placeholder:c,disabled:m,description:d,showLoader:h}),n.createElement(J,{className:Dr.a.button,text:i,icon:s,disabled:m,onClick:g}))})),Mr=e=>e.isDirectory&&!e.meta.isResource,Fr=ye(Ne,Oe,Te),Gr=Object(d.a)((function({onClose:e}){const t=_t.project,[a,o]=n.useState(""),[r,l]=n.useState(""),[i,s]=n.useState(t.path),c=a&&r&&i,d=n.useCallback(()=>{if(!c)return;const t={importerType:Qe,assetName:r,assetBasePath:i,data:{sourcePath:a}};Object(pe.c)(le.a.import,t),e()},[c,a,r,i,e]),m=n.useCallback(e=>{o(e);const t=Or(e);t&&!r&&l(t)},[o,l,r]),u=Se(t.path,i),h=i===t.path?"Location: project root":"Location: "+u;return n.createElement(n.Fragment,null,n.createElement("div",{className:"modal-label"},"Import from:"),n.createElement(Lr,{notOnlyFolders:!0,value:a,onChange:m,className:"modal-block"}),n.createElement("div",{className:"modal-block"},n.createElement(re,{value:r,onChange:l,label:"Asset name:",description:"If importing asset file, changing extension will change asset type, do not change it if unsure"})),n.createElement("div",{className:"modal-label"},h),n.createElement(Ie,{className:p()(jr.a.explorer,"modal-block"),baseEntry:t.entry,pathsMap:t.fs,selectedPath:i,onSelectPath:s,selectableFilter:Mr,visibilityFilter:Fr}),n.createElement("div",{className:"modal-actions"},n.createElement(J,{theme:"primary",text:"Import",onClick:d,disabled:!c}),n.createElement(J,{text:"Close",onClick:e})))})),Ur={[To.MONEY]:{name:"Money",description:"An example money system using key-value storage (KVS)"},[To.MONEY_FOUNTAIN]:{name:"Money fountain",description:o.a.createElement(o.a.Fragment,null,"An example money system client containing a money fountain",o.a.createElement("br",null),"Make sure to adjust dependencies file of ",o.a.createElement("kbd",null,"fxmanifest.lua")," if you have different name for money example",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("em",null,"Dependencies:")," money example and map manager (check Project Settings if it is enabled)")},[To.MONEY_FOUNTAIN_EXAMPLE_MAP]:{name:"Money fountain example map",description:o.a.createElement(o.a.Fragment,null,"An example money system fountain spawn point",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("em",null,"Dependencies:")," money fountain example")},[To.PED_MONEY_DROPS]:{name:"Ped money drops",description:"An example money system client"},[To.EXAMPLE_LOADSCREEN]:{name:"Loading screen",description:"An example custom loading screen"}},Hr=e=>e.isDirectory&&!e.meta.isResource,Br=ye(Ne,Oe,Te),Wr=Object(d.a)((function({onClose:e}){const{project:t}=_t,[a,n]=o.a.useState(),[r,l]=o.a.useState(""),[i,s]=o.a.useState(t.path),c=i===t.path?"Location: project root":"Location: "+Se(t.path,i),d=o.a.useCallback(()=>{if(!a||!r||!i)return;const t={importerType:et,assetName:r,assetBasePath:i,data:{exampleName:a}};Object(pe.c)(le.a.import,t),e()},[a,r,i,e]),m=Boolean(a&&r&&i),u=Object.entries(Ur).map(([e,t])=>o.a.createElement("div",{key:e,onClick:()=>n(e),className:p()(jr.a["example-resource"],{[jr.a.active]:e===a})},o.a.createElement("div",{className:jr.a.name},t.name),o.a.createElement("div",{className:jr.a.description},t.description)));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"modal-block"},o.a.createElement(re,{autofocus:!0,value:r,onChange:l,label:"Asset name:"})),o.a.createElement("div",{className:"modal-block"},o.a.createElement("div",{className:"panel panel-info"},o.a.createElement(h.t,null),"\xa0 Some examples depend on other examples and/or system resources, make sure all dependencies are satisfied \ud83d\ude0f")),o.a.createElement("div",{className:"modal-block"},o.a.createElement("div",{className:jr.a.examples},u)),o.a.createElement("div",{className:"modal-label"},c),o.a.createElement(Ie,{className:p()(jr.a.explorer,"modal-block"),baseEntry:t.entry,pathsMap:t.fs,selectedPath:i,onSelectPath:s,selectableFilter:Hr,visibilityFilter:Br}),o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{theme:"primary",text:"Import",onClick:d,disabled:!m}),o.a.createElement(J,{text:"Close",onClick:e})))})),Yr=[{label:"Import example",value:et},{label:"Import from Git repository",value:Ze},{label:"Import from file system on this PC",value:Qe}],Kr={[Ze]:Pr,[Qe]:Gr,[et]:Wr},Vr=Object(d.a)((function(){const[e,t]=n.useState(et),a=Kr[e];return n.createElement(Ue,{fullWidth:!0,onClose:_t.importerUI.close},n.createElement("div",{className:jr.a.root},n.createElement("div",{className:"modal-header"},"Import asset"),n.createElement("div",{className:"modal-block"},n.createElement(Qo,{value:e,items:Yr,onChange:t})),n.createElement(a,{onClose:_t.importerUI.close})))}));var zr=a(119),Xr=a.n(zr);const Jr=Object(d.a)((function(){const[e,t]=o.a.useState(""),[a,n]=o.a.useState(""),[r,l]=o.a.useState({});be(le.g.open,_t.creatorUI.close),be(le.g.checkCreateResult,e=>{l(e)},[l]);const i=_e((e,t)=>{if(!e||!t)return;const a={projectPath:e,projectName:t};Object(pe.c)(le.g.checkCreateRequest,a)},250),s=o.a.useCallback(()=>{if(a){const t={projectPath:a,projectName:e};Object(pe.c)(le.g.create,t)}},[e,a]),c=o.a.useCallback(t=>{n(t),i(t,e)},[e,n,i]),d=o.a.useCallback(e=>{t(e),i(a,e)},[a,t,i]),m=function(e,t){let a="Select a folder in which project will be created";return e&&(a="Project path: "+e,t&&(a+="\\"+t)),a}(a,e),u=a&&e;return o.a.createElement(Ue,{fullWidth:!0,onClose:_t.creatorUI.close},o.a.createElement("div",{className:Xr.a.root},o.a.createElement("h3",{className:"modal-header"},"Create New Project"),o.a.createElement("div",{className:Xr.a["name-input"]},o.a.createElement(re,{autofocus:!0,className:Xr.a.input,label:"Project name",placeholder:"Definitely not an RP project name",value:e,onChange:d,pattern:Be})),o.a.createElement("div",{className:Xr.a["explorer-hint"]},m),o.a.createElement("div",{className:"modal-block"},o.a.createElement(Lr,{value:a,onChange:c,placeholder:"Project path",dialogTitle:"Select folder in which project will be created...",buttonIcon:o.a.createElement(h.h,null)})),o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{theme:"primary",text:r.openProject?"Open":"Create",disabled:!u,onClick:s}),o.a.createElement(J,{text:"Cancel",onClick:_t.creatorUI.close}))))}));var qr=a(74),Zr=a.n(qr);const $r=o.a.memo((function({recentProject:e}){const t=o.a.useCallback(()=>{_t.openProject(e.path)},[e.path]),a=o.a.useCallback(()=>{Object(pe.c)(le.g.removeRecent,e.path)},[e.path]);return o.a.createElement("div",{className:Zr.a.root},o.a.createElement("div",{className:Zr.a.content,onClick:t},o.a.createElement("div",{className:Zr.a.icon},A),o.a.createElement("div",{className:Zr.a.info},o.a.createElement("div",{className:Zr.a.name},e.name),o.a.createElement("div",{className:Zr.a.path},e.path))),o.a.createElement("div",{className:Zr.a.actions},o.a.createElement(J,{theme:"transparent",icon:H,onClick:a,title:"Remove recent project from the list"})))}));var Qr=a(120),el=a.n(Qr);const tl=Object(d.a)((function(){const e=_t.hasProject?_t.project:null,[t,a]=o.a.useState(""),[n,r]=o.a.useState(!1),[l,i]=o.a.useState(!0),s=ve(le.g.checkOpenRequest,(e,t)=>{r(!1),i(t&&!e)}),c=o.a.useCallback(()=>{t&&l&&_t.openProject(t)},[t,l]),d=o.a.useCallback(e=>{r(!0),a(e),s(e)},[a,s,r]),m=_t.recentProjects.filter(t=>(null===e||void 0===e?void 0:e.path)!==t.path).map(e=>o.a.createElement($r,{key:e.path,recentProject:e}));return o.a.createElement(Ue,{fullWidth:!0,onClose:_t.openerUI.close},o.a.createElement("div",{className:el.a.root},o.a.createElement("div",{className:"modal-header"},"Open project"),!!m.length&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:el.a.label},"Recent projects"),o.a.createElement("div",{className:el.a.recents},m)),o.a.createElement("div",{className:el.a.label},"Choose project from filesystem"),o.a.createElement("div",{className:"modal-block"},o.a.createElement(Lr,{value:t,onChange:d,showLoader:n,description:!l&&"Path doesn't look like an FxDK project"})),o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{theme:"primary",text:"Open selected project",disabled:!t||!l,onClick:c}),o.a.createElement(J,{text:"Cancel",onClick:_t.openerUI.close}))))}));var al=a(355),nl=a(207),ol=a.n(nl);const rl=Object(d.a)((function(){const e=oo.a.getFeature(m.b.worldEditor);return o.a.createElement(o.a.Fragment,null,_t.creatorUI.isOpen&&o.a.createElement(Jr,null),_t.openerUI.isOpen&&o.a.createElement(tl,null),_t.hasProject&&_t.settingsUI.isOpen&&o.a.createElement(dr,null),_t.hasProject&&_t.builderUI.isOpen&&o.a.createElement(yr,null),_t.hasProject&&_t.importerUI.isOpen&&o.a.createElement(Vr,null),_t.hasProject&&_t.resourceCreatorUI.isOpen&&o.a.createElement(Nt,null),e&&_t.hasProject&&_t.mapCreatorUI.isOpen&&o.a.createElement(St,null),o.a.createElement("div",{className:ol.a.root},_t.hasProject&&o.a.createElement(al.a,{backend:kt.a},o.a.createElement(Uo,null))))}));var ll=a(101),il=a.n(ll);const sl=Object(d.a)((function({className:e}){const t=_t.project,a=ro.getUpdateChannelState(t.manifest.serverUpdateChannel),n=p()(il.a.root,e,{[il.a.up]:ro.isUp,[il.a.down]:ro.isDown,[il.a.booting]:ro.isBooting,[il.a.error]:a===m.d.missingArtifact});let r,l;if(a===m.d.ready)switch(!0){case ro.isUp:r=o.a.createElement(h.R,null),l="Stop server";break;case ro.isDown:r=o.a.createElement(h.M,null),l="Start server";break;case ro.isBooting:r=o.a.createElement(oe,null),l="Stop server"}else switch(a){case m.d.missingArtifact:r=o.a.createElement(h.u,null),l="Missing server artifact";break;case m.d.updateRequired:r=o.a.createElement(h.x,null),l="Install update";break;case m.d.checking:r=o.a.createElement(oe,null),l="Checking updates";break;case m.d.updating:r=o.a.createElement(oe,null),l="Updating"}const i=o.a.useCallback(()=>{if(t&&a===m.d.updateRequired)return ro.installUpdate(t.manifest.serverUpdateChannel);a===m.d.ready&&ro.toggleServer()},[t,a]);return o.a.createElement(Jn,{animated:!1,delay:0,title:l,fixedOn:"bottom"},e=>o.a.createElement("button",{ref:e,className:n,onClick:i},r))})),cl=Object(d.a)((function({className:e}){return n.createElement(Jn,{animated:!1,delay:0,fixedOn:"bottom",title:"Build project"},t=>n.createElement("button",{ref:t,className:e,disabled:!_t.hasProject,onClick:()=>_t.buildProject(),"data-tour-id":"project-build"},f))})),dl=Object(d.a)((function({className:e}){const t=_t.project,a=o.a.useCallback(()=>{t&&_t.openResourceCreator(t.path)},[t.path]);return o.a.createElement(Jn,{animated:!1,delay:0,title:"New resource",fixedOn:"right"},t=>o.a.createElement("button",{ref:t,className:e,onClick:a,"data-tour-id":"new-resource"},x))})),ml=o.a.memo((function({className:e}){return o.a.createElement(Jn,{animated:!1,delay:0,title:"New directory",fixedOn:"right"},t=>o.a.createElement("button",{ref:t,className:e,onClick:_t.directoryCreatorUI.open},w))})),ul=o.a.memo((function({className:e}){return o.a.createElement(Jn,{animated:!1,delay:0,fixedOn:"bottom",title:"Import asset"},t=>o.a.createElement("button",{ref:t,className:e,onClick:_t.importerUI.open},P))}));var pl=a(135);const hl=o.a.memo((function({className:e}){return o.a.createElement(Jn,{animated:!1,delay:0,title:"New map",fixedOn:"right"},t=>o.a.createElement("button",{ref:t,className:e,onClick:_t.mapCreatorUI.open},W))}));var El=a(44),gl=a.n(El);const bl=Object(d.a)((function(){const e=oo.a.getFeature(m.b.worldEditor);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Jn,{animated:!1,delay:0,fixedOn:"bottom",title:"Project settings"},e=>o.a.createElement("button",{ref:e,className:gl.a.item,onClick:_t.settingsUI.open},C)),o.a.createElement("div",{className:gl.a["item-stack"]},o.a.createElement("button",{className:gl.a.item},o.a.createElement(pl.a,{style:{fontSize:"1.1rem"}})),o.a.createElement("div",{className:gl.a.stack},o.a.createElement(ml,{className:gl.a.item}),o.a.createElement(dl,{className:gl.a.item}),e&&o.a.createElement(hl,{className:gl.a.item}))),o.a.createElement(ul,{className:gl.a.item}),o.a.createElement(cl,{className:gl.a.item}),o.a.createElement(sl,{className:gl.a.item}))}));function fl(e){return Math.max(250,Math.min(document.body.offsetWidth/2,e))}const _l=new class{constructor(){this.isOpen=!0,this.width=fl(parseInt(localStorage.toolbarWidth,0)||430),this.open=()=>this.isOpen=!0,this.close=()=>this.isOpen=!1,this.toggle=()=>this.isOpen=!this.isOpen,Object(ue.d)(this)}setWidth(e){this.width=fl(e),localStorage.toobarWidth=this.width}};var Cl=a(40),vl=a.n(Cl);const yl=Object(d.a)((function(){const[e,t]=n.useState(!1),a=_l.isOpen?"Collapse FxDK toolbar":"Expand FxDK toolbar",o=_l.isOpen?n.createElement(h.b,null):n.createElement(h.c,null),r=n.useRef(t);r.current=t;const l=n.useRef({x:0,down:!1,moved:!1});n.useEffect(()=>{const e=()=>{l.current.down&&(window.document.body.classList.remove("resize-sentinel-active"),r.current(!1),l.current.down=!1,l.current.moved=!1)},t=e=>{_l.isOpen&&l.current.down&&l.current.x!==e.screenX&&(l.current.moved=!0,_l.setWidth(_l.width+(e.screenX-l.current.x)),l.current.x=e.screenX)};return window.addEventListener("mouseup",e),window.addEventListener("mousemove",t),()=>{window.document.body.classList.remove("resize-sentinel-active"),window.removeEventListener("mouseup",e),window.removeEventListener("mousemove",t)}},[]);const i=n.useCallback(e=>{window.document.body.classList.add("resize-sentinel-active"),t(!0),l.current.down=!0,l.current.x=e.screenX},[t]),s=n.useCallback(()=>{l.current.down&&!l.current.moved&&_l.toggle()},[]),c=p()(vl.a.trigger,{[vl.a.resizing]:e});return n.createElement("button",{className:c,title:a,onMouseDown:i,onMouseUp:s},o)}));var Ol=a(208);const Nl={doneLabel:"Done",showBullets:!1,hidePrev:!0},Tl=[{element:".root",title:"Welcome to Fxdk",intro:"Fxdk is a code editor for FiveM. Create servers and resources with ease. Export and build all the files you will need to run a server when you are done.",tooltipClass:"customTooltip",highlightClass:"highlightClass"},{element:'button[data-tour-id="new-resource"]',title:"Create New Resources",intro:"Create new resources for your server. Try one of our starting templates for Lua, JS, or C#.",tooltipClass:"customTooltip",highlightClass:"highlightClass"},{element:'div[data-tour-id="toolbar"]',title:"File Explorer",intro:"When you create a new resource they will appear here in the file directory. Click here to open files to edit or create new files. Right click on resource folders to start, stop, or restart the game asset.",tooltipClass:"customTooltip",highlightClass:"highlightClass"},{element:'div[title="Start server"]',title:"Start Your Server",intro:"This will open a Game View for you to test your resources as you develop them. It opens as a tab in the code editor.",tooltipClass:"customTooltip",highlightClass:"highlightClass"},{element:'iframe[title="Theia personality"]',title:"The Code Editor",intro:"This section is for editing your files and testing in the Game View. Make adjustments and then restart your resources to test.",tooltipClass:"customTooltip",highlightClass:"highlightClass"},{element:'button[data-tour-id="project-build"]',title:"Build Project",intro:"When you are done editing your resources, build your server. Add Tebex store keys and Steam API keys. This will export everything you need to launch your customized server on FiveM!",tooltipClass:"customTooltip",highlightClass:"highlightClass"}];a(344),a(345);const Al=o.a.memo((function({tourVisible:e,setTourVisible:t}){const[a,n]=o.a.useState(!0);return e?o.a.createElement(Ol.Steps,{enabled:a,steps:Tl,initialStep:0,onExit:()=>{n(!1),setTimeout(()=>{t(!1),n(!0)},500)},options:Nl}):null}));var Sl=a(47),kl=a(85),Rl=a.n(kl);const jl=o.a.memo((function({item:e}){const t=p()(Rl.a.progress,{[Rl.a.indeterminate]:0===e.progress});return o.a.createElement("div",{className:Rl.a.root},o.a.createElement("div",{className:Rl.a.title},e.title,o.a.createElement("div",{className:Rl.a.text},e.text)),o.a.createElement("div",{className:t},o.a.createElement("div",{className:Rl.a.bar,style:{width:100*e.progress+"%"}})))}));var xl=a(58),wl=a(51),Pl=a.n(wl);const Il={[xl.a.info]:o.a.createElement(h.F,null),[xl.a.warning]:o.a.createElement(h.w,null),[xl.a.error]:o.a.createElement(h.v,null)},Dl=o.a.memo((function({item:e}){const t=p()(Pl.a.root,Pl.a[xl.a[e.type]]),a=o.a.useCallback(()=>{Sl.a.delete(e.id)},[e]);return o.a.createElement("div",{className:t},!!e.animationDuration&&o.a.createElement("div",{className:Pl.a.progress,style:{animationDuration:e.animationDuration}}),o.a.createElement("div",{className:Pl.a.content},o.a.createElement("div",{className:Pl.a.icon},Il[e.type]),o.a.createElement("div",{className:Pl.a.text,dangerouslySetInnerHTML:{__html:e.text.replace(/\n/g,"<br>")}})),o.a.createElement("div",{className:Pl.a.actions},o.a.createElement("div",{className:p()(Pl.a.close,Pl.a.button),onClick:a},o.a.createElement(h.V,null))))}));var Ll=a(141),Ml=a.n(Ll);const Fl=o.a.forwardRef(({onClose:e},t)=>(((e,t)=>{const a=o.a.useRef(t);a.current=t;const n=t=>{e.current&&!e.current.contains(t.target)&&a.current()};o.a.useEffect(()=>(document.addEventListener("click",n),()=>document.removeEventListener("click",n)))})(t,e),o.a.useEffect(()=>(he.enableIframeCover(),()=>he.disableIframeCover()),[]),null)),Gl=Object(d.a)((function(e){const{onClose:t,className:a}=e,n=o.a.useRef(null),r=br.values,l=Sl.a.values,i=e.open||l.length>0;if(!i)return n.current=null,null;const s=p()(Ml.a.root,a,{[Ml.a.open]:i});return o.a.createElement(o.a.Fragment,null,o.a.createElement(Fl,{ref:n,onClose:t}),o.a.createElement("div",{ref:n,className:s},!l.length&&!r.length&&o.a.createElement("div",{className:Ml.a.placeholder},"No notifications or tasks!"),l.map(e=>o.a.createElement(Dl,{key:e.id,item:e})),r.map(e=>o.a.createElement(jl,{key:e.id,item:e}))),e.decorator)}));var Ul=a(102),Hl=a.n(Ul);const Bl=Object(d.a)((function(){const e=br.values,[t,a,n,r]=fe(!1),l=e.length>0,i=function(e){let t="";return 1===e.length?(t=e[0].title,e[0].text&&(t+=": "+e[0].text)):e.length>1&&(t=e[0].title+` and ${e.length-1} more...`),t}(e);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Hl.a.root,title:"Notifications & background tasks",onClick:r},o.a.createElement("div",{className:Hl.a.icon},l?o.a.createElement(oe,null):o.a.createElement(h.J,null)),o.a.createElement("div",{className:Hl.a.title},i)),o.a.createElement(Gl,{open:t,onClose:n,className:Hl.a["status-center"],decorator:o.a.createElement("div",{className:Hl.a["status-center-decorator"]},o.a.createElement(g.d,null))}))}));function Wl(e){const t=e.toLowerCase(),a=new Uint32Array(1);for(const n in t)a[0]+=t.charCodeAt(n),a[0]+=a[0]<<10,a[0]^=a[0]>>>6;return a[0]+=a[0]<<3,a[0]^=a[0]>>>11,a[0]+=a[0]<<15,a[0]}const Yl=o.a.memo((function({close:e}){const[t,a]=o.a.useState("");return o.a.createElement(Ue,{onClose:e},o.a.createElement("div",{className:"modal-header"},"JOAAT32 HASHER"),o.a.createElement("div",{className:"modal-block"},o.a.createElement(re,{autofocus:!0,value:t,onChange:a})),o.a.createElement("div",{className:"modal-block"},"Hash:\xa0",o.a.createElement("code",null,Wl(t).toString(16).toUpperCase())),o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{text:"Close",onClick:e})))})),Kl=e=>e(),Vl=()=>({top:0,left:0}),zl=Object(d.a)((function(){const{tourVisible:e,setTourVisible:t}=(()=>{const[e,t]=o.a.useState(!1);return o.a.useEffect(()=>{!localStorage.getItem("firstLaunch")&&_t.hasProject&&(t(!0),localStorage.setItem("firstLaunch","false"))},[_t.hasProject]),{tourVisible:e,setTourVisible:t}})(),[a,n,r]=fe(!1),l=p()(vl.a.root,{[vl.a.active]:_l.isOpen}),i=o.a.useMemo(()=>[{id:"open-project",text:"Open Project",icon:y,onClick:_t.openerUI.open},{id:"new-project",text:"New Project",icon:v,onClick:_t.creatorUI.open},..._t.hasProject?[wt,{id:"project-settings",text:"Project settings",icon:C,onClick:_t.settingsUI.open},{id:"build-project",text:"Build Project",icon:f,onClick:_t.builderUI.open}]:[],wt,{id:"changelog",text:"Changelog",icon:o.a.createElement(h.k,null),onClick:he.openChangelog},wt,{id:"hasher",text:"Hasher",icon:o.a.createElement(h.E,null),onClick:n},{id:"dev-tools",text:"DevTools",icon:b,onClick:()=>window.openDevTools()},wt,{id:"tour",text:"Tour",icon:B,onClick:()=>t(!0)},wt,{id:"restart-game",text:"Restart game",icon:o.a.createElement(g.a,null),onClick:ut.a.restart}],[_t.hasProject]),s={"--toolbar-width":_l.width+"px"},c=p()(vl.a.pane,{[vl.a.active]:he.isTheia});return o.a.createElement("div",{style:s,className:l,"data-tour-id":"toolbar"},o.a.createElement(yl,null),o.a.createElement("div",{className:vl.a["tools-bar"]},o.a.createElement("div",{className:vl.a.controls},o.a.createElement(Pt,{items:i,onClick:Kl,getCoords:Vl},o.a.createElement(Jn,{animated:!1,delay:0,title:"Menu",fixedOn:"bottom-left"},e=>o.a.createElement("button",{ref:e,className:vl.a.menu},o.a.createElement(h.I,null)))),o.a.createElement("div",{className:vl.a["project-name"],title:_t.projectName},o.a.createElement("span",null,_t.projectName)),_t.hasProject&&he.isTheia&&o.a.createElement(bl,null)),o.a.createElement("div",{className:c,title:""},o.a.createElement(po,null,o.a.createElement(rl,null))),o.a.createElement(Bl,null),o.a.createElement(Al,{tourVisible:e,setTourVisible:t}),a&&o.a.createElement(Yl,{close:r})))}));var Xl=a(103),Jl=a.n(Xl);const ql=Object(d.a)((function(){const[e,t]=o.a.useState(!1);return o.a.useEffect(()=>{const e=setTimeout(()=>t(!0),500);return()=>clearTimeout(e)},[]),o.a.createElement("div",{className:p()(Jl.a.root,"animated-background",{[Jl.a.active]:e})},o.a.createElement("div",{className:Jl.a.header},o.a.createElement("h1",null,"Welcome to FxDK"),o.a.createElement("span",null,"The reordered future of Cfx.re platform development")),!!_t.recentProjects.length&&o.a.createElement("div",{className:Jl.a["recent-projects"]},_t.recentProjects.map(e=>o.a.createElement($r,{key:e.path,recentProject:e}))),o.a.createElement("div",{className:Jl.a.controls},o.a.createElement(J,{text:"Create New Project",theme:"primary",onClick:_t.creatorUI.open}),o.a.createElement(J,{text:"Open Project",onClick:_t.openerUI.open})))}));var Zl=a(131),$l=a(60),Ql=a.n($l);const ei=n.memo((function(e){return n.createElement("div",{className:Ql.a.entry,style:{opacity:e.old?.5:1}},n.createElement("div",{className:Ql.a.title},e.title),n.createElement("div",{className:Ql.a.content},e.content))})),ti=n.memo((function(){const e=ie.map((e,t)=>0===t?n.createElement(n.Fragment,{key:e.id},n.createElement(ei,{key:e.id,...e}),n.createElement("div",{className:Ql.a.older},"Older entries")):n.createElement(ei,{old:!0,key:e.id,...e}));return n.createElement(po,{className:Ql.a.root},e)}));var ai=a(52),ni=a.n(ai);const oi={completed:0,currentFileName:""},ri=n.createElement("ul",null,n.createElement("li",null,"Preparing FxDK"),n.createElement("li",null,"Unwrapping singularity"),n.createElement("li",null,"Merging black holes"),n.createElement("li",null,"Asserting dominance"),n.createElement("li",null,"Fixing bugs"),n.createElement("li",null,"Almost there"),n.createElement("li",null,"Why are we here"),n.createElement("li",null,"What is the point?"),n.createElement("li",null,"Okay, this takes way too much time \ud83d\ude12"),n.createElement("li",null,n.createElement(h.e,null))),li=n.createElement("ul",null,n.createElement("li",null,"FxDK is ready!")),ii=Object(d.a)((function(){const e=oo.a.get(Zl.b.state,oi),t=n.useCallback(()=>{he.closeUpdater(),ce()},[]),a=he.appState===m.a.ready,o=p()(ni.a.root,{[ni.a.shrimp]:a}),r=a?li:ri;return n.createElement("div",{className:o},n.createElement("div",{className:ni.a.content},n.createElement("h1",{className:ni.a.title},r),n.createElement("div",{className:ni.a.progress},n.createElement("div",{className:ni.a.bar,style:{width:100*e.completed+"%"}})),n.createElement("div",{className:ni.a["current-file-name"]},a?"Done!":e.currentFileName),n.createElement("div",{className:ni.a.changelog},n.createElement(ti,null)),n.createElement("div",{className:ni.a.actions},n.createElement(J,{theme:"primary",text:"Continue",onClick:t}))))})),si=Object(d.a)((function(){return n.createElement(Ue,{fullWidth:!0,onClose:he.closeChangelog},n.createElement("div",{className:Ql.a.modal},n.createElement("div",{className:"modal-header"},"Changelog"),n.createElement(po,{className:Ql.a.changelog},n.createElement(ti,null)),n.createElement("div",{className:"modal-actions"},n.createElement(J,{text:"Close",onClick:he.closeChangelog}))))}));var ci=a(121),di=a.n(ci);const mi=window.location.hostname,ui=parseInt(window.location.port,10)+1,pi=Object(d.a)((function(){const[e,t]=o.a.useState(!1),a=o.a.useRef(null);o.a.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),o.a.useEffect(()=>{he.appState===m.a.ready&&(a.current=setTimeout(()=>{t(!0)},500))},[he.appState]);const n=p()(di.a.root,{[di.a.active]:e,[di.a.fullwidth]:!_l.isOpen});if(!_t.hasProject)return null;const r={"--toolbar-width":_l.width+"px"};return o.a.createElement(o.a.Fragment,null,o.a.createElement("iframe",{ref:Et.ref,style:r,className:n,title:"Theia personality",src:`http://${mi}:${ui}`,frameBorder:"0",allowFullScreen:!0}),he.isIframeCovered&&o.a.createElement("div",{className:di.a.cover,style:r}))}));var hi=a(209),Ei=a.n(hi);function gi(e,t,a,n){const o=e.createShader(a);return e.shaderSource(o,n),e.attachShader(t,o),o}function bi(e){const t=e.createProgram();!function(e,t,a,n){if(e.compileShader(a),e.compileShader(n),e.linkProgram(t),!e.getProgramParameter(t,e.LINK_STATUS))throw console.error("Link failed:",e.getProgramInfoLog(t)),console.error("vs log:",e.getShaderInfoLog(a)),console.error("fs log:",e.getShaderInfoLog(n)),new Error("Failed to compile shaders")}(e,t,gi(e,t,e.VERTEX_SHADER,"\n  attribute vec2 a_position;\n  attribute vec2 a_texcoord;\n  uniform mat3 u_matrix;\n  varying vec2 textureCoordinate;\n  void main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n    textureCoordinate = a_texcoord;\n  }\n"),gi(e,t,e.FRAGMENT_SHADER,"\nvarying highp vec2 textureCoordinate;\nuniform sampler2D external_texture;\nvoid main()\n{\n  gl_FragColor = texture2D(external_texture, textureCoordinate);\n}\n")),e.useProgram(t);return{program:t,vloc:e.getAttribLocation(t,"a_position"),tloc:e.getAttribLocation(t,"a_texcoord")}}class fi{constructor(e){this.render=()=>{this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.finish(),this.animationFrame=requestAnimationFrame(this.render)};const t=e.getContext("webgl",{antialias:!1,depth:!1,alpha:!1,stencil:!1,desynchronized:!0,powerPreference:"high-performance"});if(!t)throw new Error("Failed to acquire webgl context for GameViewRenderer");this.gl=t;const a=function(e){const t=e.createTexture(),a=new Uint8Array([0,0,255,255]);return e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}(t),{program:n,vloc:o,tloc:r}=bi(t),{vertexBuff:l,texBuff:i}=function(e){const t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW);const a=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,1,0]),e.STATIC_DRAW),{vertexBuff:t,texBuff:a}}(t);t.useProgram(n),t.bindTexture(t.TEXTURE_2D,a),t.uniform1i(t.getUniformLocation(n,"external_texture"),0),t.bindBuffer(t.ARRAY_BUFFER,l),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o),t.bindBuffer(t.ARRAY_BUFFER,i),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r),this.render()}resize(e,t){window.resizeGame(e,t),this.gl.viewport(0,0,e,t),this.gl.canvas.width=e,this.gl.canvas.height=t}destroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame)}}var _i=a(210),Ci=a.n(_i);const vi=Object(d.a)((function(){const e=o.a.useRef(null);return o.a.useEffect(()=>{if(!e.current)return;let t,a,n;const o=new fi(e.current),r=new ResizeObserver(e=>{for(const r of e)t=r.contentRect.width,a=r.contentRect.height,n&&clearTimeout(n),n=setTimeout(()=>{o.resize(t,a)},100)});return r.observe(e.current),()=>{r.disconnect(),o.destroy()}},[]),o.a.createElement("canvas",{className:Ci.a.root,ref:e})}));var yi=a(19),Oi=a.n(yi);function Ni(e){localStorage["we:hotkeys"]=JSON.stringify(e)}const Ti=new class{constructor(){this.hotkeys=function(){try{const e=JSON.parse(localStorage["we:hotkeys"]);return"object"!==typeof e||Array.isArray(e)?{}:e}catch(e){return{}}}(),Object(ue.d)(this);for(const[e,t]of Object.entries(this.hotkeys))Za(e,t)}getCommandHotkey(e){const t=this.hotkeys[e]||$a(e);return t?Ha(t):""}getCommandKeystroke(e){return this.hotkeys[e]||$a(e)}setCommandHotkey(e,t){this.hotkeys[e]=t,Za(e,t),Ni(this.hotkeys)}resetCommandHotkey(e){delete this.hotkeys[e];const t=function(e){return za[e]}(e);t&&Za(e,t),Ni(this.hotkeys)}},Ai=Object(d.a)((function(e){const{tool:t,icon:a,label:n,children:r,highlight:l=!1,renderAlways:i=!1,toggleClassName:s="",panelClassName:c="",toggleProps:d=null,panelProps:m=null}=e,u=xn.isToolOpen(t),h=p()(Oi.a.toggle,Oi.a.hoverable,s,{[Oi.a.active]:u,[Oi.a.highlight]:l}),E=p()(Oi.a.panel,c,{[Oi.a.active]:u,[Oi.a.right]:"right"===Rn(t)});let g=null;r&&(i||u)&&(g=o.a.createElement("div",{className:E,...m},r));const b=jn(t),f=b?Ti.getCommandHotkey(b):"";return o.a.createElement(o.a.Fragment,null,o.a.createElement(Jn,{animated:!1,title:n,delay:0,fixedOn:"top",shortcut:f},e=>o.a.createElement("button",{...d,ref:e,className:h,onClick:()=>xn.toggleTool(t)},a)),g)})),Si=()=>{},ki=Object(d.a)((function(){const e=br.values.length>0,t=xn.isToolOpen(On.StatusCenter);return o.a.createElement(Ai,{tool:On.StatusCenter,icon:e?o.a.createElement(oe,null):o.a.createElement(h.J,null),label:"Notifications & tasks"},o.a.createElement(Gl,{open:t,onClose:Si}))}));var Ri=a(212),ji=a(164),xi=a(213),wi=a(211);const Pi=o.a.createElement(ji.b,{style:{shapeRendering:"crispEdges"}}),Ii=o.a.createElement(ji.a,null),Di=o.a.createElement(wi.a,null),Li=o.a.createElement(Ri.a,null),Mi=o.a.createElement(pl.b,null),Fi=o.a.createElement(xi.a,null);var Gi=a(25),Ui=a.n(Gi);const Hi=Object(d.a)((function(){const e=Ti.getCommandHotkey(rn.CONTROL_COORD_SYSTEM_TOGGLE),t=Ti.getCommandHotkey(rn.CONTROL_MODE_TRANSLATE_TOGGLE),a=Ti.getCommandHotkey(rn.CONTROL_MODE_ROTATE_TOGGLE),n=Ti.getCommandHotkey(rn.CONTROL_MODE_SCALE_TOGGLE);return o.a.createElement("div",{className:Ui.a.root},o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"top",title:`Switch to ${Dn.editorLocal?"global":"local"} coords`,shortcut:e},e=>o.a.createElement("div",{ref:e,className:p()(Ui.a.toggle,Ui.a.hoverable),onClick:Dn.toggleEditorLocal,"data-intro-id":"coord-system"},o.a.createElement("div",{className:p()(Ui.a.coords,{[Ui.a.global]:!Dn.editorLocal})},o.a.createElement("div",{className:Ui.a.axis}),o.a.createElement("div",{className:Ui.a.object})))),o.a.createElement("div",{className:Ui.a.modes,"data-intro-id":"mode-selector"},o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"top",title:"Translate",shortcut:t},e=>o.a.createElement("div",{ref:e,onClick:Dn.enableTranslation,className:p()(Ui.a.mode,{[Ui.a.active]:Dn.editorMode===Pn.TRANSLATE})},Li)),o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"top",title:"Rotate",shortcut:a},e=>o.a.createElement("div",{ref:e,onClick:Dn.enableRotation,className:p()(Ui.a.mode,{[Ui.a.active]:Dn.editorMode===Pn.ROTATE})},Mi)),o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"top",title:"Scale",shortcut:n},e=>o.a.createElement("div",{ref:e,onClick:Dn.enableScaling,className:p()(Ui.a.mode,{[Ui.a.active]:Dn.editorMode===Pn.SCALE})},Fi))))}));var Bi=a(69),Wi=a.n(Bi);function Yi(e){const{type:t="text",value:a,onChange:n,placeholder:r,className:l=""}=e,[i,s]=o.a.useState(a),c=o.a.useCallback(e=>"Enter"===e.key?(e.stopPropagation(),n(i)):"Escape"===e.key?(e.stopPropagation(),s(a),n(a)):void 0,[n,i,a]),d=o.a.useCallback(()=>{s(a),n(a)},[n,a]);return o.a.createElement("input",{autoFocus:!0,type:t,value:i,onChange:({target:e})=>s(e.value),placeholder:r,onBlur:d,onKeyDown:c,className:l})}const Ki=Object(d.a)((function(e){const{mapData:t,entityId:a}=e,n=Dn.map.patches[t][a],[r,l,i]=fe(!1),s=o.a.useCallback(e=>{var n;e.trim()&&(null===(n=Dn.map)||void 0===n||n.setPatchLabel(t,a,e.trim())),i()},[t,a,i]),c=o.a.useMemo(()=>[{id:"edit",text:"Rename addition",icon:D,onClick:l},{id:"delete",icon:I,text:"Delete patch",onClick:()=>Dn.map.deletePatch(t,a)}],[t,a,l]),d=p()(Wi.a.item,{[Wi.a.editing]:r,[Wi.a.highlight]:Dn.isPatchSelected(t,a)});return o.a.createElement(Pt,{items:c,className:d,activeClassName:Wi.a.active,onClick:()=>{Dn.setEditorSelection({type:ya.PATCH,label:n.label,mapdata:parseInt(t,10),entity:parseInt(a,10)})},onDoubleClick:l},!r&&n.label,r&&o.a.createElement(Yi,{value:n.label,onChange:s,placeholder:"Patch label"}))}));var Vi=a(86),zi=a.n(Vi);const Xi=Un(zi.a,"root"),Ji=function(){const e=document.createElement("div");return document.body.appendChild(e),({children:t})=>l.a.createPortal(t,e)}(),qi=Object(d.a)((function(e){const{steps:t,onFinish:a}=e,[n,r]=o.a.useState(0),l=t[n],i=function(e){const[t,a]=o.a.useState();return o.a.useLayoutEffect(()=>{a(function(e){if(!e)return;const t=[...document.querySelectorAll(`[data-intro-id="${e}"]`)];if(0===t.length)return;const a=t.map(Qi),n=Math.min(...a.map(({x:e})=>e)),o=Math.min(...a.map(({y:e})=>e)),r=Math.max(...a.map(({y:e,h:t})=>e+t)),l=Math.max(...a.map(({x:e,w:t})=>e+t)),i={x:n,y:o,w:l-n,h:r-o};let s=1===t.length?getComputedStyle(t[0]).borderRadius:"4px";"0px"===s&&(s="4px");return{id:e,rect:i,borderRadius:s}}(e))},[e,es.counter]),t}(l.focusElement),s=n===t.length-1;o.a.useEffect(()=>{const e=new ResizeObserver(()=>es.increment());return e.observe(document.body),()=>e.disconnect()},[]),o.a.useEffect(()=>{var e;return null===(e=l.onEnter)||void 0===e||e.call(l),l.onExit},[l]);return o.a.createElement(Ji,null,o.a.createElement(Xi,null,o.a.createElement(Zi,{node:i}),o.a.createElement($i,{index:n,step:l,node:i},!s&&o.a.createElement("button",{onClick:a},l.closeButtonText||"Close"),o.a.createElement("div",null,!l.backButtonDisabled&&o.a.createElement("button",{"data-back":!0,onClick:()=>{const e=n-1;r(e<0?0:e)}},"Back"),o.a.createElement("button",{"data-success":!0,onClick:()=>{const e=n+1;e===t.length?a():r(e)}},l.nextButtonText||"Next")))))}));function Zi({node:e}){const[t,a]=o.a.useState({});return o.a.useEffect(()=>{if(e){const{rect:t,borderRadius:n}=e;a({transform:`translate(${t.x-16}px, ${t.y-16}px)`,width:t.w+32+"px",height:t.h+32+"px",borderRadius:n})}else a({transform:"translate(-10px, -10px)",width:"0px",height:"0px",borderRadius:"0px"})},[e]),o.a.createElement("div",{className:zi.a.focuser,style:t})}function $i({step:e,index:t,node:a,children:n}){const r=o.a.useRef(null),l=function(e,t,a){const[n,r]=o.a.useState([0,0]);return o.a.useLayoutEffect(()=>{if(!e.current)return;const{w:t,h:n}=Qi(e.current),o=Qi(document.body),l=a?a.rect:o,i=l.w,s=l.h,c=l.y,d=l.x,m=c+s,u=d+i,p=o.w-80,h=o.h-80,E=o.h-40,g=o.w-40;let b=La(d+i/2-t/2,40,g-t),f=La(c+s/2-n/2,40,E-n);h<s+n+40?p<i+t+40||(b=g>=u+t+40?i+40:d-t-40):f=E>=m+n+40?m+40:c-n-40,r([b,f])},[a,e.current,t]),{transform:`translate(${n[0]}px, ${n[1]}px)`}}(r,e,a),i=e.content,s=p()(zi.a.content,{[zi.a.transitions]:0!==t});return o.a.createElement("div",{ref:r,className:s,style:l},o.a.createElement("div",{className:zi.a.wrapper},o.a.createElement(i,null)),o.a.createElement("div",{className:zi.a.controls},n))}function Qi(e){const t=e.getBoundingClientRect();return{x:t.x,y:t.y,w:t.width,h:t.height}}const es=new class{constructor(){this.counter=0,Object(ue.d)(this)}increment(){this.counter++}};function ts(){return function(...e){o.a.useEffect(()=>{es.increment()},e)}(),null}const as=Object(d.a)((function(){return o.a.createElement(Ai,{tool:On.Patches,icon:Di,label:"Map patches",highlight:Dn.selection.type===ya.PATCH,toggleProps:{"data-intro-id":"map-patches"},panelProps:{"data-intro-id":"map-patches"}},o.a.createElement(ts,null),o.a.createElement("div",{className:Wi.a.root},0===Object.keys(Dn.map.patches).length&&o.a.createElement("div",{className:Wi.a.placeholder},"Modify map objects and their patches will appear here!"),Object.entries(Dn.map.patches).map(([e,t])=>Object.keys(t).map(t=>o.a.createElement(Ki,{key:e+t,mapData:e,entityId:t})))))})),ns="mapExplorer:addition";var os=a(30),rs=a.n(os);const ls=Object(d.a)((function(e){var t;const{id:a,children:n}=e,{label:r}=(null===(t=Dn.map)||void 0===t?void 0:t.additions[a])||{label:""},[l,i,s]=fe(!1),c=o.a.useCallback(()=>{Dn.setEditorSelection({type:ya.ADDITION,id:a})},[a]),d=o.a.useCallback(e=>{var t;e.trim()&&(null===(t=Dn.map)||void 0===t||t.setAdditionLabel(a,e.trim())),s()},[a,s]),m=o.a.useMemo(()=>[{id:"edit",text:"Rename addition",icon:D,onClick:i},{id:"delete",text:"Delete addition",icon:I,onClick:()=>{var e;return null===(e=Dn.map)||void 0===e?void 0:e.deleteAddition(a)}}],[a,i]),[{isDragging:u},h]=Object(Mt.a)({item:{id:a,type:ns},canDrag:()=>!l,collect:e=>({isDragging:e.isDragging()})}),E=p()(rs.a.item,{[rs.a.editing]:l,[rs.a.dragging]:u,[rs.a.highlight]:Dn.isAdditionSelected(a)});return o.a.createElement(Pt,{ref:h,className:E,activeClassName:rs.a.active,onClick:c,onDoubleClick:i,items:m},!l&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:rs.a.label},r),!!n&&o.a.createElement("div",{className:rs.a.controls},n)),l&&o.a.createElement(Yi,{value:r,onChange:d,placeholder:"Addition label"}))}));var is=a(214),ss=a.n(is);const cs=Object(d.a)((function(e){const{grp:t,onClose:a}=e,n=Dn.map.additionGroups[t],r=Object.values(Dn.map.getGroupAdditions(t)),[l,i]=o.a.useState(!1),s=o.a.useCallback(()=>{a(),Dn.map.deleteAdditionGroup(t,l)},[t,a,l]);return o.a.createElement(Ue,{onClose:a},o.a.createElement("div",{className:"modal-header"},'Delete "',n.label,'" group?'),o.a.createElement("div",{className:"modal-label"},"Group has following additions:"),o.a.createElement("div",{className:"modal-block"},o.a.createElement("ul",{className:ss.a.additions},r.slice(0,5).map(({label:e},t)=>o.a.createElement("li",{key:`${t}-${e}`},e)),r.length>5?o.a.createElement("li",null,"And ",r.length-5," more"):null)),o.a.createElement("div",{className:"modal-block"},o.a.createElement(ar,{value:l,onChange:i,label:"Also delete additions"})),o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{text:"Delete",icon:I,onClick:s}),o.a.createElement(J,{autofocus:!0,text:"Cancel",theme:"primary",onClick:a})))}));var ds=a(41),ms=a.n(ds);const us=Object(d.a)((function(e){const{grp:t,items:a}=e,n=Dn.map.additionGroups[t],[r,l,i,s]=fe(!1),[{isDropping:c},d]=Object(Ft.a)({accept:ns,drop(e,a){a.didDrop()||"object"===typeof e&&(null===e||void 0===e?void 0:e.id)&&Dn.map.setAdditionGroup(e.id,t)},collect:e=>({isDropping:e.isOver({shallow:!0})&&e.canDrop()})}),m=p()(ms.a.root,{[ms.a.collapsed]:r,[ms.a.dropping]:c}),[u,h,E]=fe(!1),[g,b,f]=fe(!1),_=o.a.useCallback(e=>{E(),Dn.map.setAdditionGroupLabel(t,e)},[t,E]),C=o.a.useCallback(()=>{Object.keys(a).length?b():Dn.map.deleteAdditionGroup(t,!1)},[t,a]),v=o.a.useMemo(()=>[{id:"rename",text:"Rename group",icon:D,onClick:h},{id:"delete",text:"Delete group",icon:I,onClick:C}],[h,C]),y=p()(ms.a.header,{[ms.a.editing]:u});return o.a.createElement("div",{className:m,ref:d},u?o.a.createElement("div",{className:y},o.a.createElement("div",{className:ms.a.icon},r?R:k),o.a.createElement(Yi,{value:null===n||void 0===n?void 0:n.label,onChange:_,placeholder:"Group label"})):o.a.createElement(Pt,{className:ms.a.header,activeClassName:ms.a.active,onClick:s,items:v},o.a.createElement("div",{className:ms.a.icon},r?R:k),o.a.createElement("div",{className:ms.a.name},null===n||void 0===n?void 0:n.label)),o.a.createElement("div",{className:ms.a.children},Object.keys(a).map(e=>o.a.createElement(ls,{id:e,key:e}))),g&&o.a.createElement(cs,{grp:t,onClose:f}))}));var ps=a(122),hs=a.n(ps);const Es=o.a.memo((function(){const[{isDroppingNewGroup:e,isAccepting:t},a]=Object(Ft.a)({accept:ns,drop(e,t){if(!t.didDrop()&&"object"===typeof e&&(null===e||void 0===e?void 0:e.id)){const t=Dn.map.createAdditionGroup(`New group (${Dn.map.additions[e.id].label})`);Dn.map.setAdditionGroup(e.id,t)}},collect:e=>({isDroppingNewGroup:e.isOver({shallow:!0})&&e.canDrop(),isAccepting:e.canDrop()})}),n=o.a.useCallback(()=>{Dn.map.createAdditionGroup("New group")},[]),r=p()(hs.a.root,{[hs.a.accepting]:t}),l=p()({[hs.a.dropping]:e});return o.a.createElement("div",{className:r},o.a.createElement("button",{ref:a,className:l,onClick:n},w,"New group"),o.a.createElement("div",{className:hs.a.ungroup},k,"Ungroup"))})),gs=Object(d.a)((function(){const[e,t,a]=fe(!1),n=o.a.useCallback(e=>{a(),e&&Dn.map.createAdditionGroup(e)},[a]),[{isDropping:r},l]=Object(Ft.a)({accept:ns,drop(e,t){t.didDrop()||"object"===typeof e&&(null===e||void 0===e?void 0:e.id)&&Dn.map.setAdditionGroup(e.id,-1)},collect:e=>({isDropping:e.isOver({shallow:!0})&&e.canDrop()})}),i=p()(rs.a.root,{[rs.a.dropping]:r}),s=o.a.useMemo(()=>[{id:"create-group",text:"Create group",icon:w,onClick:t}],[t]),c=Object.keys(Dn.map.additionGroups).length>0,d=Object.keys(Dn.map.additions).length>0,m=!c&&!d;return o.a.createElement(Ai,{renderAlways:!0,tool:On.Additions,icon:Ii,label:"Map additions",highlight:Dn.selection.type===ya.ADDITION,toggleProps:{"data-intro-id":"map-additions"},panelProps:{"data-intro-id":"map-additions"}},o.a.createElement(ts,null),o.a.createElement(Pt,{ref:l,className:i,activeClassName:rs.a.active,items:s},o.a.createElement(Es,null),e&&o.a.createElement("div",{className:rs.a.creator},w,o.a.createElement(Yi,{value:"",onChange:n,placeholder:"New group name"})),Object.keys(Dn.map.additionGroups).map(e=>o.a.createElement(us,{key:e,grp:e,items:Dn.map.getGroupAdditions(e)})),m&&o.a.createElement("div",{className:rs.a.placeholder},"Create addition by clicking plus button above"),Object.keys(Dn.map.additionsUngrouped).map(e=>o.a.createElement(ls,{id:e,key:e}))))}));var bs=a(215),fs=a(220),_s=a(75),Cs=a.n(_s);const vs=o.a.memo((function({active:e,name:t,style:a,spawn:n,activate:r}){const l=Cs.a.item+" "+(e&&Cs.a.active);return o.a.createElement("div",{style:a,className:l,onClick:()=>n(t),onMouseEnter:r},t)})),ys=Object(d.a)((function(){const e=o.a.useRef(null),[t,a]=o.a.useState(""),[n,r]=o.a.useState([]),[l,i]=o.a.useState(0),s=_e(async e=>{r(await Tn.a.search(e)||[])},50,[]),c=t.length?n:Tn.a.archetypes;o.a.useEffect(()=>{const e=c[l];sn(_a.ObjectPreview,e||"")},[c,l]),o.a.useEffect(()=>()=>sn(_a.ObjectPreview,""),[]);const d=o.a.useCallback(e=>{const t=e.trim();a(t),i(0),t?s(t):r([])},[]),m=o.a.useCallback(t=>{var a;if(t.ctrlKey||t.altKey||t.shiftKey)return;const n="ArrowUp"===t.key,o="ArrowDown"===t.key,r="Escape"===t.key,s="Home"===t.key,d="End"===t.key,m="PageUp"===t.key,u="PageDown"===t.key;if(n||o||r||s||d||m||u){if(t.preventDefault(),t.stopPropagation(),r)return xn.closeTool(On.AddObject),!0;let p=l;const h=c.length-1;if(n||o){p=l+(n?-1:1),p<0?p=h:p>h&&(p=0)}else s?p=0:d?p=h:m?(p-=20,p<0&&(p=0)):u&&(p+=20,p>h&&(p=h));return p!==l&&(i(p),null===(a=e.current)||void 0===a||a.scrollToItem(p)),!0}},[l,c]),u=o.a.useCallback(e=>{e&&Dn.map.createAddition(e,-1),xn.closeTool(On.AddObject)},[]),p=o.a.useCallback(()=>{const e=c[l];u(e)},[c,l]);return o.a.createElement("div",{className:Cs.a.root},o.a.createElement("div",{className:Cs.a.controls},o.a.createElement(re,{autofocus:!Dn.showIntro,value:t,className:Cs.a.filter,placeholder:"Search objects",onChange:d,onKeyDown:m,onSubmit:p}),o.a.createElement(Jn,{animated:!1,delay:0,fixedOn:"bottom",title:"Refresh objects list"},e=>o.a.createElement("button",{ref:e,className:Cs.a.refresh,onClick:()=>ut.a.refreshArchetypesCollection()},o.a.createElement(h.d,null)))),o.a.createElement("div",{className:Cs.a.list},o.a.createElement(bs.a,null,({width:t,height:a})=>o.a.createElement(fs.a,{ref:e,width:t,height:a,itemCount:c.length,itemSize:28},({index:e,style:t})=>{const a=c[e];return o.a.createElement(vs,{key:e,active:l===e,name:a,style:t,spawn:u,activate:()=>i(e)})}))))})),Os=Object(d.a)((function(){const[e,t]=o.a.useState(Tn.a.archetypes.length>0);return o.a.useEffect(()=>{let e=!0;const a=requestAnimationFrame(()=>{Tn.a.load().then(()=>{e&&t(!0)})});return()=>{e=!1,cancelAnimationFrame(a)}},[]),o.a.createElement(Ai,{tool:On.AddObject,icon:e?Pi:o.a.createElement(oe,null),label:"Add object",toggleProps:{"data-intro-id":"add-object"},panelProps:{"data-intro-id":"add-object"}},o.a.createElement(ts,null),o.a.createElement(ys,null))}));var Ns=a(123),Ts=a.n(Ns);const As=Object(d.a)((function(){if(Dn.selection.type===ya.NONE)return null;const e=p()(Oi.a.toggle,Ts.a.root);return o.a.createElement("div",{className:e},o.a.createElement("div",{className:Ts.a.icon},function(){switch(Dn.selection.type){case ya.ADDITION:return Ii;case ya.PATCH:return Di;default:return null}}()),o.a.createElement("div",{className:Ts.a.label},function(){var e;switch(Dn.selection.type){case ya.NONE:return"";case ya.ADDITION:return(null===(e=Dn.map.additions[Dn.selection.id])||void 0===e?void 0:e.label)||"";case ya.PATCH:{const e=Dn.map.getPatch(Dn.selection.mapdata,Dn.selection.entity);return e?e.label:Dn.selection.label}}}()),o.a.createElement(Jn,{animated:!1,delay:0,fixedOn:"top",title:"Clear selection",shortcut:"ESC"},e=>o.a.createElement("button",{ref:e,className:Ts.a.clear,onClick:Dn.clearEditorSelection},H)))})),Ss={CLEAR:0,EXTRASUNNY:0,CLOUDS:0,OVERCAST:0,RAIN:0,CLEARING:0,THUNDER:0,SMOG:0,FOGGY:0,XMAS:0,SNOWLIGHT:0,BLIZZARD:0},ks={};Object.keys(Ss).forEach(e=>{Ss[e]=Wl(e),ks[Ss[e]]=e});const Rs=new class{constructor(){this.freezeTimeValue=new Sn({key:"we:freezeTime",defaultValue:!1}),this.time="12:0",this.timeNum=720,this.prevWeather="EXTRASUNNY",this.prevWeatherHash=Ss.EXTRASUNNY,this.nextWeather="EXTRASUNNY",this.nextWeatherHash=Ss.EXTRASUNNY,Object(ue.d)(this),ln(_a.EnvironmentRequest,()=>{this.freezeTime&&(this.freezeTime=this.freezeTime),js(this.timeNum)}),ln(_a.EnvironmentAck,e=>Object(ue.h)(()=>{this.updateTime(e.hours,e.minutes),this.prevWeather=ks[e.prevWeather],this.prevWeatherHash=e.prevWeather,this.nextWeather=ks[e.nextWeather],this.nextWeatherHash=e.nextWeather}))}get freezeTime(){return this.freezeTimeValue.get()}set freezeTime(e){this.freezeTimeValue.set(e),sn(_a.EnvironmentSet,{type:va.FREEZE_TIME,freeze:e})}setWeather(e){sn(_a.EnvironmentSet,{type:va.PERSISTENT_WEATHER,weather:e})}setRandomWeather(){sn(_a.EnvironmentSet,{type:va.RANDOM_WEATHER})}setTimeNum(e){const t=parseInt(e,10),a=t/60|0,n=t%60;this.updateTime(a,n),js(a,n)}updateTime(e,t){this.time=`${e}:${function(e){if(e<10)return"0"+e;return e.toString()}(t)}`,this.timeNum=60*e+t}};function js(e,t){let a,n;void 0===t?(a=e/60|0,n=e%60):(a=e,n=t),sn(_a.EnvironmentSet,{type:va.TIME,hours:a,minutes:n})}var xs=a(87),ws=a.n(xs);const Ps=Object(d.a)((function(){const e=Object.keys(Ss).map(e=>o.a.createElement("button",{key:e,className:"normalize-text",onClick:()=>Rs.setWeather(e)},e));return o.a.createElement(Ai,{renderAlways:!0,tool:On.Environment,icon:o.a.createElement(E.d,null),label:"Environment",toggleProps:{"data-intro-id":"environment-panel"},panelProps:{"data-intro-id":"environment-panel"}},o.a.createElement(ts,null),o.a.createElement("div",{className:ws.a.root},o.a.createElement("div",{className:ws.a["clock-header"]},o.a.createElement("div",{className:ws.a.entry},o.a.createElement(h.p,null)," ",Rs.time),o.a.createElement(ar,{value:Rs.freezeTime,onChange:e=>Rs.freezeTime=e,label:"Freeze"})),o.a.createElement("div",{className:ws.a.clock},o.a.createElement("input",{type:"range",min:1,max:1439,value:Rs.timeNum,onChange:({target:{value:e}})=>Rs.setTimeNum(e)})),o.a.createElement("div",{className:ws.a.entry},o.a.createElement(E.d,null),o.a.createElement("span",{className:"normalize-text"},Rs.prevWeather===Rs.nextWeather?Rs.prevWeather:`${Rs.prevWeather} -> ${Rs.nextWeather}`)),o.a.createElement("div",{className:ws.a["weather-buttons"]},o.a.createElement("button",{onClick:()=>Rs.setRandomWeather()},"Dynamic weather"),e)))}));var Is=a(142),Ds=a.n(Is);const Ls=Object(d.a)((function(){const e=p()(Ds.a.root,{[Ds.a.active]:nn.active});return o.a.createElement("div",{className:e},o.a.createElement("div",{className:Ds.a.message},nn.message))}));var Ms=a(165),Fs=a.n(Ms);const Gs={slow:!1,fast:!1};function Us(e,t,a){return a.fast?e+5*t:a.slow?e+.01*t:e+t}function Hs(e){const{label:t,value:a,onChange:n,className:r,unlimitedPrecision:l=!1}=e,i=l?a:function(e,t=1e3){return Math.round(e*t)/t}(a),s=o.a.useRef(null),c=o.a.useRef(Gs),d=o.a.useRef(!1),m=o.a.useRef(!1);o.a.useEffect(()=>{const e=()=>{c.current.fast=!1,c.current.slow=!1,d.current=!1,m.current=!1};return window.addEventListener("blur",e),()=>window.removeEventListener("blur",e)},[]);return o.a.createElement("div",{className:p()(Fs.a.root,r)},o.a.createElement("div",{className:Fs.a.label},t),o.a.createElement("input",{ref:s,type:"text",value:i,onChange:({target:{value:e}})=>n(parseFloat(e)),onKeyDown:e=>{switch(e.key){case"ArrowUp":n(Us(a,1,c.current));break;case"ArrowDown":n(Us(a,-1,c.current));break;case"Alt":c.current.slow=!0;break;case"Shift":c.current.fast=!0;break;default:return}e.preventDefault(),e.stopPropagation()},onKeyUp:e=>{switch(e.key){case"Alt":c.current.slow=!1;break;case"Shift":c.current.fast=!1;break;default:return}e.preventDefault(),e.stopPropagation()},onMouseDown:()=>{s.current&&(d.current=!0)},onMouseUp:()=>{s.current&&d.current&&(d.current=!1,m.current&&(s.current.blur(),m.current=!1,document.exitPointerLock()))},onMouseMove:({movementX:e})=>{var t;d.current&&(m.current?Math.abs(e)<1e3&&n(a+.01*e):(m.current=!0,null===(t=s.current)||void 0===t||t.requestPointerLock()))},onWheel:({deltaY:e})=>{n(a+.001*e)}}))}var Bs=a(10),Ws=a.n(Bs);const Ys=Un(Ws.a,"header"),Ks=Un(Ws.a,"icon"),Vs=Un(Ws.a,"name"),zs=Un(Ws.a,"controls"),Xs=Un(Ws.a,"block"),Js=Un(Ws.a,"label-row"),qs=Un(Ws.a,"label"),Zs=Un(Ws.a,"control");const $s=Object(d.a)((function(){const{mapdata:e,entity:t,label:a,mat:n}=function(){var e;if(Dn.selection.type!==ya.PATCH)return{label:"",mapdata:0,entity:0,mat:Array(16).fill(0)};const{mapdata:t,entity:a,label:n,mat:o=Array(16).fill(0),cam:r=[0,0,0,0,0,0]}=Dn.selection,l=null===(e=Dn.map.patches[t])||void 0===e?void 0:e[a];return l?{mapdata:t,entity:a,label:l.label,mat:l.mat}:{mapdata:t,entity:a,label:n,mat:o}}(),[r,l,i]=ja(n),s=Array.from(n);xa(s,[1,1,1]);const c=n[Ca.AX],d=n[Ca.AY],m=n[Ca.AZ],[u,p,E]=Aa(s);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ys,null,o.a.createElement(Ks,null,Di),o.a.createElement(Vs,null,o.a.createElement("span",null,a)),o.a.createElement(zs,null,o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"top",title:"Delete",shortcut:Ti.getCommandHotkey(rn.ACTION_DELETE_SELECTION)},a=>o.a.createElement("button",{ref:a,onClick:()=>Dn.map.deletePatch(e,t)},I)),o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"top",title:"Focus in view",shortcut:Ti.getCommandHotkey(rn.ACTION_FOCUS_SELECTION_IN_VIEW)},e=>o.a.createElement("button",{ref:e,onClick:Dn.focusSelectionInView},o.a.createElement(h.i,null))))),o.a.createElement(Xs,null,o.a.createElement(qs,null,Li," Position:"),o.a.createElement(Zs,{inputs:!0},o.a.createElement(Hs,{label:"x:",value:c,onChange:a=>Dn.map.setPatchPosition(e,t,a,d,m),className:Ws.a.input}),o.a.createElement(Hs,{label:"y:",value:d,onChange:a=>Dn.map.setPatchPosition(e,t,c,a,m),className:Ws.a.input}),o.a.createElement(Hs,{label:"z:",value:m,onChange:a=>Dn.map.setPatchPosition(e,t,c,d,a),className:Ws.a.input}))),o.a.createElement(Xs,null,o.a.createElement(qs,null,Mi,"Rotation:"),o.a.createElement(Zs,{inputs:!0},o.a.createElement(Hs,{label:"x:",value:p,onChange:a=>Dn.map.setPatchRotation(e,t,a,E,u),className:Ws.a.input}),o.a.createElement(Hs,{label:"y:",value:E,onChange:a=>Dn.map.setPatchRotation(e,t,p,a,u),className:Ws.a.input}),o.a.createElement(Hs,{label:"z:",value:u,onChange:a=>Dn.map.setPatchRotation(e,t,p,E,a),className:Ws.a.input}))),o.a.createElement(Xs,null,o.a.createElement(Js,null,o.a.createElement(qs,null,Fi,"Scale:"),o.a.createElement(zs,null,o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"right",title:"Scale to 1,1,1"},a=>o.a.createElement("button",{ref:a,onClick:()=>Dn.map.setPatchScale(e,t,1,1,1)},"1:1")))),o.a.createElement(Zs,{inputs:!0},o.a.createElement(Hs,{label:"x:",value:r,onChange:a=>Dn.map.setPatchScale(e,t,a,l,i),className:Ws.a.input}),o.a.createElement(Hs,{label:"y:",value:l,onChange:a=>Dn.map.setPatchScale(e,t,r,a,i),className:Ws.a.input}),o.a.createElement(Hs,{label:"z:",value:i,onChange:a=>Dn.map.setPatchScale(e,t,r,l,a),className:Ws.a.input}))))})),Qs=Un(Ws.a,"header"),ec=Un(Ws.a,"icon"),tc=Un(Ws.a,"name"),ac=Un(Ws.a,"controls"),nc=Un(Ws.a,"block"),oc=Un(Ws.a,"label-row"),rc=Un(Ws.a,"label"),lc=Un(Ws.a,"control"),ic=Object(d.a)((function(e){const{additionId:t}=e,a=Dn.map.additions[t],[n,r,l]=ja(a.mat),i=Array.from(a.mat);xa(i,[1,1,1]);const s=a.mat[Ca.AX],c=a.mat[Ca.AY],d=a.mat[Ca.AZ],[m,u,p]=Aa(i);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qs,null,o.a.createElement(ec,null,Ii),o.a.createElement(tc,null,o.a.createElement("span",null,a.label)),o.a.createElement(ac,null,o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"top",title:"Duplicate",shortcut:Ti.getCommandHotkey(rn.ACTION_DUPLICATE_SELECTION)},e=>o.a.createElement("button",{ref:e,onClick:()=>Dn.map.duplicateAddition(t)},L)),o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"top",title:"Delete",shortcut:Ti.getCommandHotkey(rn.ACTION_DELETE_SELECTION)},e=>o.a.createElement("button",{ref:e,onClick:()=>Dn.map.deleteAddition(t)},I)),o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"top",title:"Focus in view",shortcut:Ti.getCommandHotkey(rn.ACTION_FOCUS_SELECTION_IN_VIEW)},e=>o.a.createElement("button",{ref:e,onClick:Dn.focusSelectionInView},o.a.createElement(h.i,null))))),o.a.createElement(nc,null,o.a.createElement(oc,null,o.a.createElement(rc,null,Li," Position:"),o.a.createElement(ac,null,o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"right",title:"Set on ground",shortcut:Ti.getCommandHotkey(rn.ACTION_SET_ADDITION_ON_GROUND)},e=>o.a.createElement("button",{ref:e,onClick:()=>Dn.map.setAdditionOnGround(t)},o.a.createElement(h.o,null))))),o.a.createElement(lc,{inputs:!0},o.a.createElement(Hs,{label:"x:",value:s,onChange:e=>Dn.map.setAdditionPosition(t,e,c,d),className:Ws.a.input}),o.a.createElement(Hs,{label:"y:",value:c,onChange:e=>Dn.map.setAdditionPosition(t,s,e,d),className:Ws.a.input}),o.a.createElement(Hs,{label:"z:",value:d,onChange:e=>Dn.map.setAdditionPosition(t,s,c,e),className:Ws.a.input}))),o.a.createElement(nc,null,o.a.createElement(rc,null,Mi,"Rotation:"),o.a.createElement(lc,{inputs:!0},o.a.createElement(Hs,{label:"x:",value:u,onChange:e=>Dn.map.setAdditionRotation(t,e,p,m),className:Ws.a.input}),o.a.createElement(Hs,{label:"y:",value:p,onChange:e=>Dn.map.setAdditionRotation(t,u,e,m),className:Ws.a.input}),o.a.createElement(Hs,{label:"z:",value:m,onChange:e=>Dn.map.setAdditionRotation(t,u,p,e),className:Ws.a.input}))),o.a.createElement(nc,null,o.a.createElement(oc,null,o.a.createElement(rc,null,Fi,"Scale:"),o.a.createElement(ac,null,o.a.createElement(Jn,{delay:0,animated:!1,fixedOn:"right",title:"Scale to 1,1,1"},e=>o.a.createElement("button",{ref:e,onClick:()=>Dn.map.setAdditionScale(t,1,1,1)},"1:1")))),o.a.createElement(lc,{inputs:!0},o.a.createElement(Hs,{label:"x:",value:n,onChange:e=>Dn.map.setAdditionScale(t,e,r,l),className:Ws.a.input}),o.a.createElement(Hs,{label:"y:",value:r,onChange:e=>Dn.map.setAdditionScale(t,n,e,l),className:Ws.a.input}),o.a.createElement(Hs,{label:"z:",value:l,onChange:e=>Dn.map.setAdditionScale(t,n,r,e),className:Ws.a.input}))))})),sc=Un(Ws.a,"header"),cc=Un(Ws.a,"icon"),dc=Un(Ws.a,"name"),mc=Un(Ws.a,"controls"),uc=Un(Ws.a,"block"),pc=Un(Ws.a,"label-row"),hc=Un(Ws.a,"label"),Ec=Un(Ws.a,"control"),gc=()=>{},bc=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ts,null),o.a.createElement(sc,null,o.a.createElement(cc,null,Ii),o.a.createElement(dc,null,o.a.createElement("span",null,"prop_fake_taxi_l")),o.a.createElement(mc,null,o.a.createElement("button",null,I),o.a.createElement("button",null,o.a.createElement(h.i,null)))),o.a.createElement(uc,null,o.a.createElement(pc,null,o.a.createElement(hc,null,Li," Position:"),o.a.createElement(mc,null,o.a.createElement("button",null,o.a.createElement(h.o,null)))),o.a.createElement(Ec,{inputs:!0},o.a.createElement(Hs,{label:"x:",value:31.9235,onChange:gc,className:Ws.a.input}),o.a.createElement(Hs,{label:"y:",value:45.0023,onChange:gc,className:Ws.a.input}),o.a.createElement(Hs,{label:"z:",value:1.4273,onChange:gc,className:Ws.a.input}))),o.a.createElement(uc,null,o.a.createElement(hc,null,Mi,"Rotation:"),o.a.createElement(Ec,{inputs:!0},o.a.createElement(Hs,{label:"x:",value:90,onChange:gc,className:Ws.a.input}),o.a.createElement(Hs,{label:"y:",value:.0989,onChange:gc,className:Ws.a.input}),o.a.createElement(Hs,{label:"z:",value:0,onChange:gc,className:Ws.a.input}))),o.a.createElement(uc,null,o.a.createElement(pc,null,o.a.createElement(hc,null,Fi,"Scale:"),o.a.createElement(mc,null,o.a.createElement("button",null,"1:1"))),o.a.createElement(Ec,{inputs:!0},o.a.createElement(Hs,{label:"x:",value:1,onChange:gc,className:Ws.a.input}),o.a.createElement(Hs,{label:"y:",value:1,onChange:gc,className:Ws.a.input}),o.a.createElement(Hs,{label:"z:",value:1,onChange:gc,className:Ws.a.input}))))},fc=Object(d.a)((function(){const e=p()(Ws.a.root,Oi.a["panel-alike"]);return xn.showingFakeProperties?o.a.createElement("div",{className:e,"data-intro-id":"properties-panel"},o.a.createElement(bc,null)):Dn.selection.type===ya.ADDITION?Dn.map.additions[Dn.selection.id]?o.a.createElement("div",{className:e},o.a.createElement(ic,{additionId:Dn.selection.id})):null:Dn.selection.type===ya.PATCH?o.a.createElement("div",{className:e},o.a.createElement($s,null)):null}));var _c=a(216),Cc=a.n(_c);const vc={mouseSensetivity:15,cameraAboveTheGround:!0,showSelectionBoundingBox:!0,playtestSpawnInVehicle:!1,playtestVehicleName:""},yc=new class{constructor(){this.settingsVault=new Sn({key:"we:settings",defaultValue:vc,readTransform:e=>Cc()({...vc},e)}),this.handleSettingsChange=()=>{sn(_a.SettingsSet,this.settings),this.settingsVault.set(this.settings)},Object(ue.d)(this),ln(_a.Ready,()=>{sn(_a.SettingsSet,this.settings)})}get settings(){return this.settingsVault.get()}setMouseSensetivity(e){this.settings.mouseSensetivity=La(e,1,100),this.handleSettingsChange()}setShowSelectionBoundingBox(e){this.settings.showSelectionBoundingBox=e,this.handleSettingsChange()}setCameraAboveTheGround(e){this.settings.cameraAboveTheGround=e,this.handleSettingsChange()}setPlaytestSpawnInVehicle(e){this.settings.playtestSpawnInVehicle=e,this.handleSettingsChange()}setPlaytestVehicleName(e){this.settings.playtestVehicleName=e,this.handleSettingsChange()}};var Oc=a(217),Nc=a(50),Tc=a.n(Nc);const Ac=Un(Tc.a,"item"),Sc=Un(Tc.a,"title"),kc=Un(Tc.a,"controls"),Rc=()=>{},jc=Object(d.a)((function(e){const{command:t,editing:a,edit:n}=e,r=Ti.getCommandKeystroke(t),l=function(e){return Ka[e]}(t),[i,s]=o.a.useState(r),c=o.a.useCallback(()=>{s(Ti.getCommandKeystroke(t)),n(null)},[n,t]),d=o.a.useCallback(()=>{i&&Ti.setCommandHotkey(t,i),n(null)},[t,i,n]),m=o.a.useCallback(()=>{Ti.resetCommandHotkey(t),s(Ti.getCommandKeystroke(t)),n(null)},[t,n]);return o.a.useEffect(()=>{const e=e=>{if(!a)return;if(e.preventDefault(),e.stopPropagation(),"Escape"===e.code)return c();if("Enter"===e.code)return d();const t=function(e){switch(e.code){case"ShiftLeft":case"ShiftRight":case"AltLeft":case"AltRight":case"ControlLeft":case"ControlRight":return}return{code:e.code||e.key,alt:e.altKey,ctrl:e.ctrlKey,shift:e.shiftKey}}(e);t&&s(t)};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}},[a,t,c,d]),o.a.createElement(Ac,{editing:a,props:{onClick:a?Rc:()=>n(t)}},o.a.createElement(Sc,null,l.label||l.command),i&&o.a.createElement(Kn,{combination:i}),a&&o.a.createElement(kc,null,o.a.createElement("button",{className:Tc.a.reset,onClick:m},o.a.createElement(E.c,null),"Reset to default"),o.a.createElement("button",{className:Tc.a.cancel,onClick:c},H,"Cancel"),o.a.createElement("button",{className:Tc.a.save,onClick:d},o.a.createElement(h.l,null),"Save")))})),xc=Un(Tc.a,"root"),wc=Un(Tc.a,"wrapper"),Pc=Object(d.a)((function(e){const{onClose:t}=e,[a,n]=o.a.useState(null);o.a.useEffect(()=>(Dn.enterHotkeyConfigurationMode(),Dn.exitHotkeyConfigurationMode),[]);const r=Object.values(Ka).filter(({configurable:e})=>e).map(e=>o.a.createElement(jc,{key:e.command,command:e.command,editing:a===e.command,edit:n}));return o.a.createElement(Ue,{fullWidth:!0,fullHeight:!0,onClose:t},o.a.createElement(xc,null,o.a.createElement("div",{className:"modal-header"},"World Editor Hotkeys"),o.a.createElement(wc,{editing:null!==a},r)))}));var Ic=a(124),Dc=a.n(Ic);const Lc=Un(Dc.a,"root"),Mc=Un(Dc.a,"block"),Fc=Un(Dc.a,"label"),Gc=Un(Dc.a,"control"),Uc=Object(d.a)((function(){const[e,t,a]=fe(!1);return o.a.createElement(Ai,{tool:On.Settings,icon:C,label:"Settings",toggleProps:{"data-intro-id":"settings-panel"},panelProps:{"data-intro-id":"settings-panel"}},o.a.createElement(ts,null),o.a.createElement(Lc,null,o.a.createElement(Mc,null,o.a.createElement(Fc,null,"Mouse sensetivity"),o.a.createElement(Gc,null,o.a.createElement("input",{type:"range",min:1,max:100,value:yc.settings.mouseSensetivity,onChange:({target:{value:e}})=>yc.setMouseSensetivity(parseInt(e,10))}))),o.a.createElement(Mc,null,o.a.createElement(ar,{label:"Show bounding box for selected entity",value:yc.settings.showSelectionBoundingBox,onChange:e=>yc.setShowSelectionBoundingBox(e)})),o.a.createElement(Mc,null,o.a.createElement(ar,{label:"Limit camera position above the ground",value:yc.settings.cameraAboveTheGround,onChange:e=>yc.setCameraAboveTheGround(e)})),o.a.createElement(Mc,null,o.a.createElement(ar,{label:"Spawn vehicle in play mode",value:yc.settings.playtestSpawnInVehicle,onChange:e=>yc.setPlaytestSpawnInVehicle(e)}),o.a.createElement(re,{value:yc.settings.playtestVehicleName,onChange:e=>yc.setPlaytestVehicleName(e),placeholder:"Vehicle model name"})),o.a.createElement(Mc,null,o.a.createElement(J,{text:"Hotkeys",icon:o.a.createElement(Oc.a,null),onClick:t}),e&&o.a.createElement(Pc,{onClose:a})),o.a.createElement(Mc,null,o.a.createElement("a",{href:"javascript:void(0)",onClick:Dn.openIntro},"Show intro tour"))))})),Hc=Object(d.a)((function(){const e=p()(Oi.a.toggle,Oi.a.hoverable),t=Ti.getCommandHotkey(rn.ACTION_ENTER_PLAYTEST_MODE);return o.a.createElement(Jn,{animated:!1,delay:0,fixedOn:"top",title:"Enter play mode",shortcut:t},t=>o.a.createElement("button",{ref:t,className:e,onClick:Dn.enterPlaytestMode,"data-intro-id":"play-test"},o.a.createElement(h.M,null)))}));var Bc=a(166),Wc=a.n(Bc);const Yc=Object(d.a)((function(){return Dn.mode!==wn.PLAYTEST?null:o.a.createElement("div",{className:Wc.a.root},o.a.createElement("div",{className:Wc.a.message},"Press ESC to exit play mode, Shift+ESC to preserve camera position"))}));var Kc=a(33),Vc=a.n(Kc);function zc(){const e=p()(Oi.a.toggle,Oi.a.labelled,Oi.a.hoverable);return o.a.createElement(Jn,{animated:!1,delay:0,fixedOn:"top",title:"Close World Editor"},t=>o.a.createElement("button",{ref:t,className:e,onClick:Dn.closeMap},H))}const Xc=Object(d.a)((function(){const e=Dn.ready&&!ut.a.archetypesCollectionPending,t=p()(Vc.a.root,{[Vc.a.hidden]:Dn.mode===wn.PLAYTEST});return o.a.createElement("div",{className:t},o.a.createElement(Yc,null),o.a.createElement("div",{className:p()(Vc.a["top-left"],Vc.a.hideable),"data-intro-id":"top-left-toolbar"},!!Dn.map&&e&&o.a.createElement(o.a.Fragment,null,o.a.createElement(as,null),o.a.createElement(gs,null),o.a.createElement("div",null)," ",o.a.createElement(Os,null))),o.a.createElement("div",{className:p()(Vc.a["top-center"],Vc.a.hideable)},o.a.createElement(As,null)),o.a.createElement(Ls,null),o.a.createElement("div",{className:p()(Vc.a["top-right"],Vc.a.hideable)},e&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Hc,null),o.a.createElement("div",null)," ",o.a.createElement(Ps,null),o.a.createElement(Uc,null)),o.a.createElement("div",null)," ",o.a.createElement(ki,null),o.a.createElement(zc,null)),o.a.createElement("div",{className:p()(Vc.a["left-bottom"],Vc.a.hideable)},!!Dn.map&&e&&o.a.createElement(fc,null)),o.a.createElement("div",{className:p()(Vc.a.bottom,Vc.a.hideable)},e&&o.a.createElement(Hi,null)))}));var Jc=a(109),qc=a(104),Zc=a.n(qc);const $c=Object(d.a)((function(){const e=ut.a.state===pt.a.READY?"The World Editor is preparing to load...":ut.a.state===pt.a.UNLOADING?"The World Editor is getting ready...":ut.a.archetypesCollectionPending?"Building object list...":"Loading World Editor...",t=ut.a.state!==pt.a.LOADING?"0%":100*Jc.a.loadingProgress+"%",a=p()(Zc.a.progress,{[Zc.a.indeterminate]:0===Jc.a.loadingProgress||ut.a.state!==pt.a.LOADING});return o.a.createElement("div",{className:p()(Zc.a.root,"animated-background")},o.a.createElement("div",{className:Zc.a.text},e),o.a.createElement("div",{className:a},o.a.createElement("div",{className:Zc.a.bar,style:{width:t}})))})),Qc=Object(d.a)((function(e){if(!e.command)return null;const t=Ti.getCommandHotkey(e.command);return o.a.createElement(Kn,{combination:t})}));var ed=a(17),td=a.n(ed);const ad=[{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,o.a.createElement("span",null,"Welcome to the\xa0",o.a.createElement("strong",null,"World Editor"),o.a.createElement("sup",null,o.a.createElement("em",null,"\u03b1")))),o.a.createElement("p",null,"With FxDK's world editor you can modify the world to your desire! Place new objects, move or delete existing ones, we got you covered."),o.a.createElement("p",null,"The world editor is currently in alpha and many more features are coming. This includes placing more entities such as vehicles and checkpoints, but also allow you to create scripted content using a graphical editor. Read more about that ",o.a.createElement("a",{href:"#"},"here"),"! Stay tuned."),Dn.introFirstTime?o.a.createElement("p",null,"Since this is your first time here, we'd like to guide you through the basics of using the editor. Throughout the tour you will learn about the controls, how to place and modify objects, create map patches, and how to use all the other tools."):o.a.createElement("p",null,"In this tour we'd like to guide you through the basics of using the editor. You will learn about the controls, how to place and modify objects, create map patches, and how to use all the other tools.")),closeButtonText:"Skip",backButtonDisabled:!0,nextButtonText:"Start the tour",onEnter(){Dn.enterEditorMode(),Dn.selection.type!==ya.NONE&&Dn.clearEditorSelection(),xn.closeAllTools()}},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Map patches panel",o.a.createElement(Qc,{command:jn(On.Patches)})),o.a.createElement("p",null,"A ",o.a.createElement("strong",null,"map patch")," is a modification to existing map objects such as lamp poles, traffic lights, trash cans, etc."),o.a.createElement("p",null,"You can move, rotate, scale or delete existing map objects. To select an object, simply click on them. Any modification you will make, will appear here."),o.a.createElement("p",{className:"small"},"Note: not all objects on the map can be modified ",o.a.createElement("em",null,"yet"),".",o.a.createElement("br",null),"Just click on something - if it highlights, you can patch it!")),focusElement:"map-patches",onEnter(){xn.openTool(On.Patches)},onExit(){xn.closeTool(On.Patches)}},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Map additions panel",o.a.createElement(Qc,{command:jn(On.Additions)})),o.a.createElement("p",null,o.a.createElement("strong",null,"Map additions")," are objects placed by ",o.a.createElement("em",null,"you"),". Any object that you add to the map will show up in this panel. You can even make groups to organize your work!")),focusElement:"map-additions",onEnter(){xn.openTool(On.Additions)},onExit(){xn.closeTool(On.Additions)}},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Add object panel",o.a.createElement(Qc,{command:jn(On.AddObject)})),o.a.createElement("p",null,"This is the object browser. Want to place a new object into your world? Find and add them from here.")),focusElement:"add-object",onEnter(){xn.openTool(On.AddObject)},onExit(){xn.closeTool(On.AddObject)}},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Properties panel"),o.a.createElement("p",null,"After placing or selecting an object, you can fine-tune the position/rotation/scale properties of the object here."),o.a.createElement("div",null,"You can modify each value with different controls:",o.a.createElement("ul",null,o.a.createElement("li",null,"Keyboard: use ",o.a.createElement(Kn,{className:td.a.inline,combination:"\u2191"})," ",o.a.createElement(Kn,{className:td.a.inline,combination:"\u2193"})," keys to change the value. The ",o.a.createElement(Kn,{className:td.a.inline,combination:"Shift"})," and ",o.a.createElement(Kn,{className:td.a.inline,combination:"Alt"})," modifier keys allow for a faster or slower change rate"),o.a.createElement("li",null,"Mouse wheel: when hovering over the input field you can use your mouse wheel to change the value"),o.a.createElement("li",null,"Click and drag: dragging the input field will also change the value")))),focusElement:"properties-panel",onEnter:xn.showFakeProperties,onExit:xn.hideFakeProperties},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Gizmo mode selector",o.a.createElement("div",null,o.a.createElement(Kn,{combination:Ti.getCommandHotkey(rn.CONTROL_MODE_TRANSLATE_TOGGLE)}),o.a.createElement(Kn,{combination:Ti.getCommandHotkey(rn.CONTROL_MODE_ROTATE_TOGGLE)}),o.a.createElement(Kn,{combination:Ti.getCommandHotkey(rn.CONTROL_MODE_SCALE_TOGGLE)}))),o.a.createElement("p",null,"The ",o.a.createElement("strong",null,"Gizmo")," is the 3D tool which allows you to move, rotate or scale your selection. Use these buttons to change the gizmo mode; from move to rotate to scale."),o.a.createElement("div",{className:td.a.gizmo},o.a.createElement("div",{className:td.a.translation}),o.a.createElement("div",{className:td.a.rotation}),o.a.createElement("div",{className:td.a.scale}))),focusElement:"mode-selector"},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Coordinate space",o.a.createElement(Kn,{combination:Ti.getCommandHotkey(rn.CONTROL_COORD_SYSTEM_TOGGLE)})),o.a.createElement("p",null,"When you rotate an object, you rotate its axis. With this tool you can change the behavior of moving or scaling your selection:"),o.a.createElement("ul",null,o.a.createElement("li",null,"Local coordinate space: Move along the axis of your selection"),o.a.createElement("li",null,"Global coordinate space: Move your selection along the world axis")),o.a.createElement("p",null,"Try it out yourself to get a feel of how it works!")),focusElement:"coord-system"},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Play mode",o.a.createElement(Qc,{command:rn.ACTION_ENTER_PLAYTEST_MODE})),o.a.createElement("p",null,"Quickly jump into your world to test your work."),o.a.createElement("p",null,"You can also choose to spawn in a vehicle, which you can enable from the Settings panel."),o.a.createElement("p",null,o.a.createElement("em",null,"Press ",o.a.createElement(Kn,{className:td.a.inline,combination:"ESC"})," to go back to the editor."))),focusElement:"play-test"},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Environment panel",o.a.createElement(Qc,{command:jn(On.Environment)})),o.a.createElement("p",null,"You can control the time and weather here.")),focusElement:"environment-panel",onEnter(){xn.openTool(On.Environment)},onExit(){xn.closeTool(On.Environment)}},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Settings panel",o.a.createElement(Qc,{command:jn(On.Settings)})),o.a.createElement("p",null,"Knobs, ticks and sliders. You can take this tour again anytime from here.")),focusElement:"settings-panel",onEnter(){xn.openTool(On.Settings)},onExit(){xn.closeTool(On.Settings)}},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Camera controls"),o.a.createElement("p",null,"Click and hold your ",o.a.createElement("strong",null,"Right Mouse Button")," to control the camera rotation."),o.a.createElement("p",null,"Use your ",o.a.createElement("strong",null,"Left Mouse Button")," to select objects."),o.a.createElement("div",null,"Move the camera around using the\xa0",o.a.createElement("div",{style:{display:"inline-flex",gap:"2px"}},o.a.createElement(Kn,{combination:Ma.get("KeyW")}),o.a.createElement(Kn,{combination:Ma.get("KeyA")}),o.a.createElement(Kn,{combination:Ma.get("KeyS")}),o.a.createElement(Kn,{combination:Ma.get("KeyD")})),"\xa0keys.",o.a.createElement("br",null),o.a.createElement("span",null,"You can use ",o.a.createElement(Kn,{className:td.a.inline,combination:"Shift"})," to increase the camera speed or ",o.a.createElement(Kn,{className:td.a.inline,combination:"Alt"})," to move slower.")))},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Keyboard shortcuts"),o.a.createElement("p",null,"The world editor is convenient to use from your keyboard. Here's a quick list of the most useful shortcuts."),o.a.createElement("p",null,"Objects:"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(Kn,{className:td.a.inline,combination:Ti.getCommandHotkey(rn.TOOL_ADD_OBJECT_TOGGLE)})," - Find and add a new object"),o.a.createElement("li",null,o.a.createElement(Kn,{className:td.a.inline,combination:Ti.getCommandHotkey(rn.ACTION_SET_ADDITION_ON_GROUND)})," - Place your selection flush on the ground")),o.a.createElement("p",null,"Selection:"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(Kn,{className:td.a.inline,combination:Ti.getCommandHotkey(rn.CONTROL_COORD_SYSTEM_TOGGLE)})," - Switch between local and global coordinate space"),o.a.createElement("li",null,o.a.createElement(Kn,{className:td.a.inline,combination:Ti.getCommandHotkey(rn.CONTROL_MODE_TRANSLATE_TOGGLE)})," - Move selection"),o.a.createElement("li",null,o.a.createElement(Kn,{className:td.a.inline,combination:Ti.getCommandHotkey(rn.CONTROL_MODE_ROTATE_TOGGLE)})," - Rotate selection"),o.a.createElement("li",null,o.a.createElement(Kn,{className:td.a.inline,combination:Ti.getCommandHotkey(rn.CONTROL_MODE_SCALE_TOGGLE)})," - Scale selection")),o.a.createElement("p",null,"Testing:"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(Kn,{className:td.a.inline,combination:Ti.getCommandHotkey(rn.ACTION_ENTER_PLAYTEST_MODE)})," - Jump into play mode"),o.a.createElement("li",null,o.a.createElement(Kn,{className:td.a.inline,combination:"ESC"})," - Exit play mode")))},{content:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"That's all!"),o.a.createElement("p",null,"Get creative! It's your turn to create your own unique world."),o.a.createElement("p",null,"Make sure to read all about the ",o.a.createElement("a",{href:"#"},"upcoming features")," in the FxDK world editor. There is much more to come.")),nextButtonText:"Get started!"}];function nd(){return o.a.useEffect(()=>(Dn.enterIntroScope(),()=>Dn.exitIntroScope()),[]),o.a.createElement(qi,{steps:ad,onFinish:Dn.closeIntro})}var od=a(167),rd=a.n(od);const ld=Object(d.a)((function(){const e=o.a.useRef(null);o.a.useEffect(()=>(Dn.createInputController(e),()=>Dn.destroyInputController()),[]);const t=!Dn.ready||ut.a.archetypesCollectionPending,a=!ut.a.archetypesCollectionPending&&Dn.showIntro;return o.a.createElement("div",{className:rd.a.root},o.a.createElement(al.a,{backend:kt.a},o.a.createElement(Xc,null)),o.a.createElement("div",{ref:e,className:rd.a["game-view"]},o.a.createElement(vi,null)),t&&o.a.createElement($c,null),a&&o.a.createElement(nd,null))})),id=Object(d.a)((function(){const e=br.get("project:creating"),t=br.get("project:loading"),a=Boolean(_t.hasProject||_t.creatorUI.isOpen||_t.openerUI.isOpen||e||t),n=he.appState===m.a.ready&&!a,r=he.appState===m.a.preparing||he.updaterOpen;return o.a.useEffect(()=>{he.ack(),ut.a.ack(),oo.a.ack(),br.ack(),ro.ack(),Sl.a.ack()},[]),o.a.createElement("div",{className:Ei.a.root},!n&&o.a.createElement(zl,null),r&&o.a.createElement(ii,null),n&&o.a.createElement(ql,null),he.changelogOpen&&o.a.createElement(si,null),o.a.createElement(pi,null),he.isWorldEditor&&o.a.createElement(ld,null))})),sd=Object(d.a)(()=>{const e=o.a.useRef();return o.a.useEffect(()=>{if(e.current){const t=["Cfx.re Development Kit (FiveM)"];_t.hasProject&&t.push(_t.projectName),Dn.mapName&&t.push(Dn.mapName),e.current.innerText=t.reverse().join(" \u2014 ")}},[_t.hasProject,_t.projectName,Dn.mapName]),o.a.useLayoutEffect(()=>{e.current=document.querySelector("title")},[e]),null}),cd=Object(Er.c)("TheiaProjectManager"),dd=Object(d.a)((function(){const e=o.a.useRef({reloadPending:!1}),t=o.a.useRef(""),a=o.a.useRef("");return o.a.useEffect(()=>{if(!Et.isReady&&e.current.reloadPending&&(cd("Theia is not ready and reload pending"),e.current.reloadPending=!1),_t.hasProject){const n=_t.project;if(""===t.current&&(t.current=n.path),t.current!==n.path)return cd("Project has changed, reloading"),t.current=n.path,a.current="",e.current.reloadPending=!0,void Et.forceReload();if(Et.isReady&&!e.current.reloadPending){cd("Theia is ready and no reload is pending");const e=((e,t)=>{const a=new Set(e.fs[e.path]),n=[];for(const o of a)o.isDirectory&&"."!==o.name[0]&&(t.has(o.path)||n.push(Kt(o)));return n})(n,_t.pendingFolderDeletions),t=JSON.stringify(e);a.current!==t&&(cd("Opening project in theia"),a.current=t,Et.openProject({name:n.manifest.name,path:n.path,folders:e}))}}else t.current="",a.current="",Et.setIsReady(!1)},[_t.hasProject,Et.isReady,_t.pendingFolderDeletions]),null})),md=Object(d.a)((function(){var e,t;return null===bt.request?null:o.a.createElement(Ue,{onClose:bt.close},o.a.createElement("div",{className:"modal-header"},bt.request.title),(null===(t=(e=bt.request).children)||void 0===t?void 0:t.call(e,bt.state,bt.setState))||null,o.a.createElement("div",{className:"modal-actions"},o.a.createElement(J,{autofocus:!0,theme:"primary",icon:bt.request.buttonIcon,text:bt.request.buttonText,onClick:bt.confirm}),o.a.createElement(J,{text:"Cancel",onClick:bt.close})))}));if(Object(Er.a)("shell,shell:*,host"),i.a({dsn:"https://e3b160e20aa24ffd9b74a222a4d5c07a@sentry.fivem.net/7",release:"cfx-4665",integrations:[new c.a.BrowserTracing],tracesSampleRate:1}),!initRGDInput())throw new Error("Failed to init RGD input");Object(pe.a)(le.i.setUserId,e=>s.b({id:e})),document.addEventListener("click",e=>{var t;const a=e.target,n=a.matches("a"),o=a.matches("a *");if(!n&&!o)return;e.preventDefault();const r=n?a.getAttribute("href"):null===(t=a.closest("a"))||void 0===t?void 0:t.getAttribute("href");r&&invokeNative("openUrl",r)}),document.addEventListener("contextmenu",e=>{e.preventDefault()}),l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(sd,null),o.a.createElement(dd,null),o.a.createElement(md,null),o.a.createElement(id,null),o.a.createElement("div",{className:"resize-sentinel"})),document.getElementById("root"))}],[[225,1,2]]]);
//# sourceMappingURL=main.chunk.js.map