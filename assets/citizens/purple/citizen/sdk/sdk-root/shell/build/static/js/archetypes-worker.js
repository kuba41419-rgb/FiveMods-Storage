!function(){var e={621:function(e,r){var t,n;void 0===(n="function"==typeof(t=function(){var e="undefined"==typeof window,r=new Map,t=new Map,n=[];n.total=0;var o=[],a=[];function i(){r.clear(),t.clear(),o=[],a=[]}function s(e){for(var r=-9007199254740991,t=e.length-1;t>=0;--t){var n=e[t];if(null!==n){var o=n.score;o>r&&(r=o)}}return-9007199254740991===r?null:r}function l(e,r){var t=e[r];if(void 0!==t)return t;var n=r;Array.isArray(r)||(n=r.split("."));for(var o=n.length,a=-1;e&&++a<o;)e=e[n[a]];return e}function u(e){return"object"==typeof e}var c=function(){var e=[],r=0,t={};function n(){for(var t=0,n=e[t],o=1;o<r;){var a=o+1;t=o,a<r&&e[a].score<e[o].score&&(t=a),e[t-1>>1]=e[t],o=1+(t<<1)}for(var i=t-1>>1;t>0&&n.score<e[i].score;i=(t=i)-1>>1)e[t]=e[i];e[t]=n}return t.add=function(t){var n=r;e[r++]=t;for(var o=n-1>>1;n>0&&t.score<e[o].score;o=(n=o)-1>>1)e[n]=e[o];e[n]=t},t.poll=function(){if(0!==r){var t=e[0];return e[0]=e[--r],n(),t}},t.peek=function(t){if(0!==r)return e[0]},t.replaceTop=function(r){e[0]=r,n()},t},f=c();return function d(p){var g={single:function(e,r,t){return e?(u(e)||(e=g.getPreparedSearch(e)),r?(u(r)||(r=g.getPrepared(r)),((t&&void 0!==t.allowTypo?t.allowTypo:!p||void 0===p.allowTypo||p.allowTypo)?g.algorithm:g.algorithmNoTypo)(e,r,e[0])):null):null},go:function(e,r,t){if(!e)return n;var o=(e=g.prepareSearch(e))[0],a=t&&t.threshold||p&&p.threshold||-9007199254740991,i=t&&t.limit||p&&p.limit||9007199254740991,c=(t&&void 0!==t.allowTypo?t.allowTypo:!p||void 0===p.allowTypo||p.allowTypo)?g.algorithm:g.algorithmNoTypo,d=0,y=0,v=r.length;if(t&&t.keys)for(var h=t.scoreFn||s,b=t.keys,m=b.length,w=v-1;w>=0;--w){for(var T=r[w],x=new Array(m),k=m-1;k>=0;--k)(j=l(T,_=b[k]))?(u(j)||(j=g.getPrepared(j)),x[k]=c(e,j,o)):x[k]=null;x.obj=T;var M=h(x);null!==M&&(M<a||(x.score=M,d<i?(f.add(x),++d):(++y,M>f.peek().score&&f.replaceTop(x))))}else if(t&&t.key){var _=t.key;for(w=v-1;w>=0;--w)(j=l(T=r[w],_))&&(u(j)||(j=g.getPrepared(j)),null!==(z=c(e,j,o))&&(z.score<a||(z={target:z.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:z.score,indexes:z.indexes,obj:T},d<i?(f.add(z),++d):(++y,z.score>f.peek().score&&f.replaceTop(z)))))}else for(w=v-1;w>=0;--w){var j,z;(j=r[w])&&(u(j)||(j=g.getPrepared(j)),null!==(z=c(e,j,o))&&(z.score<a||(d<i?(f.add(z),++d):(++y,z.score>f.peek().score&&f.replaceTop(z)))))}if(0===d)return n;var S=new Array(d);for(w=d-1;w>=0;--w)S[w]=f.poll();return S.total=d+y,S},goAsync:function(r,t,o){var a=!1,i=new Promise((function(i,f){if(!r)return i(n);var d=(r=g.prepareSearch(r))[0],y=c(),v=t.length-1,h=o&&o.threshold||p&&p.threshold||-9007199254740991,b=o&&o.limit||p&&p.limit||9007199254740991,m=(o&&void 0!==o.allowTypo?o.allowTypo:!p||void 0===p.allowTypo||p.allowTypo)?g.algorithm:g.algorithmNoTypo,w=0,T=0;function x(){if(a)return f("canceled");var c=Date.now();if(o&&o.keys)for(var p=o.scoreFn||s,k=o.keys,M=k.length;v>=0;--v){for(var _=t[v],j=new Array(M),z=M-1;z>=0;--z)(E=l(_,P=k[z]))?(u(E)||(E=g.getPrepared(E)),j[z]=m(r,E,d)):j[z]=null;j.obj=_;var S=p(j);if(null!==S&&!(S<h)&&(j.score=S,w<b?(y.add(j),++w):(++T,S>y.peek().score&&y.replaceTop(j)),v%1e3==0&&Date.now()-c>=10))return void(e?setImmediate(x):setTimeout(x))}else if(o&&o.key){for(var P=o.key;v>=0;--v)if((E=l(_=t[v],P))&&(u(E)||(E=g.getPrepared(E)),null!==(I=m(r,E,d))&&!(I.score<h)&&(I={target:I.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:I.score,indexes:I.indexes,obj:_},w<b?(y.add(I),++w):(++T,I.score>y.peek().score&&y.replaceTop(I)),v%1e3==0&&Date.now()-c>=10)))return void(e?setImmediate(x):setTimeout(x))}else for(;v>=0;--v){var E,I;if((E=t[v])&&(u(E)||(E=g.getPrepared(E)),null!==(I=m(r,E,d))&&!(I.score<h)&&(w<b?(y.add(I),++w):(++T,I.score>y.peek().score&&y.replaceTop(I)),v%1e3==0&&Date.now()-c>=10)))return void(e?setImmediate(x):setTimeout(x))}if(0===w)return i(n);for(var W=new Array(w),L=w-1;L>=0;--L)W[L]=y.poll();W.total=w+T,i(W)}e?setImmediate(x):x()}));return i.cancel=function(){a=!0},i},highlight:function(e,r,t){if(null===e)return null;void 0===r&&(r="<b>"),void 0===t&&(t="</b>");for(var n="",o=0,a=!1,i=e.target,s=i.length,l=e.indexes,u=0;u<s;++u){var c=i[u];if(l[o]===u){if(a||(a=!0,n+=r),++o===l.length){n+=c+t+i.substr(u+1);break}}else a&&(a=!1,n+=t);n+=c}return n},prepare:function(e){if(e)return{target:e,_targetLowerCodes:g.prepareLowerCodes(e),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(e){if(e)return{target:e,_targetLowerCodes:g.prepareLowerCodes(e),_nextBeginningIndexes:g.prepareNextBeginningIndexes(e),score:null,indexes:null,obj:null}},prepareSearch:function(e){if(e)return g.prepareLowerCodes(e)},getPrepared:function(e){if(e.length>999)return g.prepare(e);var t=r.get(e);return void 0!==t||(t=g.prepare(e),r.set(e,t)),t},getPreparedSearch:function(e){if(e.length>999)return g.prepareSearch(e);var r=t.get(e);return void 0!==r||(r=g.prepareSearch(e),t.set(e,r)),r},algorithm:function(e,r,t){for(var n=r._targetLowerCodes,i=e.length,s=n.length,l=0,u=0,c=0,f=0;;){if(t===n[u]){if(o[f++]=u,++l===i)break;t=e[0===c?l:c===l?l+1:c===l-1?l-1:l]}if(++u>=s)for(;;){if(l<=1)return null;if(0===c){if(t===e[--l])continue;c=l}else{if(1===c)return null;if((t=e[1+(l=--c)])===e[l])continue}u=o[(f=l)-1]+1;break}}l=0;var d=0,p=!1,y=0,v=r._nextBeginningIndexes;null===v&&(v=r._nextBeginningIndexes=g.prepareNextBeginningIndexes(r.target));var h=u=0===o[0]?0:v[o[0]-1];if(u!==s)for(;;)if(u>=s){if(l<=0){if(++d>i-2)break;if(e[d]===e[d+1])continue;u=h;continue}--l,u=v[a[--y]]}else if(e[0===d?l:d===l?l+1:d===l-1?l-1:l]===n[u]){if(a[y++]=u,++l===i){p=!0;break}++u}else u=v[u];if(p)var b=a,m=y;else b=o,m=f;for(var w=0,T=-1,x=0;x<i;++x)T!==(u=b[x])-1&&(w-=u),T=u;for(p?0!==d&&(w+=-20):(w*=1e3,0!==c&&(w+=-20)),w-=s-i,r.score=w,r.indexes=new Array(m),x=m-1;x>=0;--x)r.indexes[x]=b[x];return r},algorithmNoTypo:function(e,r,t){for(var n=r._targetLowerCodes,i=e.length,s=n.length,l=0,u=0,c=0;;){if(t===n[u]){if(o[c++]=u,++l===i)break;t=e[l]}if(++u>=s)return null}l=0;var f=!1,d=0,p=r._nextBeginningIndexes;if(null===p&&(p=r._nextBeginningIndexes=g.prepareNextBeginningIndexes(r.target)),(u=0===o[0]?0:p[o[0]-1])!==s)for(;;)if(u>=s){if(l<=0)break;--l,u=p[a[--d]]}else if(e[l]===n[u]){if(a[d++]=u,++l===i){f=!0;break}++u}else u=p[u];if(f)var y=a,v=d;else y=o,v=c;for(var h=0,b=-1,m=0;m<i;++m)b!==(u=y[m])-1&&(h-=u),b=u;for(f||(h*=1e3),h-=s-i,r.score=h,r.indexes=new Array(v),m=v-1;m>=0;--m)r.indexes[m]=y[m];return r},prepareLowerCodes:function(e){for(var r=e.length,t=[],n=e.toLowerCase(),o=0;o<r;++o)t[o]=n.charCodeAt(o);return t},prepareBeginningIndexes:function(e){for(var r=e.length,t=[],n=0,o=!1,a=!1,i=0;i<r;++i){var s=e.charCodeAt(i),l=s>=65&&s<=90,u=l||s>=97&&s<=122||s>=48&&s<=57,c=l&&!o||!a||!u;o=l,a=u,c&&(t[n++]=i)}return t},prepareNextBeginningIndexes:function(e){for(var r=e.length,t=g.prepareBeginningIndexes(e),n=[],o=t[0],a=0,i=0;i<r;++i)o>i?n[i]=o:(o=t[++a],n[i]=void 0===o?r:o);return n},cleanup:i,new:d};return g}()})?t.apply(r,[]):t)||(e.exports=n)},6898:function(e){"use strict";e.exports=e=>!!e&&("symbol"==typeof Symbol.observable&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},2467:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serialize=r.deserialize=r.registerSerializer=void 0;const n=t(7381);let o=n.DefaultSerializer;r.registerSerializer=function(e){o=n.extendSerializer(o,e)},r.deserialize=function(e){return o.deserialize(e)},r.serialize=function(e){return o.serialize(e)}},7381:function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultSerializer=r.extendSerializer=void 0,r.extendSerializer=function(e,r){const t=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize:e=>r.deserialize(e,t),serialize:e=>r.serialize(e,n)}};const t=e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),n=e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack});r.DefaultSerializer={deserialize(e){return(r=e)&&"object"==typeof r&&"__error_marker"in r&&"$$error"===r.__error_marker?t(e):e;var r},serialize:e=>e instanceof Error?n(e):e}},8258:function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$worker=r.$transferable=r.$terminate=r.$events=r.$errors=void 0,r.$errors=Symbol("thread.errors"),r.$events=Symbol("thread.events"),r.$terminate=Symbol("thread.terminate"),r.$transferable=Symbol("thread.transferable"),r.$worker=Symbol("thread.worker")},8180:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Transfer=r.isTransferDescriptor=void 0;const n=t(8258);r.isTransferDescriptor=function(e){return e&&"object"==typeof e&&e[n.$transferable]},r.Transfer=function(e,r){if(!r){if(!(t=e)||"object"!=typeof t)throw Error();r=[e]}var t;return{[n.$transferable]:!0,send:e,transferables:r}}},3229:function(e,r){"use strict";var t,n;Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerMessageType=r.MasterMessageType=void 0,(n=r.MasterMessageType||(r.MasterMessageType={})).cancel="cancel",n.run="run",(t=r.WorkerMessageType||(r.WorkerMessageType={})).error="error",t.init="init",t.result="result",t.running="running",t.uncaughtError="uncaughtError"},3447:function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={isWorkerRuntime:function(){const e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return!("undefined"==typeof self||!self.postMessage||e)},postMessageToMaster:function(e,r){self.postMessage(e,r)},subscribeToMasterMessages:function(e){const r=r=>{e(r.data)};return self.addEventListener("message",r),()=>{self.removeEventListener("message",r)}}}},1934:function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}l((n=n.apply(e,r||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.expose=r.isWorkerRuntime=r.Transfer=r.registerSerializer=void 0;const a=o(t(6898)),i=t(2467),s=t(8180),l=t(3229),u=o(t(3447));var c=t(2467);Object.defineProperty(r,"registerSerializer",{enumerable:!0,get:function(){return c.registerSerializer}});var f=t(8180);Object.defineProperty(r,"Transfer",{enumerable:!0,get:function(){return f.Transfer}}),r.isWorkerRuntime=u.default.isWorkerRuntime;let d=!1;const p=new Map,g=e=>e&&e.type===l.MasterMessageType.run,y=e=>a.default(e)||function(e){return e&&"object"==typeof e&&"function"==typeof e.subscribe}(e);function v(e){return s.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function h(e,r){const{payload:t,transferables:n}=v(r),o={type:l.WorkerMessageType.error,uid:e,error:i.serialize(t)};u.default.postMessageToMaster(o,n)}function b(e,r,t){const{payload:n,transferables:o}=v(t),a={type:l.WorkerMessageType.result,uid:e,complete:!!r||void 0,payload:n};u.default.postMessageToMaster(a,o)}function m(e){try{const r={type:l.WorkerMessageType.uncaughtError,error:i.serialize(e)};u.default.postMessageToMaster(r)}catch(r){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:",r,"\nOriginal error:",e)}}function w(e,r,t){return n(this,void 0,void 0,(function*(){let n;try{n=r(...t)}catch(r){return h(e,r)}const o=y(n)?"observable":"promise";if(function(e,r){const t={type:l.WorkerMessageType.running,uid:e,resultType:r};u.default.postMessageToMaster(t)}(e,o),y(n)){const r=n.subscribe((r=>b(e,!1,i.serialize(r))),(r=>{h(e,i.serialize(r)),p.delete(e)}),(()=>{b(e,!0),p.delete(e)}));p.set(e,r)}else try{const r=yield n;b(e,!0,i.serialize(r))}catch(r){h(e,i.serialize(r))}}))}r.expose=function(e){if(!u.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(d)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(d=!0,"function"==typeof e)u.default.subscribeToMasterMessages((r=>{g(r)&&!r.method&&w(r.uid,e,r.args.map(i.deserialize))})),function(){const e={type:l.WorkerMessageType.init,exposed:{type:"function"}};u.default.postMessageToMaster(e)}();else{if("object"!=typeof e||!e)throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);u.default.subscribeToMasterMessages((r=>{g(r)&&r.method&&w(r.uid,e[r.method],r.args.map(i.deserialize))})),function(e){const r={type:l.WorkerMessageType.init,exposed:{type:"module",methods:e}};u.default.postMessageToMaster(r)}(Object.keys(e).filter((r=>"function"==typeof e[r])))}u.default.subscribeToMasterMessages((e=>{if((r=e)&&r.type===l.MasterMessageType.cancel){const r=e.uid,t=p.get(r);t&&(t.unsubscribe(),p.delete(r))}var r}))},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&u.default.isWorkerRuntime()&&(self.addEventListener("error",(e=>{setTimeout((()=>m(e.error||e)),250)})),self.addEventListener("unhandledrejection",(e=>{const r=e.reason;r&&"string"==typeof r.message&&setTimeout((()=>m(r)),250)}))),"undefined"!=typeof process&&"function"==typeof process.on&&u.default.isWorkerRuntime()&&(process.on("uncaughtException",(e=>{setTimeout((()=>m(e)),250)})),process.on("unhandledRejection",(e=>{e&&"string"==typeof e.message&&setTimeout((()=>m(e)),250)})))}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={exports:{}};return e[n].call(a.exports,a,a.exports,t),a.exports}t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,{a:r}),r},t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},("undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"cfx-4960"},function(){"use strict";var e=t(1934);const r=e.expose;e.registerSerializer,e.Transfer;var n=t(621),o=t.n(n);const a=parseInt(location.port,10)||80,i=location.hostname,s=a,l=i;if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){const e=new Intl.Collator(void 0,{usage:"sort"}),t={limit:100,threshold:-1e4};function n(r,t){return e.compare(r,t)}let a,i,u=[],c=!1;const f=(async()=>{try{const e=await fetch(`http://${l}:${s}/archetypes.json`);if(e.status>=400)throw new Error("Archetypes unavailable");a=await e.json(),u=Object.keys(a.archetypes).sort(n),i=u.map((e=>o().prepare(e))),console.log("Hi form archetypes worker, archetypes are loaded")}catch(e){console.log("Failed to fetch archetypes",e)}finally{c=!0}})();r({search:e=>i?o().go(e,i,t).map((({target:e})=>e)):[],getArchetypeFileName:async e=>(c||await f,a.files[a.archetypes[e]?.[0]]),getArchetypeLodDist:async e=>(c||await f,a.archetypes[e]?.[1]),getAll:async()=>(c||await f,u)})}}()}();
//# sourceMappingURL=archetypes-worker.js.map